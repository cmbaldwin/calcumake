# Secrets defined here are available for reference under registry/password, env/secret, builder/secrets,
# and accessories/*/env/secret in config/deploy.yml. All secrets should be pulled from either
# password manager, ENV, or a file. DO NOT ENTER RAW CREDENTIALS HERE! This file needs to be safe for git.

SECRETS=$(kamal secrets fetch --adapter 1password --account CNCYFLWUMZHE7MBS5AAOOSTLTI --from "MOAB/Production" CALCUMAKE_RAILS_MASTER_KEY CALCUMAKE_RAILS_POSTGRES_PASSWORD CALCUMAKE_SSL_CERT_PEM CALCUMAKE_SSL_KEY_PEM CALCUMAKE_HETZNER_S3_SECRET_KEY CALCUMAKE_HETZNER_S3_ACCESS_KEY)
RAILS_MASTER_KEY=$(kamal secrets extract CALCUMAKE_RAILS_MASTER_KEY ${SECRETS})
POSTGRES_PASSWORD=$(kamal secrets extract CALCUMAKE_RAILS_POSTGRES_PASSWORD ${SECRETS})
CLOUDFLARE_SSL_CERT_PEM=$(kamal secrets extract CALCUMAKE_SSL_CERT_PEM ${SECRETS})
CLOUDFLARE_SSL_KEY_PEM=$(kamal secrets extract CALCUMAKE_SSL_KEY_PEM ${SECRETS})
HETZNER_S3_ACCESS_KEY=$(kamal secrets extract CALCUMAKE_HETZNER_S3_ACCESS_KEY ${SECRETS})
HETZNER_S3_SECRET_KEY=$(kamal secrets extract CALCUMAKE_HETZNER_S3_SECRET_KEY ${SECRETS})

# AWS ECR Registry Storage Credentials
AWS_ECR_PASSWORD=$(aws ecr get-login-password --region ap-southeast-2 --profile default)