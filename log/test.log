  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (47.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test"[0m
  [1m[35m (44.9ms)[0m  [1m[35mCREATE DATABASE "print_calc_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (11.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "currency" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "power_consumption" decimal, "energy_cost_per_kwh" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "printer_cost" decimal, "investment_return_years" integer, "daily_usage_hours" integer, "repair_cost_percentage" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908022939)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908022800);[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 02:46:44.691288', '2025-09-08 02:46:44.691289') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'd86d4bcb9840598935e605075e3e345fbb19554d', '2025-09-08 02:46:44.698264', '2025-09-08 02:46:44.698264') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (4.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.775729', '2025-09-08 02:46:44.775729'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.775729', '2025-09-08 02:46:44.775729');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.796386', '2025-09-08 02:46:44.796386'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.796386', '2025-09-08 02:46:44.796386')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.6ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.820937', '2025-09-08 02:46:44.820937'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.820937', '2025-09-08 02:46:44.820937');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.821034', '2025-09-08 02:46:44.821034'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.821034', '2025-09-08 02:46:44.821034')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.823457', '2025-09-08 02:46:44.823457'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.823457', '2025-09-08 02:46:44.823457');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.823493', '2025-09-08 02:46:44.823493'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.823493', '2025-09-08 02:46:44.823493')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.826835', '2025-09-08 02:46:44.826835'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.826835', '2025-09-08 02:46:44.826835');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.827157', '2025-09-08 02:46:44.827157'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.827157', '2025-09-08 02:46:44.827157')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.830840', '2025-09-08 02:46:44.830840'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.830840', '2025-09-08 02:46:44.830840');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.830858', '2025-09-08 02:46:44.830858'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.830858', '2025-09-08 02:46:44.830858')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.835516', '2025-09-08 02:46:44.835516'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.835516', '2025-09-08 02:46:44.835516');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.835568', '2025-09-08 02:46:44.835568'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.835568', '2025-09-08 02:46:44.835568')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.839445', '2025-09-08 02:46:44.839445'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.839445', '2025-09-08 02:46:44.839445');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.839551', '2025-09-08 02:46:44.839551'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.839551', '2025-09-08 02:46:44.839551')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.842971', '2025-09-08 02:46:44.842971'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.842971', '2025-09-08 02:46:44.842971');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.845841', '2025-09-08 02:46:44.845841'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.845841', '2025-09-08 02:46:44.845841')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.855272', '2025-09-08 02:46:44.855272'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.855272', '2025-09-08 02:46:44.855272');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.855344', '2025-09-08 02:46:44.855344'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.855344', '2025-09-08 02:46:44.855344')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.858185', '2025-09-08 02:46:44.858185'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.858185', '2025-09-08 02:46:44.858185');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.858198', '2025-09-08 02:46:44.858198'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.858198', '2025-09-08 02:46:44.858198')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.862506', '2025-09-08 02:46:44.862506'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.862506', '2025-09-08 02:46:44.862506');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.862517', '2025-09-08 02:46:44.862517'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.862517', '2025-09-08 02:46:44.862517')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.866104', '2025-09-08 02:46:44.866104'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.866104', '2025-09-08 02:46:44.866104');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.866117', '2025-09-08 02:46:44.866117'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.866117', '2025-09-08 02:46:44.866117')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.868743', '2025-09-08 02:46:44.868743'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.868743', '2025-09-08 02:46:44.868743');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.868753', '2025-09-08 02:46:44.868753'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.868753', '2025-09-08 02:46:44.868753')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.871356', '2025-09-08 02:46:44.871356'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.871356', '2025-09-08 02:46:44.871356');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.871366', '2025-09-08 02:46:44.871366'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.871366', '2025-09-08 02:46:44.871366')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.877269', '2025-09-08 02:46:44.877269'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.877269', '2025-09-08 02:46:44.877269');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.877841', '2025-09-08 02:46:44.877841'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.877841', '2025-09-08 02:46:44.877841')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.888177', '2025-09-08 02:46:44.888177'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.888177', '2025-09-08 02:46:44.888177');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.888188', '2025-09-08 02:46:44.888188'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.888188', '2025-09-08 02:46:44.888188')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.891348', '2025-09-08 02:46:44.891348'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.891348', '2025-09-08 02:46:44.891348');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.891358', '2025-09-08 02:46:44.891358'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.891358', '2025-09-08 02:46:44.891358')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.894056', '2025-09-08 02:46:44.894056'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.894056', '2025-09-08 02:46:44.894056');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.894065', '2025-09-08 02:46:44.894065'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.894065', '2025-09-08 02:46:44.894065')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.896487', '2025-09-08 02:46:44.896487'), (298486374, 298486374, 'MyString', 'MyString', 1, 1, 9.99, 'MyString', 9.99, 9.99, 9.99, 9.99, 9.99, 1, 9.99, 1, 9.99, 9.99, 1, 1, 9.99, 9.99, 9.99, 9.99, '2025-09-08 02:46:44.896487', '2025-09-08 02:46:44.896487');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.896497', '2025-09-08 02:46:44.896497'), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:46:44.896497', '2025-09-08 02:46:44.896497')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (2.4ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 02:47:21.262717', '2025-09-08 02:47:21.262717'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 02:47:21.262717', '2025-09-08 02:47:21.262717');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$Hjv7snRmCmCWZ6Eo/ZJ1AeJ7YVodQn8bgQBClL4DJ7FHyGXmI/aM6', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:47:21.281744', '2025-09-08 02:47:21.281744'), (298486374, 'user2@example.com', '$2a$04$HTpZVychTdrsNpva.qXNK.grZBeaScPXjPOJXNr5v/vr3Oz1cbMkW', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:47:21.281744', '2025-09-08 02:47:21.281744')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (20.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:21.372061"], ["updated_at", "2025-09-08 02:47:21.372061"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:21.393058"], ["updated_at", "2025-09-08 02:47:21.393058"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:21.395398"], ["updated_at", "2025-09-08 02:47:21.395398"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:21.411409"], ["updated_at", "2025-09-08 02:47:21.411409"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:21.414251"], ["updated_at", "2025-09-08 02:47:21.414251"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:21.416681"], ["updated_at", "2025-09-08 02:47:21.416681"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:21.419594"], ["updated_at", "2025-09-08 02:47:21.419594"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:21.423235"], ["updated_at", "2025-09-08 02:47:21.423235"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:21.426572"], ["updated_at", "2025-09-08 02:47:21.426572"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190971], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "200.0"], ["energy_cost_per_kwh", "0.12"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.716"], ["created_at", "2025-09-08 02:47:21.427546"], ["updated_at", "2025-09-08 02:47:21.427546"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:21.431785"], ["updated_at", "2025-09-08 02:47:21.431785"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:21.433786"], ["updated_at", "2025-09-08 02:47:21.433786"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:21.439705"], ["updated_at", "2025-09-08 02:47:21.439705"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:21.447241"], ["updated_at", "2025-09-08 02:47:21.447241"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:21.449916"], ["updated_at", "2025-09-08 02:47:21.449916"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 02:47:39.844020', '2025-09-08 02:47:39.844020'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 02:47:39.844020', '2025-09-08 02:47:39.844020');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$Icx3oy4ZOUdCMuUtTcCs9ev0jfRCAK17Fbbbhk3fPqWSxoCrqie0e', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:47:39.856948', '2025-09-08 02:47:39.856948'), (298486374, 'user2@example.com', '$2a$04$6xwaUVPRDZ8vm9bDH9gixeTwHpDGTwmLgYlNeCEZF3IVcSohV0qli', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:47:39.856948', '2025-09-08 02:47:39.856948')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:39.909295"], ["updated_at", "2025-09-08 02:47:39.909295"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:39.929271"], ["updated_at", "2025-09-08 02:47:39.929271"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:39.936937"], ["updated_at", "2025-09-08 02:47:39.936937"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:39.955379"], ["updated_at", "2025-09-08 02:47:39.955379"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:39.960050"], ["updated_at", "2025-09-08 02:47:39.960050"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:39.964983"], ["updated_at", "2025-09-08 02:47:39.964983"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:39.977354"], ["updated_at", "2025-09-08 02:47:39.977354"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:39.981014"], ["updated_at", "2025-09-08 02:47:39.981014"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:39.997683"], ["updated_at", "2025-09-08 02:47:39.997683"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190971], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "200.0"], ["energy_cost_per_kwh", "0.12"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.716"], ["created_at", "2025-09-08 02:47:40.000677"], ["updated_at", "2025-09-08 02:47:40.000677"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:40.011007"], ["updated_at", "2025-09-08 02:47:40.011007"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:40.015254"], ["updated_at", "2025-09-08 02:47:40.015254"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:40.027144"], ["updated_at", "2025-09-08 02:47:40.027144"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:40.032914"], ["updated_at", "2025-09-08 02:47:40.032914"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:40.039254"], ["updated_at", "2025-09-08 02:47:40.039254"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.6ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 02:47:47.529193', '2025-09-08 02:47:47.529193'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 02:47:47.529193', '2025-09-08 02:47:47.529193');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$g1XU52s5PvKO.XXfX5/oGO.GaRTkBZsoTvZoDEG3gePEiWf7Bd1S2', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:47:47.542123', '2025-09-08 02:47:47.542123'), (298486374, 'user2@example.com', '$2a$04$eIbnToTcyqA227l5L0dXieSRUjtT0dJPjNNJBsEZ3lDWdi73ITupy', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:47:47.542123', '2025-09-08 02:47:47.542123')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:47:47.593605"], ["updated_at", "2025-09-08 02:47:47.593605"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 02:48:28.141000', '2025-09-08 02:48:28.141000'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 02:48:28.141000', '2025-09-08 02:48:28.141000');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$QPi7hffZG.Hy6Cvr2sUxiuNV0P26T5TjyeF1uiLhs9qcyn8P9yuhO', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:48:28.156198', '2025-09-08 02:48:28.156198'), (298486374, 'user2@example.com', '$2a$04$olQ8Axu6nzC9ZUlSgPgMOe9mAtPmBU5B6vKNWGWdhGGf5w/Le9iFO', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:48:28.156198', '2025-09-08 02:48:28.156198')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:48:28.206946"], ["updated_at", "2025-09-08 02:48:28.206946"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.5"], ["created_at", "2025-09-08 02:48:28.223289"], ["updated_at", "2025-09-08 02:48:28.223289"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 02:54:39.665141', '2025-09-08 02:54:39.665141'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 02:54:39.665141', '2025-09-08 02:54:39.665141');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$cq0T0RJ/8o.29PKWTW84FeMFyuJN9zZMUouoe0McpQd2JU6SW1I9.', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:54:39.677562', '2025-09-08 02:54:39.677562'), (298486374, 'user2@example.com', '$2a$04$oNO6SYO5ZIXhBJ9Y90Y6x.P2L0dNJGgJ2T.p1/Q84AqboAejALGzG', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:54:39.677562', '2025-09-08 02:54:39.677562')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:54:39 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["currency", "EUR"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 02:54:39.819989"], ["updated_at", "2025-09-08 02:54:39.819989"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 14ms (ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:54:39 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 12.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 16.3ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 24ms (Views: 22.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:54:39 +0900
Processing by PrintPricingsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:54:39 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (1.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 3.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.9ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 1.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:54:39 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 2.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 5ms (Views: 3.0ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:54:39 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:54:39 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 5.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.4ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 6.6ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 298486374], ["LIMIT", 1]]
Started GET "/print_pricings/298486374" for 127.0.0.1 at 2025-09-08 11:54:39 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "298486374"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 298486374], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="298486374" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:106:in 'block (2 levels) in <class:PrintPricingsControllerTest>'
test/controllers/print_pricings_controller_test.rb:105:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 11:54:40 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:54:40 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.4ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 8ms (ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:54:40 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (3.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.5ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "final_price" = $3, "updated_at" = $4 WHERE "print_pricings"."id" = $5[0m  [["job_name", "Updated Job Name"], ["currency", "GBP"], ["final_price", "1.716"], ["updated_at", "2025-09-08 02:54:40.129198"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 14ms (ActiveRecord: 3.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 02:55:00.019007', '2025-09-08 02:55:00.019007'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 02:55:00.019007', '2025-09-08 02:55:00.019007');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$Ls1AwP7OxuFa2PgfSQnioe5d89Ae8FuVPOUvypEEfZ/meHQZM9GVi', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:55:00.028274', '2025-09-08 02:55:00.028274'), (298486374, 'user2@example.com', '$2a$04$xQL0bqXfHqEaRyBGVhquveVEV7ZIe7gGyE9uUg2/m7st78lLTv.PG', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:55:00.028274', '2025-09-08 02:55:00.028274')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 11:55:00 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 3.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | GC: 0.3ms)
Completed 200 OK in 15ms (Views: 7.4ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.8ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:00 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:55:00.146686"], ["updated_at", "2025-09-08 02:55:00.146686"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 02:55:00.149955"], ["updated_at", "2025-09-08 02:55:00.149955"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 11:55:00 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:116:in 'block (2 levels) in <class:PrintPricingsControllerTest>'
test/controllers/print_pricings_controller_test.rb:115:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:55:00 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.2ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "final_price" = $3, "updated_at" = $4 WHERE "print_pricings"."id" = $5[0m  [["job_name", "Updated Job Name"], ["currency", "GBP"], ["final_price", "1.716"], ["updated_at", "2025-09-08 02:55:00.345709"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:00 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 9.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.8ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 13ms (Views: 10.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:55:00 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 4ms (Views: 2.6ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:55:00 +0900
Processing by PrintPricingsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 1.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:55:00 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 11ms (ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:00 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | GC: 1.3ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 1.3ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:55:00 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 1.9ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.2ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:00 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["currency", "EUR"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 02:55:00.427799"], ["updated_at", "2025-09-08 02:55:00.427799"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 10ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 02:55:17.033791', '2025-09-08 02:55:17.033791'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 02:55:17.033791', '2025-09-08 02:55:17.033791');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$PEdsi7o6el7zUOgaQXAc7OTNqzmR.02VjtXmk0TMVctX4SOC7Sbke', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:55:17.044634', '2025-09-08 02:55:17.044634'), (298486374, 'user2@example.com', '$2a$04$k5gwBQz3.WsPCoXKR8x.0us6b59IJlR6lIR2sqfjN6iO/5K8Ohcr2', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:55:17.044634', '2025-09-08 02:55:17.044634')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:17 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (1.0ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["currency", "EUR"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 02:55:17.140324"], ["updated_at", "2025-09-08 02:55:17.140324"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 7ms (ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.2ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:55:17 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.6ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "final_price" = $3, "updated_at" = $4 WHERE "print_pricings"."id" = $5[0m  [["job_name", "Updated Job Name"], ["currency", "GBP"], ["final_price", "1.716"], ["updated_at", "2025-09-08 02:55:17.152207"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 6ms (ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:55:17 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 2.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 6.4ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:55:17 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 6.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.7ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 8ms (Views: 6.9ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:55:17.180100"], ["updated_at", "2025-09-08 02:55:17.180100"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 02:55:17.183187"], ["updated_at", "2025-09-08 02:55:17.183187"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 11:55:17 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190964" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:116:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:17 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 8.8ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 9.6ms | GC: 0.5ms)
Completed 422 Unprocessable Content in 13ms (Views: 9.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.5ms)
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:55:17 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 7ms (ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:17 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 2.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 1.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:17 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:55:17 +0900
Processing by PrintPricingsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.1ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 11:55:17 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (1.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 7.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.2ms | GC: 0.0ms)
Completed 200 OK in 15ms (Views: 9.0ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 02:55:33.767506', '2025-09-08 02:55:33.767506'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 02:55:33.767506', '2025-09-08 02:55:33.767506');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$TiUWHGOJCIaPE7rOtggcTOOjDInN30FcZKgZsvO.o/jis9bmq3yXa', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:55:33.778776', '2025-09-08 02:55:33.778776'), (298486374, 'user2@example.com', '$2a$04$OrNHKzZz4coX6REE7OBpwOCGepxuhrWFaEpAxSA6LiThGCgQDgUB6', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:55:33.778776', '2025-09-08 02:55:33.778776')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (1.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:33 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 10.9ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 14.1ms | GC: 0.3ms)
Completed 422 Unprocessable Content in 21ms (Views: 16.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.7ms)
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:55:33 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.5ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "final_price" = $3, "updated_at" = $4 WHERE "print_pricings"."id" = $5[0m  [["job_name", "Updated Job Name"], ["currency", "GBP"], ["final_price", "1.716"], ["updated_at", "2025-09-08 02:55:33.898839"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 7ms (ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:33 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["currency", "EUR"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 02:55:33.909261"], ["updated_at", "2025-09-08 02:55:33.909261"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 3ms (ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:55:33 +0900
Processing by PrintPricingsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:55:33 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 2.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 5ms (Views: 2.8ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:55:33 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 4.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.2ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 5.2ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:55:33.951914"], ["updated_at", "2025-09-08 02:55:33.951914"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (1.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 02:55:33.959602"], ["updated_at", "2025-09-08 02:55:33.959602"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 11:55:33 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190964" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:116:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:34 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:34 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 1.5ms | ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:55:34 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 11ms (ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 11:55:34 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 02:55:40.129516', '2025-09-08 02:55:40.129516'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 02:55:40.129516', '2025-09-08 02:55:40.129516');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$zdXz.lX20ZfkSqljODIs4eUU8dCU7PsUgiK4DS8W0ln7wQSbGQOA.', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:55:40.142041', '2025-09-08 02:55:40.142041'), (298486374, 'user2@example.com', '$2a$04$ZX34eosDPMy5PEvhIhen/u1DZYOKPnh7fSOYUJycomzbbz6YhYDna', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:55:40.142041', '2025-09-08 02:55:40.142041')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by Devise::RegistrationsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 0.7ms | GC: 0.5ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 6.0ms | GC: 2.1ms)
  Rendered layout layouts/application.html.erb (Duration: 9.3ms | GC: 2.7ms)
Completed 200 OK in 23ms (Views: 15.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 9.7ms)
Started POST "/users" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:55:40.249018"], ["updated_at", "2025-09-08 02:55:40.249018"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 303 See Other in 5ms (ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 0.1ms)
Started GET "/" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190963], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 3.3ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.3ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 2.1ms | ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (1.0ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Integration Test Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.621"], ["created_at", "2025-09-08 02:55:40.270048"], ["updated_at", "2025-09-08 02:55:40.270048"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 6ms (ActiveRecord: 1.2ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190963], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 3.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.0ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.0ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 298486374], ["LIMIT", 1]]
Started GET "/print_pricings/298486374" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "298486374"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 298486374], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="298486374" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:126:in 'block (2 levels) in <class:PrintPricingFlowsTest>'
test/integration/print_pricing_flows_test.rb:125:in 'block in <class:PrintPricingFlowsTest>'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["currency", "JPY"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", "250.0"], ["energy_cost_per_kwh", "35.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["printer_cost", "300000.0"], ["investment_return_years", 3], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 02:55:40.457334"], ["updated_at", "2025-09-08 02:55:40.457334"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 5ms (ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 3.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 4.4ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#new as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 1.4ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.2ms)
Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.2ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "currency" => "EUR", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "power_consumption" => "150", "energy_cost_per_kwh" => "0.15", "vat_percentage" => "21.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["currency", "EUR"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "150.0"], ["energy_cost_per_kwh", "0.15"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.09405625"], ["created_at", "2025-09-08 02:55:40.510907"], ["updated_at", "2025-09-08 02:55:40.510907"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190965
Completed 302 Found in 19ms (ActiveRecord: 0.7ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190965" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190965"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190965], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 2.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 2.8ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190965/edit" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190965"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190965], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 5.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.1ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 6.5ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.0ms)
Started PATCH "/print_pricings/980190965" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190965"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.5ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Flow Test Print"], ["currency", "GBP"], ["updated_at", "2025-09-08 02:55:40.544119"], ["id", 980190965]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190965
Completed 302 Found in 9ms (ActiveRecord: 0.7ms (3 queries, 2 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190965" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190965"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190965], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190965" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190965"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190965]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 4ms (ActiveRecord: 0.4ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:40 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 02:55:57.510209', '2025-09-08 02:55:57.510209'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 02:55:57.510209', '2025-09-08 02:55:57.510209');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$TZg0oFdpMwaCbdxjhq65cejqAXzE4KhpkrCmccPOdVPUVfe2vvB6S', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:55:57.521278', '2025-09-08 02:55:57.521278'), (298486374, 'user2@example.com', '$2a$04$o0Uozp/lTitpOd3H7PHZF.PfGOvziZaaOp1NMpYD5SO49UXsP4sRy', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:55:57.521278', '2025-09-08 02:55:57.521278')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 6.5ms | GC: 0.9ms)
  Rendered layout layouts/application.html.erb (Duration: 10.1ms | GC: 1.5ms)
Completed 200 OK in 24ms (Views: 10.4ms | ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 8.8ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 3.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.7ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.0ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "currency" => "EUR", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "power_consumption" => "150", "energy_cost_per_kwh" => "0.15", "vat_percentage" => "21.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.8ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["currency", "EUR"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "150.0"], ["energy_cost_per_kwh", "0.15"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.09405625"], ["created_at", "2025-09-08 02:55:57.634083"], ["updated_at", "2025-09-08 02:55:57.634083"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 5ms (ActiveRecord: 0.9ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 3.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.7ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 3.8ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190963/edit" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 2.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.0ms)
Started PATCH "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190963"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.3ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Flow Test Print"], ["currency", "GBP"], ["updated_at", "2025-09-08 02:55:57.653634"], ["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 2ms (ActiveRecord: 0.4ms (3 queries, 2 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 2.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.2ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 3.3ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.4ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 6ms (ActiveRecord: 0.6ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 4.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.7ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 4.8ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#new as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by Devise::RegistrationsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 3.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.4ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/users" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:55:57.712232"], ["updated_at", "2025-09-08 02:55:57.712232"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 303 See Other in 10ms (ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190963], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.1ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (1.1ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Integration Test Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.621"], ["created_at", "2025-09-08 02:55:57.731069"], ["updated_at", "2025-09-08 02:55:57.731069"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 9ms (ActiveRecord: 1.2ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190963], ["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.6ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 298486374], ["LIMIT", 1]]
Started GET "/print_pricings/298486374" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "298486374"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 298486374], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="298486374" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:125:in 'block in <class:PrintPricingFlowsTest>'
Started GET "/print_pricings/298486374/edit" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "298486374"}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["currency", "JPY"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", "250.0"], ["energy_cost_per_kwh", "35.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["printer_cost", "300000.0"], ["investment_return_years", 3], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 02:55:57.919691"], ["updated_at", "2025-09-08 02:55:57.919691"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190965
Completed 302 Found in 5ms (ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190965" for 127.0.0.1 at 2025-09-08 11:55:57 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190965"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190965], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 3.8ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 4.3ms | GC: 0.4ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.4ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 02:56:10.887520', '2025-09-08 02:56:10.887520'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 02:56:10.887520', '2025-09-08 02:56:10.887520');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$CLZywlyBcB2yVA5VTSTgoeZHB3Ui2x2KVWGCW6ii0Qv8xXqQESy1i', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:56:10.899196', '2025-09-08 02:56:10.899196'), (298486374, 'user2@example.com', '$2a$04$IZqVeMFxlwDwJwX0r57Gq.cb91swPIzu.H7JRowtPF/vpqHHyAnGm', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:56:10.899196', '2025-09-08 02:56:10.899196')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:10 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 7ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 3.8ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:56:10 +0900
Processing by PrintPricingsController#new as HTML
Completed 401 Unauthorized in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.1ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:10 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-08 11:56:10 +0900
Processing by Devise::RegistrationsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 2.2ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | GC: 0.6ms)
Completed 200 OK in 9ms (Views: 8.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.7ms)
Started POST "/users" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:11.008801"], ["updated_at", "2025-09-08 02:56:11.008801"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 303 See Other in 4ms (ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.1ms)
Started GET "/" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190963], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 2.8ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 2.2ms | ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Integration Test Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.621"], ["created_at", "2025-09-08 02:56:11.027924"], ["updated_at", "2025-09-08 02:56:11.027924"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 7ms (ActiveRecord: 0.8ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190963], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 4.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 4.7ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 2.1ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "currency" => "EUR", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "power_consumption" => "150", "energy_cost_per_kwh" => "0.15", "vat_percentage" => "21.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["currency", "EUR"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "150.0"], ["energy_cost_per_kwh", "0.15"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.09405625"], ["created_at", "2025-09-08 02:56:11.064683"], ["updated_at", "2025-09-08 02:56:11.064683"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 15ms (ActiveRecord: 0.5ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190964/edit" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.0ms)
Started PATCH "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190964"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.5ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Flow Test Print"], ["currency", "GBP"], ["updated_at", "2025-09-08 02:56:11.091550"], ["id", 980190964]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 10ms (ActiveRecord: 0.6ms (3 queries, 2 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 2.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.4ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190964]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 3ms (ActiveRecord: 0.3ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 1.4ms | ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["currency", "JPY"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", "250.0"], ["energy_cost_per_kwh", "35.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["printer_cost", "300000.0"], ["investment_return_years", 3], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 02:56:11.118507"], ["updated_at", "2025-09-08 02:56:11.118507"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190965
Completed 302 Found in 5ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190965" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190965"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190965], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 3.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.4ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 3.5ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:11.138302"], ["updated_at", "2025-09-08 02:56:11.138302"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 02:56:11.140970"], ["updated_at", "2025-09-08 02:56:11.140970"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190966" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190966"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190966], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190966" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:137:in 'block in <class:PrintPricingFlowsTest>'
Started GET "/print_pricings/980190966/edit" for 127.0.0.1 at 2025-09-08 11:56:11 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190966"}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (2.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 02:56:53.491997', '2025-09-08 02:56:53.491997'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 02:56:53.491997', '2025-09-08 02:56:53.491997');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$8wCZa18cfKIjwbc9SSWC0O6o6ur1UhEkuIrsqg6CX5GsmG5wqGpwq', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:56:53.511916', '2025-09-08 02:56:53.511916'), (298486374, 'user2@example.com', '$2a$04$5il5Fums0KIcoJcanBl2VOZo9/LZV0JlCcoLMIgvCM6iwr7CALRte', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 02:56:53.511916', '2025-09-08 02:56:53.511916')[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.9ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 4.9ms | ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 11.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.2ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 13ms (Views: 12.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 3.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.0ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 2ms (ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.4ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "final_price" = $3, "updated_at" = $4 WHERE "print_pricings"."id" = $5[0m  [["job_name", "Updated Job Name"], ["currency", "GBP"], ["final_price", "1.716"], ["updated_at", "2025-09-08 02:56:53.639788"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 25ms (ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 6ms (Views: 3.7ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.682725"], ["updated_at", "2025-09-08 02:56:53.682725"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 02:56:53.687821"], ["updated_at", "2025-09-08 02:56:53.687821"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:116:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["currency", "EUR"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 02:56:53.878159"], ["updated_at", "2025-09-08 02:56:53.878159"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 7ms (ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.904937"], ["updated_at", "2025-09-08 02:56:53.904937"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.5"], ["created_at", "2025-09-08 02:56:53.906155"], ["updated_at", "2025-09-08 02:56:53.906155"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190964]]
  [1m[36mPrintPricing Destroy (0.1ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190965]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190964]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.920347"], ["updated_at", "2025-09-08 02:56:53.920347"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.923918"], ["updated_at", "2025-09-08 02:56:53.923918"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.926086"], ["updated_at", "2025-09-08 02:56:53.926086"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.929713"], ["updated_at", "2025-09-08 02:56:53.929713"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.932956"], ["updated_at", "2025-09-08 02:56:53.932956"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.936707"], ["updated_at", "2025-09-08 02:56:53.936707"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.938548"], ["updated_at", "2025-09-08 02:56:53.938548"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.941558"], ["updated_at", "2025-09-08 02:56:53.941558"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.950199"], ["updated_at", "2025-09-08 02:56:53.950199"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.952570"], ["updated_at", "2025-09-08 02:56:53.952570"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.954293"], ["updated_at", "2025-09-08 02:56:53.954293"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.956540"], ["updated_at", "2025-09-08 02:56:53.956540"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190976], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "200.0"], ["energy_cost_per_kwh", "0.12"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.716"], ["created_at", "2025-09-08 02:56:53.957051"], ["updated_at", "2025-09-08 02:56:53.957051"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.959260"], ["updated_at", "2025-09-08 02:56:53.959260"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:53.961946"], ["updated_at", "2025-09-08 02:56:53.961946"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#new as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["currency", "JPY"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", "250.0"], ["energy_cost_per_kwh", "35.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["printer_cost", "300000.0"], ["investment_return_years", 3], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 02:56:53.991336"], ["updated_at", "2025-09-08 02:56:53.991336"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190967
Completed 302 Found in 4ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190967" for 127.0.0.1 at 2025-09-08 11:56:53 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190967"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190967], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 3.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 4.0ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:54.004732"], ["updated_at", "2025-09-08 02:56:54.004732"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190979], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 02:56:54.005457"], ["updated_at", "2025-09-08 02:56:54.005457"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190968" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190968"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190968], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190968" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:137:in 'block in <class:PrintPricingFlowsTest>'
Started GET "/print_pricings/980190968/edit" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190968"}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by Devise::RegistrationsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.5ms | GC: 0.1ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 1.1ms | GC: 0.2ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 4.3ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | GC: 0.9ms)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.1ms)
Started POST "/users" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 02:56:54.172901"], ["updated_at", "2025-09-08 02:56:54.172901"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 303 See Other in 7ms (ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.8ms)
Started GET "/" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190980], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190980], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | GC: 0.2ms)
Completed 200 OK in 3ms (Views: 1.3ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.4ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190980], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 1.1ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | GC: 0.6ms)
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.8ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190980], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190980], ["job_name", "Integration Test Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.621"], ["created_at", "2025-09-08 02:56:54.193291"], ["updated_at", "2025-09-08 02:56:54.193291"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190969
Completed 302 Found in 3ms (ActiveRecord: 0.5ms (2 queries, 1 cached) | GC: 0.7ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190969" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190969"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190980], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190980], ["id", 980190969], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.6ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 5.2ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 5.8ms | GC: 0.2ms)
Completed 200 OK in 7ms (Views: 5.5ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.2ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 4.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "currency" => "EUR", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "power_consumption" => "150", "energy_cost_per_kwh" => "0.15", "vat_percentage" => "21.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["currency", "EUR"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "150.0"], ["energy_cost_per_kwh", "0.15"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.09405625"], ["created_at", "2025-09-08 02:56:54.225716"], ["updated_at", "2025-09-08 02:56:54.225716"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190970
Completed 302 Found in 2ms (ActiveRecord: 0.5ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190970" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190970"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190970], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190970/edit" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190970"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190970], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 3.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.9ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.0ms)
Started PATCH "/print_pricings/980190970" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190970"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190970], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.4ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Flow Test Print"], ["currency", "GBP"], ["updated_at", "2025-09-08 02:56:54.239698"], ["id", 980190970]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190970
Completed 302 Found in 3ms (ActiveRecord: 0.5ms (3 queries, 2 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190970" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190970"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190970], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.1ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190970" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190970"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190970], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190970]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 2ms (ActiveRecord: 0.3ms (3 queries, 2 cached) | GC: 0.3ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 11:56:54 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.1ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 0.9ms | ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (2.2ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 03:12:14.002658', '2025-09-08 03:12:14.002658'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 03:12:14.002658', '2025-09-08 03:12:14.002658');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$E0fjDiLNccf6WUPpt/nQY.CPsXbVxOKirGUXe4hnwfCPZGJl4PDCC', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 03:12:14.017584', '2025-09-08 03:12:14.017584'), (298486374, 'user2@example.com', '$2a$04$yFHVSN.N4ffeh16AVwiGL..uOMyYtO5saCdaC303ylUYpuRXRAFtu', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 03:12:14.017584', '2025-09-08 03:12:14.017584')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.059519"], ["updated_at", "2025-09-08 03:12:14.059519"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.065815"], ["updated_at", "2025-09-08 03:12:14.065815"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.067652"], ["updated_at", "2025-09-08 03:12:14.067652"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.070269"], ["updated_at", "2025-09-08 03:12:14.070269"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.072339"], ["updated_at", "2025-09-08 03:12:14.072339"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190967], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "200.0"], ["energy_cost_per_kwh", "0.12"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.716"], ["created_at", "2025-09-08 03:12:14.073414"], ["updated_at", "2025-09-08 03:12:14.073414"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.078046"], ["updated_at", "2025-09-08 03:12:14.078046"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.082643"], ["updated_at", "2025-09-08 03:12:14.082643"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.089400"], ["updated_at", "2025-09-08 03:12:14.089400"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.092321"], ["updated_at", "2025-09-08 03:12:14.092321"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.094778"], ["updated_at", "2025-09-08 03:12:14.094778"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.099518"], ["updated_at", "2025-09-08 03:12:14.099518"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.104126"], ["updated_at", "2025-09-08 03:12:14.104126"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.110350"], ["updated_at", "2025-09-08 03:12:14.110350"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.112660"], ["updated_at", "2025-09-08 03:12:14.112660"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 11.3ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 11.7ms | GC: 0.4ms)
Completed 500 Internal Server Error in 25ms (ActiveRecord: 1.3ms (3 queries, 0 cached) | GC: 7.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.200142"], ["updated_at", "2025-09-08 03:12:14.200142"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190977], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 03:12:14.202819"], ["updated_at", "2025-09-08 03:12:14.202819"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190964" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:137:in 'block in <class:PrintPricingFlowsTest>'
Started GET "/print_pricings/980190964/edit" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190964"}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#new as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["currency", "JPY"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", "250.0"], ["energy_cost_per_kwh", "35.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["printer_cost", "300000.0"], ["investment_return_years", 3], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 03:12:14.384889"], ["updated_at", "2025-09-08 03:12:14.384889"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190965
Completed 302 Found in 11ms (ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190965" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190965"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190965], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 5.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 9.1ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by Devise::RegistrationsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 4.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.2ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/users" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.420268"], ["updated_at", "2025-09-08 03:12:14.420268"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 303 See Other in 6ms (ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190978], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190978], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190978], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 2.5ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 3.1ms | GC: 0.5ms)
Completed 200 OK in 5ms (Views: 3.2ms | ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.5ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190978], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190978], ["job_name", "Integration Test Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.621"], ["created_at", "2025-09-08 03:12:14.435743"], ["updated_at", "2025-09-08 03:12:14.435743"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190966
Completed 302 Found in 4ms (ActiveRecord: 0.5ms (2 queries, 1 cached) | GC: 0.2ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190966" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190966"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190978], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190978], ["id", 980190966], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 2.6ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.4ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.4ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.447692"], ["updated_at", "2025-09-08 03:12:14.447692"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190979], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 03:12:14.448464"], ["updated_at", "2025-09-08 03:12:14.448464"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190967" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190967"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190967], ["LIMIT", 1]]
Completed 404 Not Found in 0ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190967" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:116:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["currency", "EUR"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 03:12:14.630146"], ["updated_at", "2025-09-08 03:12:14.630146"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190968
Completed 302 Found in 2ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 4.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.0ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 8ms (Views: 5.2ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 1.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | GC: 0.0ms)
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 6ms (Views: 3.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.3ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "final_price" = $3, "updated_at" = $4 WHERE "print_pricings"."id" = $5[0m  [["job_name", "Updated Job Name"], ["currency", "GBP"], ["final_price", "1.716"], ["updated_at", "2025-09-08 03:12:14.667230"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 5ms (ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:12:14 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 2ms (ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:12:14.696690"], ["updated_at", "2025-09-08 03:12:14.696690"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190980], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.5"], ["created_at", "2025-09-08 03:12:14.698137"], ["updated_at", "2025-09-08 03:12:14.698137"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190980]]
  [1m[36mPrintPricing Destroy (0.1ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190969]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190980]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 03:13:22.264156', '2025-09-08 03:13:22.264156'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 03:13:22.264156', '2025-09-08 03:13:22.264156');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$W1WnNraOAe.oiAW3vz8Hi.aGGq5d9I5SrBQ2I/yM4AOfug22VGfwe', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 03:13:22.276564', '2025-09-08 03:13:22.276564'), (298486374, 'user2@example.com', '$2a$04$BYvywicZeW2MGztAw8/mpuVVFiyNHjtnH/Z1dBenuN9HsJWk7RxwW', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 03:13:22.276564', '2025-09-08 03:13:22.276564')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.301029"], ["updated_at", "2025-09-08 03:13:22.301029"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.308074"], ["updated_at", "2025-09-08 03:13:22.308074"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.312316"], ["updated_at", "2025-09-08 03:13:22.312316"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.315474"], ["updated_at", "2025-09-08 03:13:22.315474"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.321403"], ["updated_at", "2025-09-08 03:13:22.321403"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.324325"], ["updated_at", "2025-09-08 03:13:22.324325"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.327942"], ["updated_at", "2025-09-08 03:13:22.327942"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.336084"], ["updated_at", "2025-09-08 03:13:22.336084"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.340576"], ["updated_at", "2025-09-08 03:13:22.340576"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.344215"], ["updated_at", "2025-09-08 03:13:22.344215"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.346716"], ["updated_at", "2025-09-08 03:13:22.346716"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.351165"], ["updated_at", "2025-09-08 03:13:22.351165"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.359727"], ["updated_at", "2025-09-08 03:13:22.359727"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.365321"], ["updated_at", "2025-09-08 03:13:22.365321"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190976], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "200.0"], ["energy_cost_per_kwh", "0.12"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.716"], ["created_at", "2025-09-08 03:13:22.368361"], ["updated_at", "2025-09-08 03:13:22.368361"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["currency", "EUR"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 03:13:22.428758"], ["updated_at", "2025-09-08 03:13:22.428758"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 15ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 3.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.8ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 8.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 8.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 12ms (Views: 9.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE PrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 4ms (ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.495805"], ["updated_at", "2025-09-08 03:13:22.495805"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190977], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 03:13:22.497201"], ["updated_at", "2025-09-08 03:13:22.497201"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190965" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190965"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190965], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190965" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:116:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.4ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "final_price" = $3, "updated_at" = $4 WHERE "print_pricings"."id" = $5[0m  [["job_name", "Updated Job Name"], ["currency", "GBP"], ["final_price", "1.716"], ["updated_at", "2025-09-08 03:13:22.688507"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 6ms (ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 2.0ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.2ms)
Completed 200 OK in 3ms (Views: 1.4ms | ActiveRecord: 1.1ms (3 queries, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.3ms)
Completed 422 Unprocessable Content in 5ms (Views: 2.7ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.3ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 2.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.721813"], ["updated_at", "2025-09-08 03:13:22.721813"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190978], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.5"], ["created_at", "2025-09-08 03:13:22.723255"], ["updated_at", "2025-09-08 03:13:22.723255"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190978]]
  [1m[36mPrintPricing Destroy (0.1ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190966]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190978]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 2.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.753743"], ["updated_at", "2025-09-08 03:13:22.753743"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190979], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 03:13:22.754629"], ["updated_at", "2025-09-08 03:13:22.754629"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190967" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190967"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190967], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190967" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:137:in 'block in <class:PrintPricingFlowsTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["currency", "JPY"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", "250.0"], ["energy_cost_per_kwh", "35.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["printer_cost", "300000.0"], ["investment_return_years", 3], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 03:13:22.913414"], ["updated_at", "2025-09-08 03:13:22.913414"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190968
Completed 302 Found in 3ms (ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.5ms)
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190968" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190968"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190968], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 2.8ms | GC: 0.9ms)
  Rendered layout layouts/application.html.erb (Duration: 3.2ms | GC: 1.0ms)
Completed 200 OK in 7ms (Views: 3.3ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 2.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by Devise::RegistrationsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 1.1ms | GC: 0.2ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 4.6ms | GC: 1.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | GC: 1.2ms)
Completed 200 OK in 7ms (Views: 6.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.3ms)
Started POST "/users" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:22.941487"], ["updated_at", "2025-09-08 03:13:22.941487"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 303 See Other in 7ms (ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.4ms)
Started GET "/" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190980], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190980], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.7ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.2ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190980], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 0.9ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 1.2ms | GC: 0.3ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.5ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190980], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190980], ["job_name", "Integration Test Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.621"], ["created_at", "2025-09-08 03:13:22.963338"], ["updated_at", "2025-09-08 03:13:22.963338"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190969
Completed 302 Found in 4ms (ActiveRecord: 0.7ms (2 queries, 1 cached) | GC: 0.4ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190969" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190969"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190980], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190980], ["id", 980190969], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.6ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#new as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:22 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 03:13:45.223956', '2025-09-08 03:13:45.223956'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 03:13:45.223956', '2025-09-08 03:13:45.223956');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$kwxvi4eCLvQQiO1Bg.QoUuxSJG2rJb3a/7Rq/q/ajy3BAizpBY6KC', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 03:13:45.236536', '2025-09-08 03:13:45.236536'), (298486374, 'user2@example.com', '$2a$04$nlbWx4oWT7H2c4cPgTuVpOrI.qRjRdE02bmP6l977DPSFf3e86efO', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 03:13:45.236536', '2025-09-08 03:13:45.236536')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.260830"], ["updated_at", "2025-09-08 03:13:45.260830"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.268201"], ["updated_at", "2025-09-08 03:13:45.268201"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.270692"], ["updated_at", "2025-09-08 03:13:45.270692"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.274335"], ["updated_at", "2025-09-08 03:13:45.274335"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.279993"], ["updated_at", "2025-09-08 03:13:45.279993"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.283022"], ["updated_at", "2025-09-08 03:13:45.283022"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.287327"], ["updated_at", "2025-09-08 03:13:45.287327"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.294881"], ["updated_at", "2025-09-08 03:13:45.294881"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.299451"], ["updated_at", "2025-09-08 03:13:45.299451"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.302325"], ["updated_at", "2025-09-08 03:13:45.302325"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.304072"], ["updated_at", "2025-09-08 03:13:45.304072"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.308457"], ["updated_at", "2025-09-08 03:13:45.308457"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.317423"], ["updated_at", "2025-09-08 03:13:45.317423"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.323297"], ["updated_at", "2025-09-08 03:13:45.323297"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190976], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "200.0"], ["energy_cost_per_kwh", "0.12"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.716"], ["created_at", "2025-09-08 03:13:45.326156"], ["updated_at", "2025-09-08 03:13:45.326156"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 4.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.5ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 21ms (Views: 10.9ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 6.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 7.3ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 2.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 1.0ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 6.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.6ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 9ms (Views: 6.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE PrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.3ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "final_price" = $3, "updated_at" = $4 WHERE "print_pricings"."id" = $5[0m  [["job_name", "Updated Job Name"], ["currency", "GBP"], ["final_price", "1.716"], ["updated_at", "2025-09-08 03:13:45.445596"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 13ms (ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["currency", "EUR"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 03:13:45.460283"], ["updated_at", "2025-09-08 03:13:45.460283"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 2ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.9ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.468852"], ["updated_at", "2025-09-08 03:13:45.468852"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190977], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 03:13:45.470214"], ["updated_at", "2025-09-08 03:13:45.470214"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190965" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190965"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190965], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190965" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:116:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 2ms (ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 2.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by Devise::RegistrationsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 1.2ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 7.3ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 8.3ms | GC: 0.2ms)
Completed 200 OK in 10ms (Views: 9.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)
Started POST "/users" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.683694"], ["updated_at", "2025-09-08 03:13:45.683694"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 303 See Other in 5ms (ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.2ms)
Started GET "/" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190978], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190978], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.3ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190978], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.7ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190978], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190978], ["job_name", "Integration Test Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.621"], ["created_at", "2025-09-08 03:13:45.696516"], ["updated_at", "2025-09-08 03:13:45.696516"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190966
Completed 302 Found in 3ms (ActiveRecord: 0.5ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190966" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190966"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190978], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190978], ["id", 980190966], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.3ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 0.6ms | GC: 0.1ms)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.706255"], ["updated_at", "2025-09-08 03:13:45.706255"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190979], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 03:13:45.706821"], ["updated_at", "2025-09-08 03:13:45.706821"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190967" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190967"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190967], ["LIMIT", 1]]
Completed 404 Not Found in 0ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190967" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:137:in 'block in <class:PrintPricingFlowsTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.8ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.8ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.8ms (3 queries, 0 cached) | GC: 1.1ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 3.9ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 4.5ms | GC: 0.7ms)
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.8ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "currency" => "EUR", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "power_consumption" => "150", "energy_cost_per_kwh" => "0.15", "vat_percentage" => "21.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["currency", "EUR"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "150.0"], ["energy_cost_per_kwh", "0.15"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.09405625"], ["created_at", "2025-09-08 03:13:45.873264"], ["updated_at", "2025-09-08 03:13:45.873264"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190968
Completed 302 Found in 4ms (ActiveRecord: 0.6ms (2 queries, 1 cached) | GC: 0.4ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190968" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190968"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190968], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 1.5ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 3.6ms | GC: 0.2ms)
Completed 200 OK in 7ms (Views: 3.7ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.3ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["currency", "JPY"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", "250.0"], ["energy_cost_per_kwh", "35.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["printer_cost", "300000.0"], ["investment_return_years", 3], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 03:13:45.892391"], ["updated_at", "2025-09-08 03:13:45.892391"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190969
Completed 302 Found in 4ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190969" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190969"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190969], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.6ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | GC: 0.2ms)
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#new as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:45 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:45.929029"], ["updated_at", "2025-09-08 03:13:45.929029"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190980], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.5"], ["created_at", "2025-09-08 03:13:45.930668"], ["updated_at", "2025-09-08 03:13:45.930668"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190980]]
  [1m[36mPrintPricing Destroy (0.1ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190970]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190980]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.4ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 03:13:56.294545', '2025-09-08 03:13:56.294545'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 03:13:56.294545', '2025-09-08 03:13:56.294545');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$acFqFmH68vWEROLX7YQOJeM3HxudVW7x6veNBOiXJOHf8ahnbUk32', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 03:13:56.305057', '2025-09-08 03:13:56.305057'), (298486374, 'user2@example.com', '$2a$04$C07IY2u30Y3t/EWdbjqxOeB2HcpQlf3q8rB0s/QXudjBH0NqpxIsq', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 03:13:56.305057', '2025-09-08 03:13:56.305057')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:56.333976"], ["updated_at", "2025-09-08 03:13:56.333976"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.8ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.5"], ["created_at", "2025-09-08 03:13:56.339543"], ["updated_at", "2025-09-08 03:13:56.339543"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#new as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:56.402125"], ["updated_at", "2025-09-08 03:13:56.402125"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 03:13:56.409299"], ["updated_at", "2025-09-08 03:13:56.409299"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190964" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:137:in 'block in <class:PrintPricingFlowsTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by Devise::RegistrationsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 2.4ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 4.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.5ms | GC: 0.8ms)
Completed 200 OK in 10ms (Views: 9.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.1ms)
Started POST "/users" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:56.613683"], ["updated_at", "2025-09-08 03:13:56.613683"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 303 See Other in 5ms (ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190965], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 3.9ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.3ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 2.0ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.1ms)
Completed 200 OK in 8ms (Views: 2.8ms | ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.1ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190965], ["job_name", "Integration Test Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.621"], ["created_at", "2025-09-08 03:13:56.641080"], ["updated_at", "2025-09-08 03:13:56.641080"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190965
Completed 302 Found in 14ms (ActiveRecord: 0.6ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190965" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190965"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190965], ["id", 980190965], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["currency", "JPY"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", "250.0"], ["energy_cost_per_kwh", "35.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["printer_cost", "300000.0"], ["investment_return_years", 3], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 03:13:56.661207"], ["updated_at", "2025-09-08 03:13:56.661207"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190966
Completed 302 Found in 3ms (ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190966" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190966"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190966], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 4.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.3ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 5.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.4ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 0.9ms (3 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 1.9ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "currency" => "EUR", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "power_consumption" => "150", "energy_cost_per_kwh" => "0.15", "vat_percentage" => "21.0"}}
  [1m[36mCACHE User Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["currency", "EUR"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "150.0"], ["energy_cost_per_kwh", "0.15"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.09405625"], ["created_at", "2025-09-08 03:13:56.688764"], ["updated_at", "2025-09-08 03:13:56.688764"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190967
Completed 302 Found in 4ms (ActiveRecord: 0.5ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190967" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190967"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190967], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.4ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190967/edit" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190967"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190967], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 4.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.0ms)
Started PATCH "/print_pricings/980190967" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190967"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190967], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.6ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Flow Test Print"], ["currency", "GBP"], ["updated_at", "2025-09-08 03:13:56.705302"], ["id", 980190967]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190967
Completed 302 Found in 8ms (ActiveRecord: 0.8ms (3 queries, 2 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190967" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190967"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190967], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.6ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190967" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190967"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190967], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190967]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 2ms (ActiveRecord: 0.3ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.4ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 3.7ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 3.9ms | GC: 0.1ms)
Completed 422 Unprocessable Content in 6ms (Views: 5.0ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:56.738216"], ["updated_at", "2025-09-08 03:13:56.738216"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190966], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 03:13:56.741276"], ["updated_at", "2025-09-08 03:13:56.741276"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190968" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190968"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190968], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190968" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:116:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 6.6ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 7.1ms | GC: 0.4ms)
Completed 422 Unprocessable Content in 11ms (Views: 7.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.4ms)
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.3ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "final_price" = $3, "updated_at" = $4 WHERE "print_pricings"."id" = $5[0m  [["job_name", "Updated Job Name"], ["currency", "GBP"], ["final_price", "1.716"], ["updated_at", "2025-09-08 03:13:56.921956"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 2ms (ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 3.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.7ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.4ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 3.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 1ms (ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:13:56 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["currency", "EUR"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 03:13:56.963400"], ["updated_at", "2025-09-08 03:13:56.963400"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190969
Completed 302 Found in 3ms (ActiveRecord: 1.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:56.971137"], ["updated_at", "2025-09-08 03:13:56.971137"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (3.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:56.975118"], ["updated_at", "2025-09-08 03:13:56.975118"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:56.985298"], ["updated_at", "2025-09-08 03:13:56.985298"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:56.988480"], ["updated_at", "2025-09-08 03:13:56.988480"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:56.990599"], ["updated_at", "2025-09-08 03:13:56.990599"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:56.992908"], ["updated_at", "2025-09-08 03:13:56.992908"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:56.994908"], ["updated_at", "2025-09-08 03:13:56.994908"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:56.997600"], ["updated_at", "2025-09-08 03:13:56.997600"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:56.999106"], ["updated_at", "2025-09-08 03:13:56.999106"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:57.008950"], ["updated_at", "2025-09-08 03:13:57.008950"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:57.012298"], ["updated_at", "2025-09-08 03:13:57.012298"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.2ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190977], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "200.0"], ["energy_cost_per_kwh", "0.12"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.716"], ["created_at", "2025-09-08 03:13:57.013231"], ["updated_at", "2025-09-08 03:13:57.013231"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:57.017424"], ["updated_at", "2025-09-08 03:13:57.017424"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:57.019655"], ["updated_at", "2025-09-08 03:13:57.019655"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:13:57.021549"], ["updated_at", "2025-09-08 03:13:57.021549"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 03:28:24.481614', '2025-09-08 03:28:24.481614'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 03:28:24.481614', '2025-09-08 03:28:24.481614');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$7uzyGhmbR9cTBv7lkZ6yOOVp4IRGgFxWDDjdURdfwqjzSgTVUbPFS', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 03:28:24.495471', '2025-09-08 03:28:24.495471'), (298486374, 'user2@example.com', '$2a$04$FUfJw0wnkYua8VZ/O3PMTuZvm2OPWsHfLl4//xYCkPZBRN/7XdwGy', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 03:28:24.495471', '2025-09-08 03:28:24.495471')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.538859"], ["updated_at", "2025-09-08 03:28:24.538859"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.545579"], ["updated_at", "2025-09-08 03:28:24.545579"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.547412"], ["updated_at", "2025-09-08 03:28:24.547412"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.549615"], ["updated_at", "2025-09-08 03:28:24.549615"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.551811"], ["updated_at", "2025-09-08 03:28:24.551811"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.555305"], ["updated_at", "2025-09-08 03:28:24.555305"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190968], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "200.0"], ["energy_cost_per_kwh", "0.12"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.716"], ["created_at", "2025-09-08 03:28:24.556485"], ["updated_at", "2025-09-08 03:28:24.556485"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.563330"], ["updated_at", "2025-09-08 03:28:24.563330"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.570131"], ["updated_at", "2025-09-08 03:28:24.570131"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.573374"], ["updated_at", "2025-09-08 03:28:24.573374"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.576027"], ["updated_at", "2025-09-08 03:28:24.576027"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.579733"], ["updated_at", "2025-09-08 03:28:24.579733"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.584274"], ["updated_at", "2025-09-08 03:28:24.584274"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.586543"], ["updated_at", "2025-09-08 03:28:24.586543"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.593334"], ["updated_at", "2025-09-08 03:28:24.593334"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.633646"], ["updated_at", "2025-09-08 03:28:24.633646"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190977], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 03:28:24.636255"], ["updated_at", "2025-09-08 03:28:24.636255"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 12:28:24 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
Completed 404 Not Found in 13ms (ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 7.2ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190964" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:137:in 'block in <class:PrintPricingFlowsTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:28:24 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["currency", "JPY"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", "250.0"], ["energy_cost_per_kwh", "35.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["printer_cost", "300000.0"], ["investment_return_years", 3], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 03:28:24.837186"], ["updated_at", "2025-09-08 03:28:24.837186"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190965
Completed 302 Found in 11ms (ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.2ms)
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190965" for 127.0.0.1 at 2025-09-08 12:28:24 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190965"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190965], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 6.0ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 10.1ms | GC: 0.8ms)
Completed 200 OK in 15ms (Views: 11.1ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 1.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2025-09-08 12:28:24 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 2.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.7ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 1.0ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:28:24 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:28:24 +0900
Processing by PrintPricingsController#new as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:28:24 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-08 12:28:24 +0900
Processing by Devise::RegistrationsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 0.7ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 4.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 5.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/users" for 127.0.0.1 at 2025-09-08 12:28:24 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.887543"], ["updated_at", "2025-09-08 03:28:24.887543"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 303 See Other in 6ms (ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-09-08 12:28:24 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190978], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190978], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.9ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:28:24 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190978], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 3.9ms | GC: 1.9ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 1.9ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 1.9ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:28:24 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190978], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190978], ["job_name", "Integration Test Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.621"], ["created_at", "2025-09-08 03:28:24.903259"], ["updated_at", "2025-09-08 03:28:24.903259"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190966
Completed 302 Found in 4ms (ActiveRecord: 0.7ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190966" for 127.0.0.1 at 2025-09-08 12:28:24 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190966"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190978], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190978], ["id", 980190966], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 1.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.915882"], ["updated_at", "2025-09-08 03:28:24.915882"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190979], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.5"], ["created_at", "2025-09-08 03:28:24.916710"], ["updated_at", "2025-09-08 03:28:24.916710"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190979]]
  [1m[36mPrintPricing Destroy (0.1ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190967]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190979]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:28:24.931166"], ["updated_at", "2025-09-08 03:28:24.931166"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190980], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 03:28:24.931842"], ["updated_at", "2025-09-08 03:28:24.931842"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190968" for 127.0.0.1 at 2025-09-08 12:28:24 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190968"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190968], ["LIMIT", 1]]
Completed 404 Not Found in 0ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190968" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:116:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:28:25 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.1ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:28:25 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 2ms (ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:28:25 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["currency", "EUR"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 03:28:25.124403"], ["updated_at", "2025-09-08 03:28:25.124403"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190969
Completed 302 Found in 3ms (ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:28:25 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 12:28:25 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 2.1ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:28:25 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 4.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.7ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 6ms (Views: 4.9ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:28:25 +0900
Processing by PrintPricingsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.9ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:28:25 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.3ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "final_price" = $3, "updated_at" = $4 WHERE "print_pricings"."id" = $5[0m  [["job_name", "Updated Job Name"], ["currency", "GBP"], ["final_price", "1.716"], ["updated_at", "2025-09-08 03:28:25.161462"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:28:25 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.7ms | ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:28:25 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 3.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 6ms (Views: 4.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 03:29:10.973526', '2025-09-08 03:29:10.973526'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 03:29:10.973526', '2025-09-08 03:29:10.973526');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES (980190962, 'user1@example.com', '$2a$04$pkLmeuhkVPjFlV1yzemZG.WGNE5RLtBeW82aSeAR0ogxuiHmmgvkW', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 03:29:10.985573', '2025-09-08 03:29:10.985573'), (298486374, 'user2@example.com', '$2a$04$MY3qIjNpIJR4BkwFXtVZhOwte.ZrmYpgdh.ob2qkMN4MfHV0Kx0Am', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 03:29:10.985573', '2025-09-08 03:29:10.985573')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (1.0ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["currency", "JPY"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", "250.0"], ["energy_cost_per_kwh", "35.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["printer_cost", "300000.0"], ["investment_return_years", 3], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 03:29:11.054319"], ["updated_at", "2025-09-08 03:29:11.054319"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 10ms (ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 4.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.0ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 8.9ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#new as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.083568"], ["updated_at", "2025-09-08 03:29:11.083568"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 03:29:11.086969"], ["updated_at", "2025-09-08 03:29:11.086969"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190964" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:137:in 'block in <class:PrintPricingFlowsTest>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by Devise::RegistrationsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 1.0ms | GC: 0.4ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 2.4ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | GC: 0.4ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.4ms)
Started POST "/users" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.278775"], ["updated_at", "2025-09-08 03:29:11.278775"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 303 See Other in 10ms (ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190964], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 2.2ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | GC: 0.3ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.3ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Integration Test Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.621"], ["created_at", "2025-09-08 03:29:11.311175"], ["updated_at", "2025-09-08 03:29:11.311175"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190965
Completed 302 Found in 16ms (ActiveRecord: 0.8ms (2 queries, 1 cached) | GC: 0.3ms)
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190965" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190965"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190964], ["id", 980190965], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.9ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 1.0ms (3 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "currency" => "EUR", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "power_consumption" => "150", "energy_cost_per_kwh" => "0.15", "vat_percentage" => "21.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["currency", "EUR"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "150.0"], ["energy_cost_per_kwh", "0.15"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.09405625"], ["created_at", "2025-09-08 03:29:11.343740"], ["updated_at", "2025-09-08 03:29:11.343740"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190966
Completed 302 Found in 6ms (ActiveRecord: 0.5ms (2 queries, 1 cached) | GC: 0.4ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190966" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190966"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190966], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 2.3ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.1ms)
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.1ms)
Started GET "/print_pricings/980190966/edit" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190966"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190966], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 5.6ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | GC: 0.2ms)
Completed 200 OK in 8ms (Views: 6.5ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.2ms)
Started PATCH "/print_pricings/980190966" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190966"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190966], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.4ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Flow Test Print"], ["currency", "GBP"], ["updated_at", "2025-09-08 03:29:11.364587"], ["id", 980190966]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190966
Completed 302 Found in 10ms (ActiveRecord: 0.6ms (3 queries, 2 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190966" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190966"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190966], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.5ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 0.9ms | GC: 0.4ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.4ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190966" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190966"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190966], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190966]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 2ms (ActiveRecord: 0.3ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 3.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.4ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.388688"], ["updated_at", "2025-09-08 03:29:11.388688"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.392168"], ["updated_at", "2025-09-08 03:29:11.392168"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.395725"], ["updated_at", "2025-09-08 03:29:11.395725"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.397664"], ["updated_at", "2025-09-08 03:29:11.397664"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.400276"], ["updated_at", "2025-09-08 03:29:11.400276"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.403619"], ["updated_at", "2025-09-08 03:29:11.403619"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.407881"], ["updated_at", "2025-09-08 03:29:11.407881"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.413389"], ["updated_at", "2025-09-08 03:29:11.413389"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.415052"], ["updated_at", "2025-09-08 03:29:11.415052"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190973], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "200.0"], ["energy_cost_per_kwh", "0.12"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.716"], ["created_at", "2025-09-08 03:29:11.417848"], ["updated_at", "2025-09-08 03:29:11.417848"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.420464"], ["updated_at", "2025-09-08 03:29:11.420464"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.422814"], ["updated_at", "2025-09-08 03:29:11.422814"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.427093"], ["updated_at", "2025-09-08 03:29:11.427093"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.430010"], ["updated_at", "2025-09-08 03:29:11.430010"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.431978"], ["updated_at", "2025-09-08 03:29:11.431978"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 3.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 8ms (Views: 5.3ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 2.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 4.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 9ms (Views: 4.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE PrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.3ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "final_price" = $3, "updated_at" = $4 WHERE "print_pricings"."id" = $5[0m  [["job_name", "Updated Job Name"], ["currency", "GBP"], ["final_price", "1.716"], ["updated_at", "2025-09-08 03:29:11.477397"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 3ms (ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 1ms (ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.4ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.2ms)
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.2ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 3.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.4ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.3ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.501120"], ["updated_at", "2025-09-08 03:29:11.501120"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190979], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 03:29:11.502399"], ["updated_at", "2025-09-08 03:29:11.502399"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190968" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190968"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190968], ["LIMIT", 1]]
Completed 404 Not Found in 0ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190968" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:116:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 12:29:11 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["currency", "EUR"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 03:29:11.655123"], ["updated_at", "2025-09-08 03:29:11.655123"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190969
Completed 302 Found in 2ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.5ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 03:29:11.671609"], ["updated_at", "2025-09-08 03:29:11.671609"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190980], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.5"], ["created_at", "2025-09-08 03:29:11.673815"], ["updated_at", "2025-09-08 03:29:11.673815"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190980]]
  [1m[36mPrintPricing Destroy (0.1ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190970]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190980]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (50.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test"[0m
  [1m[35m (53.9ms)[0m  [1m[35mCREATE DATABASE "print_calc_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "currency" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "power_consumption" decimal, "energy_cost_per_kwh" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "printer_cost" decimal, "investment_return_years" integer, "daily_usage_hours" integer, "repair_cost_percentage" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908041942)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:26:46.351422', '2025-09-08 06:26:46.351423') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '46a7dad45095f09d5ef0f18255fde3262303cff1', '2025-09-08 06:26:46.356268', '2025-09-08 06:26:46.356270') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:26:46.446838', '2025-09-08 06:26:46.446838'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:26:46.446838', '2025-09-08 06:26:46.446838');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:26:46.455286', '2025-09-08 06:26:46.455286'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:26:46.455286', '2025-09-08 06:26:46.455286');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$fasnuoVwuEUBK8VuJfwW8.O01UhbN2Y39ZMd7XmWt3ZIkVtFvK2ey', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:26:46.457810', '2025-09-08 06:26:46.457810', DEFAULT, DEFAULT), (298486374, 'user2@example.com', '$2a$04$SFwVrgFLY2.4qsDrUmVU.u4yxa/KWI1gkPHL51vvFmgyDC.3zBWeu', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:26:46.457810', '2025-09-08 06:26:46.457810', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by Devise::RegistrationsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.1ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 2.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 8.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/users" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.538866"], ["updated_at", "2025-09-08 06:26:46.538866"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 303 See Other in 4ms (ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190963], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.2ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 3.4ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 3.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.9ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 3.9ms | ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Integration Test Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.621"], ["created_at", "2025-09-08 06:26:46.563945"], ["updated_at", "2025-09-08 06:26:46.563945"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.0ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190963], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 2.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 3.3ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 7.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.8ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 6.9ms | ActiveRecord: 1.1ms (3 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 2.3ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "currency" => "EUR", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "power_consumption" => "150", "energy_cost_per_kwh" => "0.15", "vat_percentage" => "21.0"}}
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["currency", "EUR"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "150.0"], ["energy_cost_per_kwh", "0.15"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.09405625"], ["created_at", "2025-09-08 06:26:46.595533"], ["updated_at", "2025-09-08 06:26:46.595533"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 10ms (ActiveRecord: 0.9ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.2ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190964/edit" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 2.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.0ms)
Started PATCH "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190964"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.6ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Flow Test Print"], ["currency", "GBP"], ["updated_at", "2025-09-08 06:26:46.628931"], ["id", 980190964]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 13ms (ActiveRecord: 0.7ms (3 queries, 2 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 2.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.5ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190964]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 3ms (ActiveRecord: 0.4ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 5.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.1ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["currency", "JPY"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", "250.0"], ["energy_cost_per_kwh", "35.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["printer_cost", "300000.0"], ["investment_return_years", 3], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 06:26:46.665293"], ["updated_at", "2025-09-08 06:26:46.665293"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190965
Completed 302 Found in 6ms (ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190965" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190965"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190965], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 2.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 4.8ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#new as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.699220"], ["updated_at", "2025-09-08 06:26:46.699220"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (1.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 06:26:46.702122"], ["updated_at", "2025-09-08 06:26:46.702122"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190966" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190966"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190966], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190966" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:137:in 'block in <class:PrintPricingFlowsTest>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.892096"], ["updated_at", "2025-09-08 06:26:46.892096"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190965], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "200.0"], ["energy_cost_per_kwh", "0.12"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.716"], ["created_at", "2025-09-08 06:26:46.893875"], ["updated_at", "2025-09-08 06:26:46.893875"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.897038"], ["updated_at", "2025-09-08 06:26:46.897038"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.900017"], ["updated_at", "2025-09-08 06:26:46.900017"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.902114"], ["updated_at", "2025-09-08 06:26:46.902114"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.908853"], ["updated_at", "2025-09-08 06:26:46.908853"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.916413"], ["updated_at", "2025-09-08 06:26:46.916413"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.919135"], ["updated_at", "2025-09-08 06:26:46.919135"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.922262"], ["updated_at", "2025-09-08 06:26:46.922262"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.924042"], ["updated_at", "2025-09-08 06:26:46.924042"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.926628"], ["updated_at", "2025-09-08 06:26:46.926628"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.928679"], ["updated_at", "2025-09-08 06:26:46.928679"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.932063"], ["updated_at", "2025-09-08 06:26:46.932063"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.934416"], ["updated_at", "2025-09-08 06:26:46.934416"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.936212"], ["updated_at", "2025-09-08 06:26:46.936212"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 2.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 3.2ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 4.6ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 6.0ms | GC: 0.3ms)
Completed 422 Unprocessable Content in 9ms (Views: 6.1ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.3ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["currency", "EUR"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 06:26:46.972361"], ["updated_at", "2025-09-08 06:26:46.972361"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190968
Completed 302 Found in 2ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:26:46 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.3ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "final_price" = $3, "updated_at" = $4 WHERE "print_pricings"."id" = $5[0m  [["job_name", "Updated Job Name"], ["currency", "GBP"], ["final_price", "1.716"], ["updated_at", "2025-09-08 06:26:46.993868"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:46.999116"], ["updated_at", "2025-09-08 06:26:46.999116"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190979], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 06:26:47.001329"], ["updated_at", "2025-09-08 06:26:47.001329"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190969" for 127.0.0.1 at 2025-09-08 15:26:47 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190969"}
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190969], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190969" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:116:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:26:47 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 0.9ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.3ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.6ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:26:47 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 1ms (ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.3ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:26:47 +0900
Processing by PrintPricingsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 4.0ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 0.4ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.4ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:26:47 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 5.2ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 5.8ms | GC: 0.8ms)
Completed 422 Unprocessable Content in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.8ms)
  [1m[36mCACHE PrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_show
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
UserProfilesControllerTest: test_should_get_update
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_edit
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintersControllerTest: test_should_get_update
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
PrintersControllerTest: test_should_get_destroy
-----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintersControllerTest: test_should_get_create
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PrintersControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintersControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintersControllerTest: test_should_get_show
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PrintersControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:26:47.236731"], ["updated_at", "2025-09-08 06:26:47.236731"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190980], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.5"], ["created_at", "2025-09-08 06:26:47.238351"], ["updated_at", "2025-09-08 06:26:47.238351"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190980]]
  [1m[36mPrintPricing Destroy (0.1ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190970]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190980]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190980]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (508.4ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-1" ENCODING = 'unicode'[0m
  [1m[35m (508.6ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-5" ENCODING = 'unicode'[0m
  [1m[35m (520.8ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-8" ENCODING = 'unicode'[0m
  [1m[35m (522.0ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-7" ENCODING = 'unicode'[0m
  [1m[35m (521.4ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-3" ENCODING = 'unicode'[0m
  [1m[35m (523.6ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-9" ENCODING = 'unicode'[0m
  [1m[35m (523.8ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-6" ENCODING = 'unicode'[0m
  [1m[35m (526.9ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-2" ENCODING = 'unicode'[0m
  [1m[35m (527.1ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-0" ENCODING = 'unicode'[0m
  [1m[35m (529.6ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-4" ENCODING = 'unicode'[0m
  [1m[35mSQL (28.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (28.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (13.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (12.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (12.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (13.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (12.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (11.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35mSQL (11.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (11.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "currency" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "power_consumption" decimal, "energy_cost_per_kwh" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "printer_cost" decimal, "investment_return_years" integer, "daily_usage_hours" integer, "repair_cost_percentage" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "currency" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "power_consumption" decimal, "energy_cost_per_kwh" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "printer_cost" decimal, "investment_return_years" integer, "daily_usage_hours" integer, "repair_cost_percentage" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "currency" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "power_consumption" decimal, "energy_cost_per_kwh" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "printer_cost" decimal, "investment_return_years" integer, "daily_usage_hours" integer, "repair_cost_percentage" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "currency" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "power_consumption" decimal, "energy_cost_per_kwh" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "printer_cost" decimal, "investment_return_years" integer, "daily_usage_hours" integer, "repair_cost_percentage" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "currency" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "power_consumption" decimal, "energy_cost_per_kwh" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "printer_cost" decimal, "investment_return_years" integer, "daily_usage_hours" integer, "repair_cost_percentage" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "currency" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "power_consumption" decimal, "energy_cost_per_kwh" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "printer_cost" decimal, "investment_return_years" integer, "daily_usage_hours" integer, "repair_cost_percentage" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "currency" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "power_consumption" decimal, "energy_cost_per_kwh" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "printer_cost" decimal, "investment_return_years" integer, "daily_usage_hours" integer, "repair_cost_percentage" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "currency" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "power_consumption" decimal, "energy_cost_per_kwh" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "printer_cost" decimal, "investment_return_years" integer, "daily_usage_hours" integer, "repair_cost_percentage" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "currency" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "power_consumption" decimal, "energy_cost_per_kwh" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "printer_cost" decimal, "investment_return_years" integer, "daily_usage_hours" integer, "repair_cost_percentage" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "currency" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "power_consumption" decimal, "energy_cost_per_kwh" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "printer_cost" decimal, "investment_return_years" integer, "daily_usage_hours" integer, "repair_cost_percentage" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908041942)[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908041942)[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908041942)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908041942)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908041942)[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908041942)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908041942)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908041942)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908041942)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:28:15.664342', '2025-09-08 06:28:15.664343') RETURNING "key"[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908041942)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '46a7dad45095f09d5ef0f18255fde3262303cff1', '2025-09-08 06:28:15.665977', '2025-09-08 06:28:15.665977') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:28:15.665770', '2025-09-08 06:28:15.665772') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:28:15.666413', '2025-09-08 06:28:15.666414') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:28:15.666755', '2025-09-08 06:28:15.666758') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '46a7dad45095f09d5ef0f18255fde3262303cff1', '2025-09-08 06:28:15.667902', '2025-09-08 06:28:15.667903') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:28:15.667407', '2025-09-08 06:28:15.667410') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:28:15.667049', '2025-09-08 06:28:15.667052') RETURNING "key"[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '46a7dad45095f09d5ef0f18255fde3262303cff1', '2025-09-08 06:28:15.668172', '2025-09-08 06:28:15.668174') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:28:15.668465', '2025-09-08 06:28:15.668467') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '46a7dad45095f09d5ef0f18255fde3262303cff1', '2025-09-08 06:28:15.669258', '2025-09-08 06:28:15.669259') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:28:15.669212', '2025-09-08 06:28:15.669215') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '46a7dad45095f09d5ef0f18255fde3262303cff1', '2025-09-08 06:28:15.669462', '2025-09-08 06:28:15.669496') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:28:15.669348', '2025-09-08 06:28:15.669349') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '46a7dad45095f09d5ef0f18255fde3262303cff1', '2025-09-08 06:28:15.669828', '2025-09-08 06:28:15.669839') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '46a7dad45095f09d5ef0f18255fde3262303cff1', '2025-09-08 06:28:15.670276', '2025-09-08 06:28:15.670277') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:28:15.669453', '2025-09-08 06:28:15.669454') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '46a7dad45095f09d5ef0f18255fde3262303cff1', '2025-09-08 06:28:15.671716', '2025-09-08 06:28:15.671717') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '46a7dad45095f09d5ef0f18255fde3262303cff1', '2025-09-08 06:28:15.671666', '2025-09-08 06:28:15.671668') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '46a7dad45095f09d5ef0f18255fde3262303cff1', '2025-09-08 06:28:15.672255', '2025-09-08 06:28:15.672257') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:15.704540', '2025-09-08 06:28:15.704540'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:15.704540', '2025-09-08 06:28:15.704540');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.718033', '2025-09-08 06:28:15.718033'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.718033', '2025-09-08 06:28:15.718033');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$3vyfVglNcxQ9/rSJmqN04u5xzebVIdT3WIvTrSf5FCkEd/j8x3hAe', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.720557', '2025-09-08 06:28:15.720557', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$DtgAFtJSKXVoDB/VJtZjkeo2AOrw7ekUF92JXFd8wuoL3tPxSsFFS', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.720557', '2025-09-08 06:28:15.720557', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (1.4ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:15.696594', '2025-09-08 06:28:15.696594'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:15.696594', '2025-09-08 06:28:15.696594');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.715376', '2025-09-08 06:28:15.715376'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.715376', '2025-09-08 06:28:15.715376');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$RDKaDZJ9E9QXQkMgLcHEXOkR7OWL4AwOfKK1.zH0u7PnL3eWPe6HG', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.718563', '2025-09-08 06:28:15.718563', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$bHiG5sFaC4aMTNmgUyzJpO5ximHUeXvA0YXie67h7EqLIzZglDVfG', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.718563', '2025-09-08 06:28:15.718563', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:15.702199', '2025-09-08 06:28:15.702199'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:15.702199', '2025-09-08 06:28:15.702199');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.716587', '2025-09-08 06:28:15.716587'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.716587', '2025-09-08 06:28:15.716587');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$CrQWnkNIIftufuuirYibeOkwyclEzKaGx.zhBh27v2vfFIYZphHOG', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.719612', '2025-09-08 06:28:15.719612', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$yf77QuqQ6k.hTnMQOHyNmu9NwkHEb0Vlc2NhLeK3ywiJS2VIm5Ski', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.719612', '2025-09-08 06:28:15.719612', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (1.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:15.701094', '2025-09-08 06:28:15.701094'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:15.701094', '2025-09-08 06:28:15.701094');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.714552', '2025-09-08 06:28:15.714552'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.714552', '2025-09-08 06:28:15.714552');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$2YMxBTC5nxfc.50VJ5e09epkyxP9a4a4GU2SfHfZQugi2Tt1ow5mK', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.719538', '2025-09-08 06:28:15.719538', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$rjp4US0KrVvMTYoCzY4in.2TPwTaBgzENuVF32zwUpf6.WdS03JnO', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.719538', '2025-09-08 06:28:15.719538', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:15.700658', '2025-09-08 06:28:15.700658'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:15.700658', '2025-09-08 06:28:15.700658');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.717183', '2025-09-08 06:28:15.717183'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.717183', '2025-09-08 06:28:15.717183');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$IlG2.pX1mc8xdCrPNxIwYONv88zK6jIDMOQZqkbdmn6lKzLKHpEpu', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.720144', '2025-09-08 06:28:15.720144', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$nrp.UphjRtSv5Zo/XlT2zeOlD8hVmDMr1tB2uGQsaMIGiMAN7QHXy', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.720144', '2025-09-08 06:28:15.720144', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mFixtures Load (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:15.707585', '2025-09-08 06:28:15.707585'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:15.707585', '2025-09-08 06:28:15.707585');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.720779', '2025-09-08 06:28:15.720779'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.720779', '2025-09-08 06:28:15.720779');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$AeVeStMEHRxPSCboxy.nP.4b5/rbOiSCNOZ/tm0768gF1005eiVja', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.723908', '2025-09-08 06:28:15.723908', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$OOJ0HGfV42vPy72jQXw9E.WVP8sYDSBbM8RB2woiihiN77nUuBp7q', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.723908', '2025-09-08 06:28:15.723908', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:15.705049', '2025-09-08 06:28:15.705049'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:15.705049', '2025-09-08 06:28:15.705049');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.719225', '2025-09-08 06:28:15.719225'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.719225', '2025-09-08 06:28:15.719225');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$9usUNEwwJ93YoEz3iZsSTuLSUb5vDX4Mn7NVCDdgTG4t.lwbf5o.y', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.721509', '2025-09-08 06:28:15.721509', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$sqQVgrE3Kre/cRVNxqZ/DOKgMLcP206.RQD1IrsaxL4WJrI6vO2eS', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.721509', '2025-09-08 06:28:15.721509', 'EUR', 0.1)[0m
  [1m[36mFixtures Load (0.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:15.701221', '2025-09-08 06:28:15.701221'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:15.701221', '2025-09-08 06:28:15.701221');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.717296', '2025-09-08 06:28:15.717296'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.717296', '2025-09-08 06:28:15.717296');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$DM4QbnMcE44GkIjAXuE9o.H91I0z4AFkyNDNR1xR9cA0mzoKPGz9e', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.722688', '2025-09-08 06:28:15.722688', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$d09K/OdPiAcdnL8YT/apq.weF1b4xBwk6mHGSnxSdjFXh1A2hAgKC', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.722688', '2025-09-08 06:28:15.722688', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (4.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mFixtures Load (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:15.707913', '2025-09-08 06:28:15.707913'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:15.707913', '2025-09-08 06:28:15.707913');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.725038', '2025-09-08 06:28:15.725038'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.725038', '2025-09-08 06:28:15.725038');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$ulYKsGL2IBkK5dOTjqmmUu8n46lGmNiKIePsi6xT72BWm4fnUpMMy', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.728606', '2025-09-08 06:28:15.728606', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$1lU.b8S4pJvztn27c05rfe4OgZrA0pKI4ELGaN.QHLj8yhTU7SwZq', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.728606', '2025-09-08 06:28:15.728606', 'EUR', 0.1)[0m
  [1m[35m (3.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_positive_default_energy_cost_per_kwh
UserTest: test_should_require_email
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
UserTest: test_should_have_many_print_pricings
----------------------------------------------------
-----------------------------------
UserTest: test_should_be_valid_with_valid_attributes
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
  [1m[35m (2.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (0.6ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:15.711883', '2025-09-08 06:28:15.711883'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:15.711883', '2025-09-08 06:28:15.711883');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.729063', '2025-09-08 06:28:15.729063'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:15.729063', '2025-09-08 06:28:15.729063');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$rIZqaP0pxsJIR2PfLnl47O8GyXxcmnT9kTKKpAdoRTRI.eTW9DqO.', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.733226', '2025-09-08 06:28:15.733226', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$a/pOkSBOKy6c/Xe1nd0SK.czHvSzL9E1n2WgIaLzBXZq9YADCcBXa', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:15.733226', '2025-09-08 06:28:15.733226', 'EUR', 0.1)[0m
------------------------------------------------------------------------------
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
--------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
-------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
UserTest: test_should_have_default_values_for_new_users
--------------------------------------
UserTest: test_should_require_password
-------------------------------------------------------
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
  [1m[35m (3.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_require_default_currency
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.751713"], ["updated_at", "2025-09-08 06:28:15.751713"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
---------------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
UserTest: test_should_require_default_energy_cost_per_kwh
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
---------------------------------------------------------
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.759649"], ["updated_at", "2025-09-08 06:28:15.759649"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.760630"], ["updated_at", "2025-09-08 06:28:15.760630"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.755213"], ["updated_at", "2025-09-08 06:28:15.755213"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (5.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (5.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.756390"], ["updated_at", "2025-09-08 06:28:15.756390"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.764609"], ["updated_at", "2025-09-08 06:28:15.764609"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mUser Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.766741"], ["updated_at", "2025-09-08 06:28:15.766741"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.771507"], ["updated_at", "2025-09-08 06:28:15.771507"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (2.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.5"], ["created_at", "2025-09-08 06:28:15.769626"], ["updated_at", "2025-09-08 06:28:15.769626"]]
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.782577"], ["updated_at", "2025-09-08 06:28:15.782577"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.775125"], ["updated_at", "2025-09-08 06:28:15.775125"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.779069"], ["updated_at", "2025-09-08 06:28:15.779069"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.781792"], ["updated_at", "2025-09-08 06:28:15.781792"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.781710"], ["updated_at", "2025-09-08 06:28:15.781710"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.788941"], ["updated_at", "2025-09-08 06:28:15.788941"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "200.0"], ["energy_cost_per_kwh", "0.12"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.716"], ["created_at", "2025-09-08 06:28:15.789024"], ["updated_at", "2025-09-08 06:28:15.789024"]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.791239"], ["updated_at", "2025-09-08 06:28:15.791239"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.793135"], ["updated_at", "2025-09-08 06:28:15.793135"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
--------------------------------------------------
PrintersControllerTest: test_should_create_printer
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintersControllerTest: test_should_destroy_printer
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
--------------------------------------------------
PrintersControllerTest: test_should_update_printer
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintersControllerTest: test_should_show_printer
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PrintersControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PrintersControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mPrintPricing Destroy (0.1ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PrintersControllerTest: test_should_require_authentication
----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintersControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/printers/980190962" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Started GET "/printers" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers/new" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  [1m[36mPrinter Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Started POST "/printers" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Started DELETE "/printers/980190962" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.868844"], ["updated_at", "2025-09-08 06:28:15.868844"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintersController#update as HTML
  Parameters: {"printer" => {"name" => "Updated Printer Name", "power_consumption" => "250"}, "id" => "980190962"}
Processing by PrintersController#index as HTML
Started GET "/printers/980190962" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Started GET "/printers/980190962/edit" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by PrintersController#new as HTML
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 06:28:15.875790"], ["updated_at", "2025-09-08 06:28:15.875790"]]
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.6ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering layout layouts/application.html.erb
  Rendering printers/update.html.erb within layouts/application
  Rendering printers/index.html.erb within layouts/application
  Rendered printers/update.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered printers/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 0.4ms | GC: 0.0ms)
Started GET "/printers" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 3.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.6ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 6.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 6.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
Completed 200 OK in 20ms (Views: 11.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendering printers/new.html.erb within layouts/application
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  Rendered printers/new.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
Started POST "/users" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#create as HTML
  Parameters: {"printer" => {"name" => "Test Printer", "manufacturer" => "Prusa", "power_consumption" => "200", "cost" => "500", "payoff_goal_years" => "3"}}
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Processing by PrintersController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.899149"], ["updated_at", "2025-09-08 06:28:15.899149"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  Rendered layout layouts/application.html.erb (Duration: 10.2ms | GC: 0.0ms)
Processing by PrintersController#edit as HTML
  Parameters: {"id" => "980190962"}
Processing by PrintPricingsController#create as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
Processing by PrintersController#index as HTML
Processing by PrintPricingsController#index as HTML
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  Rendering layout layouts/application.html.erb
  Rendering printers/create.html.erb within layouts/application
  Rendered printers/create.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
Completed 200 OK in 27ms (Views: 12.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Processing by PrintersController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 4.9ms | GC: 0.0ms)
  [1m[36mPrintPricing Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
Completed 404 Not Found in 7ms (ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering printers/edit.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered printers/edit.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["currency", "JPY"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", "250.0"], ["energy_cost_per_kwh", "35.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["printer_cost", "300000.0"], ["investment_return_years", 3], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 06:28:15.909864"], ["updated_at", "2025-09-08 06:28:15.909864"]]
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190964" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:137:in 'block in <class:PrintPricingFlowsTest>'
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
Completed 200 OK in 16ms (Views: 7.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  [1m[36mCACHE Printer Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Redirected to http://www.example.com/
  Rendering layout layouts/application.html.erb
Completed 303 See Other in 21ms (ActiveRecord: 1.2ms (2 queries, 0 cached) | GC: 0.0ms)
  Rendering printers/index.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering printers/show.html.erb within layouts/application
  Rendering layout layouts/application.html.erb
  Rendering printers/destroy.html.erb within layouts/application
  Rendered printers/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  Rendered printers/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered printers/destroy.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
Processing by PrintPricingsController#index as HTML
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 8.2ms | GC: 0.0ms)
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_symbol_returns_correct_symbols
----------------------------------------------------------------
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.0ms | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Processing by PrintPricingsController#new as HTML
Completed 200 OK in 14ms (Views: 6.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
Completed 200 OK in 22ms (Views: 7.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.1ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 20ms (Views: 13.5ms | ActiveRecord: 0.9ms (3 queries, 0 cached) | GC: 0.0ms)
Completed 200 OK in 21ms (Views: 11.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE Printer Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_options_returns_correct_format
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#new as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
CurrencyHelperTest: test_currency_decimals_returns_correct_decimal_places
-------------------------------------------------------------------------
  Rendered layout layouts/application.html.erb (Duration: 11.5ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CurrencyHelperTest: test_zero_decimal_currencies_returns_JPY
------------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 26ms (ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
Completed 200 OK in 25ms (Views: 15.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
-------------------------------------------------------------------------------
UserProfilesControllerTest: test_should_update_user_profile
CurrencyHelperTest: test_format_currency_handles_different_currencies_correctly
-----------------------------------------------------------
-------------------------------------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
--------------------------------------------------------------------------
CurrencyHelperTest: test_currency_sample_values_returns_appropriate_values
--------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started PATCH "/profile" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_edit
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_show
------------------------------------------------
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/profile/edit" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
Started GET "/profile" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 3.9ms | GC: 0.0ms)
Processing by UserProfilesController#edit as HTML
Processing by UserProfilesController#update as HTML
  Parameters: {"user" => {"default_currency" => "EUR", "default_energy_cost_per_kwh" => "0.15"}}
  Rendered layout layouts/application.html.erb (Duration: 4.7ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 4.9ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 4.6ms | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/edit.html.erb within layouts/application
--------------------------------------------------------------
UserProfilesControllerTest: test_should_require_authentication
--------------------------------------------------------------
Processing by UserProfilesController#show as HTML
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/show.html.erb within layouts/application
  Rendered user_profiles/edit.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendered user_profiles/show.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Started GET "/profile" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  Rendered layout layouts/application.html.erb (Duration: 10.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.2ms | GC: 0.0ms)
Processing by UserProfilesController#show as HTML
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by PrintPricingsController#index as HTML
Completed 200 OK in 23ms (Views: 12.1ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
Processing by PrintPricingsController#create as HTML
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "currency" => "EUR", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "power_consumption" => "150", "energy_cost_per_kwh" => "0.15", "vat_percentage" => "21.0"}}
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-08 06:28:15.935805"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 5.2ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 7ms (Views: 5.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#new as HTML
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendering print_pricings/edit.html.erb within layouts/application
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 4.6ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["currency", "EUR"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "150.0"], ["energy_cost_per_kwh", "0.15"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.09405625"], ["created_at", "2025-09-08 06:28:15.943844"], ["updated_at", "2025-09-08 06:28:15.943844"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 16ms (ActiveRecord: 1.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 7.0ms | GC: 0.0ms)
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 4.6ms | GC: 0.0ms)
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Completed 200 OK in 10ms (Views: 6.6ms | ActiveRecord: 0.8ms (3 queries, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.5ms | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 10ms (Views: 5.8ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 6.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.6ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 8.2ms | ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 10.6ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  Rendering layout layouts/application.html.erb
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Redirected to http://www.example.com/print_pricings/980190964
  Rendered layout layouts/application.html.erb (Duration: 13.4ms | GC: 0.0ms)
Completed 302 Found in 20ms (ActiveRecord: 0.8ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 14.4ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 5.5ms | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 7.8ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 8.8ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  [1m[36mPrintPricing Create (2.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190965], ["job_name", "Integration Test Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.621"], ["created_at", "2025-09-08 06:28:15.963288"], ["updated_at", "2025-09-08 06:28:15.963288"]]
Processing by PrintPricingsController#create as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  [1m[36mPrintPricing Destroy (0.5ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
Processing by PrintPricingsController#new as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 13ms (ActiveRecord: 3.3ms (2 queries, 1 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["currency", "EUR"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 06:28:15.961170"], ["updated_at", "2025-09-08 06:28:15.961170"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 6.5ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 10ms (Views: 7.6ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 4.6ms | GC: 0.0ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendered layout layouts/application.html.erb (Duration: 5.7ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 5.8ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
Started GET "/print_pricings/980190964/edit" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190965], ["id", 980190963], ["LIMIT", 1]]
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:15.978866"], ["updated_at", "2025-09-08 06:28:15.978866"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 10.8ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered layout layouts/application.html.erb (Duration: 11.6ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
Completed 200 OK in 13ms (Views: 12.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
Redirected to http://www.example.com/print_pricings
-----------------------------------------------------
Completed 302 Found in 27ms (ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 0.0ms)
PrinterTest: test_should_set_date_added_automatically
-----------------------------------------------------
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 29ms (ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 4.4ms | GC: 0.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Completed 200 OK in 11ms (Views: 7.3ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started PATCH "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
--------------------------------------------------------
PrinterTest: test_should_have_valid_manufacturer_options
--------------------------------------------------------
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 6.5ms | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190964"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.8ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "final_price" = $3, "updated_at" = $4 WHERE "print_pricings"."id" = $5[0m  [["job_name", "Updated Job Name"], ["currency", "GBP"], ["final_price", "1.716"], ["updated_at", "2025-09-08 06:28:15.984895"], ["id", 980190962]]
  Rendered layout layouts/application.html.erb (Duration: 8.0ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 8.3ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
-------------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_correct_months_remaining
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 06:28:15.985921"], ["updated_at", "2025-09-08 06:28:15.985921"]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_true_for_old_printer_past_payoff_goal
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2024-09-08 06:28:15.993516"], ["created_at", "2025-09-08 06:28:15.994482"], ["updated_at", "2025-09-08 06:28:15.994482"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 06:28:15.989018"], ["created_at", "2025-09-08 06:28:15.989073"], ["updated_at", "2025-09-08 06:28:15.989073"]]
---------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_false_for_new_printer
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 19.2ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 20.1ms | GC: 0.0ms)
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:28:15 +0900
Completed 422 Unprocessable Content in 30ms (Views: 20.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
---------------------------------------------------------------
Redirected to http://www.example.com/print_pricings/980190962
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
PrinterTest: test_should_require_name
-------------------------------------
Completed 302 Found in 20ms (ActiveRecord: 1.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 404 Not Found in 2ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:116:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrinterTest: test_should_require_positive_cost
----------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PrinterTest: test_should_be_valid_with_valid_attributes
-------------------------------------------------------
-----------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_0_for_paid_off_printer
-----------------------------------------------------------------------
-----------------------------------------------------------
PrinterTest: test_should_require_positive_payoff_goal_years
-----------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Update (0.9ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Flow Test Print"], ["currency", "GBP"], ["updated_at", "2025-09-08 06:28:15.998947"], ["id", 980190964]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 24ms (ActiveRecord: 1.2ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrinter Create (4.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 06:28:15.997396"], ["created_at", "2025-09-08 06:28:16.000563"], ["updated_at", "2025-09-08 06:28:16.000563"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 06:28:16.006625"], ["created_at", "2025-09-08 06:28:16.006911"], ["updated_at", "2025-09-08 06:28:16.006911"]]
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 15:28:16 +0900
---------------------------------------
PrinterTest: test_should_belong_to_user
---------------------------------------
  [1m[36mCACHE PrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
-----------------------------------------------------------
PrinterTest: test_should_require_positive_power_consumption
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 06:28:16.010944"], ["created_at", "2025-09-08 06:28:16.013604"], ["updated_at", "2025-09-08 06:28:16.013604"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 3.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.3ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 4.5ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 15:28:16 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190964]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 3ms (ActiveRecord: 0.4ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:16 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.1ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (2.4ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:35.368134', '2025-09-08 06:28:35.368134'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:35.368134', '2025-09-08 06:28:35.368134');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:35.383294', '2025-09-08 06:28:35.383294'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:35.383294', '2025-09-08 06:28:35.383294');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$ZoFj5HROsuJnz3pBIKQZrunOX5Vt1u4JgAIMp.sJw8ucVhCJcJMxe', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:35.392232', '2025-09-08 06:28:35.392232', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$8afLbAHK33gLNNBJ35/voumPAM/xs9ahpmVgX0ocZzA8lr2KlFcuC', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:35.392232', '2025-09-08 06:28:35.392232', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintersControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers/980190962/edit" for 127.0.0.1 at 2025-09-08 15:28:35 +0900
Processing by PrintersController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering printers/edit.html.erb within layouts/application
  Rendered printers/edit.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.5ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 4.9ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintersControllerTest: test_should_destroy_printer
---------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Started DELETE "/printers/980190962" for 127.0.0.1 at 2025-09-08 15:28:35 +0900
Processing by PrintersController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Destroy (0.3ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/printers
Completed 302 Found in 12ms (ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintersControllerTest: test_should_update_printer
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/printers/980190962" for 127.0.0.1 at 2025-09-08 15:28:35 +0900
Processing by PrintersController#update as HTML
  Parameters: {"printer" => {"name" => "Updated Printer Name", "power_consumption" => "250"}, "id" => "980190962"}
  [1m[36mPrinter Load (0.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Update (0.3ms)[0m  [1m[33mUPDATE "printers" SET "name" = $1, "power_consumption" = $2, "updated_at" = $3 WHERE "printers"."id" = $4[0m  [["name", "Updated Printer Name"], ["power_consumption", "250.0"], ["updated_at", "2025-09-08 06:28:35.537889"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/printers/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PrintersControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers" for 127.0.0.1 at 2025-09-08 15:28:35 +0900
Processing by PrintersController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering printers/index.html.erb within layouts/application
  Rendered printers/index.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintersControllerTest: test_should_create_printer
--------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Started POST "/printers" for 127.0.0.1 at 2025-09-08 15:28:35 +0900
Processing by PrintersController#create as HTML
  Parameters: {"printer" => {"name" => "Test Printer", "manufacturer" => "Prusa", "power_consumption" => "200", "cost" => "500", "payoff_goal_years" => "3"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 06:28:35.549210"], ["created_at", "2025-09-08 06:28:35.549231"], ["updated_at", "2025-09-08 06:28:35.549231"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/printers/980190963
Completed 302 Found in 6ms (ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" ORDER BY "printers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PrintersControllerTest: test_should_require_authentication
----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers" for 127.0.0.1 at 2025-09-08 15:28:35 +0900
Processing by PrintersController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PrintersControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers/new" for 127.0.0.1 at 2025-09-08 15:28:35 +0900
Processing by PrintersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering printers/new.html.erb within layouts/application
  Rendered printers/new.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.8ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintersControllerTest: test_should_show_printer
------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers/980190962" for 127.0.0.1 at 2025-09-08 15:28:35 +0900
Processing by PrintersController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrinter Load (0.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering printers/show.html.erb within layouts/application
  Rendered printers/show.html.erb within layouts/application (Duration: 0.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (16.4ms)[0m  [1m[35mTRUNCATE TABLE "users", "print_pricings", "printers"[0m
  [1m[36mTruncate Tables (16.2ms)[0m  [1m[35mTRUNCATE TABLE "users", "print_pricings", "printers"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (17.6ms)[0m  [1m[35mTRUNCATE TABLE "users", "print_pricings", "printers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTruncate Tables (11.3ms)[0m  [1m[35mTRUNCATE TABLE "users", "print_pricings", "printers"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (18.5ms)[0m  [1m[35mTRUNCATE TABLE "users", "print_pricings", "printers"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (18.0ms)[0m  [1m[35mTRUNCATE TABLE "users", "print_pricings", "printers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (13.2ms)[0m  [1m[35mTRUNCATE TABLE "users", "print_pricings", "printers"[0m
  [1m[36mTruncate Tables (13.4ms)[0m  [1m[35mTRUNCATE TABLE "users", "print_pricings", "printers"[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (9.4ms)[0m  [1m[35mTRUNCATE TABLE "users", "print_pricings", "printers"[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTruncate Tables (9.8ms)[0m  [1m[35mTRUNCATE TABLE "users", "print_pricings", "printers"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:40.435838', '2025-09-08 06:28:40.435838'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:40.435838', '2025-09-08 06:28:40.435838');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.452699', '2025-09-08 06:28:40.452699'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.452699', '2025-09-08 06:28:40.452699');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$t17aboAN6A3Ta7agihGnfu/6x5CJskuGhj67u8TjInILWUloc7SFC', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.457256', '2025-09-08 06:28:40.457256', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$hULVXD9l.LeWHPsFmbc2muPKlY9VTUqBJEiDUqj/Pq9m5LDIzSdQe', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.457256', '2025-09-08 06:28:40.457256', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:40.435129', '2025-09-08 06:28:40.435129'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:40.435129', '2025-09-08 06:28:40.435129');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.452930', '2025-09-08 06:28:40.452930'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.452930', '2025-09-08 06:28:40.452930');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$7VOHPjjl5mONSOvocq4N3e8k..wtUkGRr9k1moQk8j/7aaRlUIY.a', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.457972', '2025-09-08 06:28:40.457972', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$XVCWQGz7bgWcczAT0sV4Yuueu9imzGvO2qkgwpjIoD8OMV9h1Xb12', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.457972', '2025-09-08 06:28:40.457972', 'EUR', 0.1)[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:40.435524', '2025-09-08 06:28:40.435524'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:40.435524', '2025-09-08 06:28:40.435524');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.455047', '2025-09-08 06:28:40.455047'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.455047', '2025-09-08 06:28:40.455047');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$TYTrQFeaH8jdO03qlfXya.S559UP6KttjyjgHKWKHOZtSqZCGl3xy', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.459889', '2025-09-08 06:28:40.459889', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$AywAFSFKxUcIKZQvx1nLGOdt.d9lRvpRttfMIG4AugegPkxiLs.9q', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.459889', '2025-09-08 06:28:40.459889', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[35m (2.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[35m (3.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (0.6ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:40.439378', '2025-09-08 06:28:40.439378'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:40.439378', '2025-09-08 06:28:40.439378');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.458249', '2025-09-08 06:28:40.458249'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.458249', '2025-09-08 06:28:40.458249');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$RNn6foLHo/nG.4caSdJxMOCVYr57w0xZ/B/sKyBopT8CVo7btBSsu', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.462198', '2025-09-08 06:28:40.462198', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$uqxAZchJ8OTJZtockgJsGuF8r.di9wNg72nO8P4/p3NsWuj0Y2UBW', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.462198', '2025-09-08 06:28:40.462198', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:40.442074', '2025-09-08 06:28:40.442074'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:40.442074', '2025-09-08 06:28:40.442074');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.459399', '2025-09-08 06:28:40.459399'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.459399', '2025-09-08 06:28:40.459399');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$kckU9ooLXuCXR4vh.CCv5OPasPURNDV3371yrNDQq9X1Ke8Q19mZe', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.463861', '2025-09-08 06:28:40.463861', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$5Wpi9ZDmWEB64qQZanF2u.3iMp/ymBvZ.UerUuAQOdfY04SsfLUNK', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.463861', '2025-09-08 06:28:40.463861', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.4ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:40.444043', '2025-09-08 06:28:40.444043'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:40.444043', '2025-09-08 06:28:40.444043');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.460784', '2025-09-08 06:28:40.460784'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.460784', '2025-09-08 06:28:40.460784');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$PhfrMqR7/7yWzbUMPh9MD.IOA4eC.4u18iOPe0//y2OOct2kMWIei', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.465503', '2025-09-08 06:28:40.465503', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$PXwyoWigXv88dyxECWwqzOXl5fGeNM1KEqkP8IOd4Z4W3.M67sq7O', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.465503', '2025-09-08 06:28:40.465503', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[35m (2.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mFixtures Load (1.6ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:40.445584', '2025-09-08 06:28:40.445584'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:40.445584', '2025-09-08 06:28:40.445584');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.464405', '2025-09-08 06:28:40.464405'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.464405', '2025-09-08 06:28:40.464405');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$IYKfjo4l8w5CvhHZGGpR4eqJO8949JiT.SlLKcnv2HVd6lIeROkHW', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.469948', '2025-09-08 06:28:40.469948', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$gFyaNlU4LxDanortf73VEOAFe4vqCrKyyIrie/ZVk/wvs.nE62d4i', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.469948', '2025-09-08 06:28:40.469948', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[35m (2.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mFixtures Load (1.3ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:40.449085', '2025-09-08 06:28:40.449085'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:40.449085', '2025-09-08 06:28:40.449085');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.467937', '2025-09-08 06:28:40.467937'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.467937', '2025-09-08 06:28:40.467937');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$kMFne/6Qf/vC7.3sRtPlIuTjWFX9Uyfgz605yFRHveP4fICbdvVOi', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.472927', '2025-09-08 06:28:40.472927', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$Z2GsTQen14P5U9ltb58HGOMqlmJ5mR6.dwMl.Adj/SK9eqBhRdi9S', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.472927', '2025-09-08 06:28:40.472927', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:40.452184', '2025-09-08 06:28:40.452184'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:40.452184', '2025-09-08 06:28:40.452184');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.469424', '2025-09-08 06:28:40.469424'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.469424', '2025-09-08 06:28:40.469424');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$Pfrbb6hda1X9JIig5CW6auE8BpRxJAxBXsrsKOnOPw6bKNfOKJgpy', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.473869', '2025-09-08 06:28:40.473869', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$OqRFP8Fd0p/kHIXn9JV73.FMPFQymrSyR1Uv4NKqfPJSHUxZahUDi', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.473869', '2025-09-08 06:28:40.473869', 'EUR', 0.1)[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:28:40.453839', '2025-09-08 06:28:40.453839'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:28:40.453839', '2025-09-08 06:28:40.453839');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.470341', '2025-09-08 06:28:40.470341'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:28:40.470341', '2025-09-08 06:28:40.470341');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$d5vnPm8.cGRrX4akA.iWVuGsH39HqOZon..tDMdVxXkvFPccp3L56', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.475966', '2025-09-08 06:28:40.475966', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$RcqC03/EVbiNZOZ0YQXaYOeFbYfSzMCAoWShjIYA3mVASVXrpzsZ.', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:28:40.475966', '2025-09-08 06:28:40.475966', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (4.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.488117"], ["updated_at", "2025-09-08 06:28:40.488117"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.488927"], ["updated_at", "2025-09-08 06:28:40.488927"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[35m (3.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.492919"], ["updated_at", "2025-09-08 06:28:40.492919"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.494912"], ["updated_at", "2025-09-08 06:28:40.494912"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.496077"], ["updated_at", "2025-09-08 06:28:40.496077"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
PrintPricingTest: test_should_require_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.500547"], ["updated_at", "2025-09-08 06:28:40.500547"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.502242"], ["updated_at", "2025-09-08 06:28:40.502242"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.505488"], ["updated_at", "2025-09-08 06:28:40.505488"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.504413"], ["updated_at", "2025-09-08 06:28:40.504413"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.507361"], ["updated_at", "2025-09-08 06:28:40.507361"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.510264"], ["updated_at", "2025-09-08 06:28:40.510264"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
  [1m[36mPrintPricing Create (0.8ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "200.0"], ["energy_cost_per_kwh", "0.12"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.716"], ["created_at", "2025-09-08 06:28:40.512039"], ["updated_at", "2025-09-08 06:28:40.512039"]]
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
PrintPricingTest: test_should_require_job_name
----------------------------------------------
--------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
CurrencyHelperTest: test_currency_sample_values_returns_appropriate_values
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
--------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
-------------------------------------------------------------------------------
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
CurrencyHelperTest: test_format_currency_handles_different_currencies_correctly
-------------------------------------------------------------------------------
CurrencyHelperTest: test_currency_decimals_returns_correct_decimal_places
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
CurrencyHelperTest: test_currency_options_returns_correct_format
----------------------------------------------------------------
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.520324"], ["updated_at", "2025-09-08 06:28:40.520324"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.521207"], ["updated_at", "2025-09-08 06:28:40.521207"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
CurrencyHelperTest: test_zero_decimal_currencies_returns_JPY
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.521758"], ["updated_at", "2025-09-08 06:28:40.521758"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
CurrencyHelperTest: test_currency_symbol_returns_correct_symbols
----------------------------------------------------------------
-----------------------------------------------------
PrinterTest: test_should_set_date_added_automatically
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
PrinterTest: test_months_to_payoff_should_return_0_for_paid_off_printer
-----------------------------------------------------------------------
---------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_false_for_new_printer
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
PrinterTest: test_should_belong_to_user
---------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PrinterTest: test_should_be_valid_with_valid_attributes
-------------------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
--------------------------------------------------------
-----------------------------------------------------------
PrinterTest: test_should_require_positive_power_consumption
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
PrinterTest: test_should_have_valid_manufacturer_options
--------------------------------------------------------
-------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
PrinterTest: test_should_require_name
-------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrinterTest: test_should_require_positive_cost
----------------------------------------------
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 06:28:40.537935"], ["created_at", "2025-09-08 06:28:40.537964"], ["updated_at", "2025-09-08 06:28:40.537964"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
PrinterTest: test_should_require_positive_payoff_goal_years
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 06:28:40.538020"], ["created_at", "2025-09-08 06:28:40.538299"], ["updated_at", "2025-09-08 06:28:40.538299"]]
  [1m[36mPrinter Create (1.1ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 06:28:40.537893"], ["created_at", "2025-09-08 06:28:40.539276"], ["updated_at", "2025-09-08 06:28:40.539276"]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
-------------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_correct_months_remaining
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
-------------------------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_true_for_old_printer_past_payoff_goal
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
UserTest: test_should_have_default_values_for_new_users
-------------------------------------------------------
---------------------------------------------------------
UserTest: test_should_require_default_energy_cost_per_kwh
---------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2024-09-08 06:28:40.544646"], ["created_at", "2025-09-08 06:28:40.545368"], ["updated_at", "2025-09-08 06:28:40.545368"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
-----------------------------------
----------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
----------------------------------------------
UserTest: test_should_require_default_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
------------------------------------------------------------------
UserTest: test_should_require_positive_default_energy_cost_per_kwh
------------------------------------------------------------------
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (2.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 06:28:40.546680"], ["created_at", "2025-09-08 06:28:40.548752"], ["updated_at", "2025-09-08 06:28:40.548752"]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.554521"], ["updated_at", "2025-09-08 06:28:40.554521"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.556496"], ["updated_at", "2025-09-08 06:28:40.556496"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mPrintPricing Create (1.2ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.5"], ["created_at", "2025-09-08 06:28:40.562319"], ["updated_at", "2025-09-08 06:28:40.562319"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_show
------------------------------------------------
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_edit
------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
UserProfilesControllerTest: test_should_require_authentication
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserProfilesControllerTest: test_should_update_user_profile
-----------------------------------------------------------
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mPrintPricing Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (1.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190964]]
  [1m[36mPrintPricing Destroy (0.6ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mPrinter Load (3.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190964]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190964]]
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (8.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (1.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/profile" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/profile" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (3.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (3.9ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/profile" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mPrintPricing Count (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Started GET "/profile/edit" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by UserProfilesController#show as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.680929"], ["updated_at", "2025-09-08 06:28:40.680929"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mPrintPricing Load (3.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by UserProfilesController#show as HTML
  [1m[36mPrintPricing Create (1.2ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190965], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 06:28:40.692360"], ["updated_at", "2025-09-08 06:28:40.692360"]]
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/show.html.erb within layouts/application
Processing by UserProfilesController#update as HTML
  Parameters: {"user" => {"default_currency" => "EUR", "default_energy_cost_per_kwh" => "0.15"}}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 401 Unauthorized in 5ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Update (5.4ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "final_price" = $3, "updated_at" = $4 WHERE "print_pricings"."id" = $5[0m  [["job_name", "Updated Job Name"], ["currency", "GBP"], ["final_price", "1.716"], ["updated_at", "2025-09-08 06:28:40.697816"], ["id", 980190962]]
Processing by UserProfilesController#edit as HTML
  Rendered user_profiles/show.html.erb within layouts/application (Duration: 8.0ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
Processing by PrintPricingsController#create as HTML
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/edit.html.erb within layouts/application
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  Rendered layout layouts/application.html.erb (Duration: 19.6ms | GC: 0.0ms)
  [1m[36mPrintPricing Load (2.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 39ms (Views: 25.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#create as HTML
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  Rendered user_profiles/edit.html.erb within layouts/application (Duration: 5.8ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 12.0ms | GC: 0.0ms)
Completed 200 OK in 18ms (Views: 13.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-08 06:28:40.714230"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 29ms (ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 51ms (ActiveRecord: 9.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
---------------------------------------------------------------------------------
  Rendering print_pricings/new.html.erb within layouts/application
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 3.9ms | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["currency", "EUR"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 06:28:40.727014"], ["updated_at", "2025-09-08 06:28:40.727014"]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 33ms (ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.5ms | GC: 0.0ms)
Completed 200 OK in 27ms (Views: 12.1ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Processing by PrintPricingsController#show as HTML
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (1.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Parameters: {"id" => "980190963"}
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mPrintPricing Load (1.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Processing by PrintPricingsController#index as HTML
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 21.5ms | GC: 0.0ms)
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mPrintPricing Load (0.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintersControllerTest: test_should_get_edit
--------------------------------------------
Completed 404 Not Found in 9ms (ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:116:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.8ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 34.5ms | GC: 0.0ms)
Completed 200 OK in 59ms (Views: 36.4ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintersControllerTest: test_should_create_printer
--------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintersControllerTest: test_should_show_printer
------------------------------------------------
  [1m[36mPrintPricing Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 20.0ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 39.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.7ms | GC: 0.0ms)
----------------------------------------------------------
PrintersControllerTest: test_should_require_authentication
Completed 422 Unprocessable Content in 28ms (Views: 21.5ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 6.6ms | GC: 0.0ms)
Started GET "/printers/980190962/edit" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mPrinter Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Started POST "/printers" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#edit as HTML
  Parameters: {"id" => "980190962"}
  Rendered layout layouts/application.html.erb (Duration: 11.4ms | GC: 0.0ms)
Processing by PrintersController#create as HTML
  Parameters: {"printer" => {"name" => "Test Printer", "manufacturer" => "Prusa", "power_consumption" => "200", "cost" => "500", "payoff_goal_years" => "3"}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PrintersControllerTest: test_should_get_new
-------------------------------------------
Started GET "/printers/980190962" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Completed 200 OK in 27ms (Views: 21.0ms | ActiveRecord: 1.4ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.8ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 49.8ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 70ms (Views: 55.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Processing by PrintersController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Started GET "/printers" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/print_pricings
  Rendering layout layouts/application.html.erb
Completed 302 Found in 33ms (ActiveRecord: 1.8ms (2 queries, 0 cached) | GC: 0.0ms)
  Rendering printers/show.html.erb within layouts/application
Processing by PrintersController#index as HTML
  Rendered printers/show.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/printers/new" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | GC: 0.0ms)
  Rendering printers/edit.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by PrintersController#new as HTML
---------------------------------------------------
PrintersControllerTest: test_should_destroy_printer
---------------------------------------------------
  Rendered printers/edit.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 5.4ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Create (0.9ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 06:28:40.792104"], ["created_at", "2025-09-08 06:28:40.792346"], ["updated_at", "2025-09-08 06:28:40.792346"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#new as HTML
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 7.6ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintersControllerTest: test_should_update_printer
--------------------------------------------------
---------------------------------------------
PrintersControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 9.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering printers/new.html.erb within layouts/application
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered printers/new.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started PATCH "/printers/980190962" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  Rendering layout layouts/application.html.erb
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  Rendering print_pricings/new.html.erb within layouts/application
Completed 200 OK in 11ms (Views: 5.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/printers" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
Started DELETE "/printers/980190962" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 4.1ms | GC: 0.0ms)
Processing by PrintersController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#update as HTML
  Parameters: {"printer" => {"name" => "Updated Printer Name", "power_consumption" => "250"}, "id" => "980190962"}
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#index as HTML
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 9.4ms | GC: 0.0ms)
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Completed 200 OK in 17ms (Views: 11.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Redirected to http://www.example.com/printers/980190964
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintersController#index as HTML
Completed 302 Found in 35ms (ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mPrinter Destroy (1.0ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#new as HTML
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  Rendering layout layouts/application.html.erb
  Rendering printers/index.html.erb within layouts/application
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered printers/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mPrinter Load (1.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" ORDER BY "printers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 7.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.8ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 6.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 7.1ms | ActiveRecord: 0.9ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Update (0.7ms)[0m  [1m[33mUPDATE "printers" SET "name" = $1, "power_consumption" = $2, "updated_at" = $3 WHERE "printers"."id" = $4[0m  [["name", "Updated Printer Name"], ["power_consumption", "250.0"], ["updated_at", "2025-09-08 06:28:40.821002"], ["id", 980190962]]
Processing by Devise::RegistrationsController#new as HTML
Redirected to http://www.example.com/printers
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
Completed 302 Found in 25ms (ActiveRecord: 1.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  [1m[36mPrintPricing Create (1.0ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["currency", "JPY"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", "250.0"], ["energy_cost_per_kwh", "35.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["printer_cost", "300000.0"], ["investment_return_years", 3], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 06:28:40.833462"], ["updated_at", "2025-09-08 06:28:40.833462"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 2.2ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.834358"], ["updated_at", "2025-09-08 06:28:40.834358"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Processing by PrintPricingsController#new as HTML
Redirected to http://www.example.com/printers/980190962
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 1.4ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 8.2ms | GC: 0.0ms)
Completed 302 Found in 32ms (ActiveRecord: 1.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 9.0ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 11.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
Started POST "/users" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 25ms (ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190965], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 06:28:40.853023"], ["updated_at", "2025-09-08 06:28:40.853023"]]
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 6.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.9ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 7.5ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "currency" => "EUR", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "power_consumption" => "150", "energy_cost_per_kwh" => "0.15", "vat_percentage" => "21.0"}}
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#show as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Parameters: {"id" => "980190964"}
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:28:40.857918"], ["updated_at", "2025-09-08 06:28:40.857918"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrintPricing Load (1.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 404 Not Found in 5ms (ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:137:in 'block in <class:PrintPricingFlowsTest>'
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.8ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["currency", "EUR"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "150.0"], ["energy_cost_per_kwh", "0.15"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.09405625"], ["created_at", "2025-09-08 06:28:40.866390"], ["updated_at", "2025-09-08 06:28:40.866390"]]
Redirected to http://www.example.com/
Completed 303 See Other in 22ms (ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Processing by PrintPricingsController#index as HTML
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 9.4ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 10.7ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 11.3ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190964], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 2.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 3.3ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 33ms (ActiveRecord: 1.0ms (2 queries, 1 cached) | GC: 0.0ms)
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 5.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.2ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Integration Test Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.621"], ["created_at", "2025-09-08 06:28:40.908132"], ["updated_at", "2025-09-08 06:28:40.908132"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 3.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | GC: 0.0ms)
Completed 200 OK in 15ms (Views: 5.4ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 18ms (ActiveRecord: 0.8ms (2 queries, 1 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190963/edit" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mCACHE User Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.9ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190964], ["id", 980190963], ["LIMIT", 1]]
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 5.0ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.6ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 8.0ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 2.9ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started PATCH "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190963"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.6ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Flow Test Print"], ["currency", "GBP"], ["updated_at", "2025-09-08 06:28:40.941455"], ["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 28ms (ActiveRecord: 0.8ms (3 queries, 2 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 3.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 4.4ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 9ms (ActiveRecord: 0.5ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:28:40 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 4.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.8ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (4.9ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "users", "printers"[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mTruncate Tables (7.1ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "users", "printers"[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (7.6ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "users", "printers"[0m
  [1m[36mTruncate Tables (7.6ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "users", "printers"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTruncate Tables (10.6ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "users", "printers"[0m
  [1m[36mTruncate Tables (8.8ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "users", "printers"[0m
  [1m[36mTruncate Tables (8.0ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "users", "printers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (5.9ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "users", "printers"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (7.9ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "users", "printers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (4.6ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "users", "printers"[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (7.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (4.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:29:21.497654', '2025-09-08 06:29:21.497654'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:29:21.497654', '2025-09-08 06:29:21.497654');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.527411', '2025-09-08 06:29:21.527411'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.527411', '2025-09-08 06:29:21.527411');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$yytgUMl54rgKUA58ybmKaeUbBjv2LB2EgWTayc5bPxWJZdTGXydVC', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.533833', '2025-09-08 06:29:21.533833', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$BK9o71kFZzmKgHVr7QTAuOPMIng./jLlaQuZtTZ5KIOhQJ.16BrbO', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.533833', '2025-09-08 06:29:21.533833', 'EUR', 0.1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:29:21.483450', '2025-09-08 06:29:21.483450'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:29:21.483450', '2025-09-08 06:29:21.483450');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.519053', '2025-09-08 06:29:21.519053'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.519053', '2025-09-08 06:29:21.519053');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$UgkUqyZfXz3/RV4bU.pgMe8zon2E9YYYBWZi/sa16pyVpvIjpKhn6', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.525611', '2025-09-08 06:29:21.525611', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$N9AUsLgmPQd8UrH9euznqumrf6UF9dZm9sExAW4rVtLH6O.e3K6Lm', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.525611', '2025-09-08 06:29:21.525611', 'EUR', 0.1)[0m
  [1m[36mFixtures Load (1.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:29:21.491520', '2025-09-08 06:29:21.491520'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:29:21.491520', '2025-09-08 06:29:21.491520');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.519111', '2025-09-08 06:29:21.519111'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.519111', '2025-09-08 06:29:21.519111');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$wQVtWHkiYsmhCaod8YZLPuitTtBohXVzBcP7ABSqGmTHWTE1YasZW', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.527803', '2025-09-08 06:29:21.527803', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$XWbuC.8GsYY.X4M0WjVRCecWdRJ2HLHU7kjPwf9M8Kdi0sKFtUHZO', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.527803', '2025-09-08 06:29:21.527803', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:29:21.490215', '2025-09-08 06:29:21.490215'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:29:21.490215', '2025-09-08 06:29:21.490215');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.520186', '2025-09-08 06:29:21.520186'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.520186', '2025-09-08 06:29:21.520186');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$XW18eC5zccOM54FuDCPv8eMD7rgsY16hOMMvQJcixgxcn3VQPXVKm', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.528601', '2025-09-08 06:29:21.528601', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$EEUeb.WC.Puti/Efc1hG5.JzdYx.IditN59ZQrxqF/8.A700.GxwG', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.528601', '2025-09-08 06:29:21.528601', 'EUR', 0.1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:29:21.486091', '2025-09-08 06:29:21.486091'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:29:21.486091', '2025-09-08 06:29:21.486091');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.520584', '2025-09-08 06:29:21.520584'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.520584', '2025-09-08 06:29:21.520584');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$yOqUI2K9SdF/OtU2.nxFIubU.nzHKcJd0S1tpxf7sMuW5cUF8zAL.', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.530044', '2025-09-08 06:29:21.530044', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$JgXlwxZ2AIj/8PggNwbH6uaX7OcWEHt0hs9S7lbaycrDk0I.1Q37C', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.530044', '2025-09-08 06:29:21.530044', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (2.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:29:21.482442', '2025-09-08 06:29:21.482442'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:29:21.482442', '2025-09-08 06:29:21.482442');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.515520', '2025-09-08 06:29:21.515520'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.515520', '2025-09-08 06:29:21.515520');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$00iMTjRhxUg6GKLY2BQJre.xjBP94csnNNj2TnCzabOTvVbqbjztG', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.528083', '2025-09-08 06:29:21.528083', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$lQp07QjdEivEh9tpBRlZuOeUODIyGqhjn2kTrNidE/NgonerFGSIS', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.528083', '2025-09-08 06:29:21.528083', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mFixtures Load (1.6ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:29:21.492381', '2025-09-08 06:29:21.492381'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:29:21.492381', '2025-09-08 06:29:21.492381');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.528225', '2025-09-08 06:29:21.528225'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.528225', '2025-09-08 06:29:21.528225');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$qaDg8.C9uMJegNY6lQ5auOx4VcbUmK4m1RU/TpyhVWSQjCxgbmJHS', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.533857', '2025-09-08 06:29:21.533857', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$Cw/77RmJh5Cd7OA4tKFE5enAEiUpGWB/p.CJ.fr9WwOvVmjsAo61u', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.533857', '2025-09-08 06:29:21.533857', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (6.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (2.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[35m (6.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:29:21.492369', '2025-09-08 06:29:21.492369'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:29:21.492369', '2025-09-08 06:29:21.492369');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.542445', '2025-09-08 06:29:21.542445'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.542445', '2025-09-08 06:29:21.542445');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$0z3OkULuWPYjU1ml5zs3yOwDGKkS2sGZuOXVwkiZrYneQUOmMmlp.', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.547651', '2025-09-08 06:29:21.547651', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$qYfHljTQ8CTMPXs2Ll1kn.OZmvn5w95QnFhT8pzRqd28Bv0cZ6xF.', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.547651', '2025-09-08 06:29:21.547651', 'EUR', 0.1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:29:21.497823', '2025-09-08 06:29:21.497823'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:29:21.497823', '2025-09-08 06:29:21.497823');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.541559', '2025-09-08 06:29:21.541559'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.541559', '2025-09-08 06:29:21.541559');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$4wN3I.K.LJbCLjPpg7./7eYk/bZEBvl7/z7MgWN14ndf0BCuumn26', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.547825', '2025-09-08 06:29:21.547825', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$gxHCt0aHutUEPb0OLXaVWOR6WiqFiLju8FQV2E0pDpkEkjusXAko2', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.547825', '2025-09-08 06:29:21.547825', 'EUR', 0.1)[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES (980190962, 980190962, 'Test Print 1', 'USD', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, 200.0, 0.12, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:29:21.504238', '2025-09-08 06:29:21.504238'), (298486374, 298486374, 'Test Print 2', 'JPY', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, 180.0, 30.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:29:21.504238', '2025-09-08 06:29:21.504238');
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES (980190962, 980190962, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.541195', '2025-09-08 06:29:21.541195'), (298486374, 298486374, 'MyString', 'MyString', 9.99, 9.99, 1, '2025-09-08 13:19:42', '2025-09-08 06:29:21.541195', '2025-09-08 06:29:21.541195');
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$yRQzbBCIK/66gD3pMXyQHe/nOQsXYEbHAjWUDTKBo.lV0ssiVu3ZS', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.547651', '2025-09-08 06:29:21.547651', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$paIuIvjH5WShmYqge16pd.emgmu5Hyt08d8RVmFYlJ/Q08jMdJ9ZW', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:29:21.547651', '2025-09-08 06:29:21.547651', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[35m (2.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (3.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_require_default_currency
----------------------------------------------
---------------------------------------------------------
UserTest: test_should_require_default_energy_cost_per_kwh
---------------------------------------------------------
  [1m[36mTRANSACTION (5.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (6.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (8.3ms)[0m  [1m[35mCOMMIT[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_should_require_positive_default_energy_cost_per_kwh
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
UserTest: test_should_have_default_values_for_new_users
-------------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.597064"], ["updated_at", "2025-09-08 06:29:21.597064"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.604502"], ["updated_at", "2025-09-08 06:29:21.604502"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.5"], ["created_at", "2025-09-08 06:29:21.608311"], ["updated_at", "2025-09-08 06:29:21.608311"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mUser Exists? (5.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.619376"], ["updated_at", "2025-09-08 06:29:21.619376"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.630220"], ["updated_at", "2025-09-08 06:29:21.630220"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.635620"], ["updated_at", "2025-09-08 06:29:21.635620"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.639943"], ["updated_at", "2025-09-08 06:29:21.639943"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.641607"], ["updated_at", "2025-09-08 06:29:21.641607"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.638963"], ["updated_at", "2025-09-08 06:29:21.638963"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.649472"], ["updated_at", "2025-09-08 06:29:21.649472"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
----------------------------------------------
PrintPricingTest: test_should_require_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.661394"], ["updated_at", "2025-09-08 06:29:21.661394"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.657494"], ["updated_at", "2025-09-08 06:29:21.657494"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.663135"], ["updated_at", "2025-09-08 06:29:21.663135"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.663111"], ["updated_at", "2025-09-08 06:29:21.663111"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.668632"], ["updated_at", "2025-09-08 06:29:21.668632"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Create (2.1ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 06:29:21.672140"], ["updated_at", "2025-09-08 06:29:21.672140"]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.679214"], ["updated_at", "2025-09-08 06:29:21.679214"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
Started GET "/" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mTRANSACTION (3.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mUser Load (6.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (5.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrinterTest: test_should_require_positive_payoff_goal_years
-----------------------------------------------------------
  [1m[36mUser Exists? (5.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (3.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.697776"], ["updated_at", "2025-09-08 06:29:21.697776"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by PrintPricingsController#index as HTML
--------------------------------------------------------
PrinterTest: test_should_have_valid_manufacturer_options
--------------------------------------------------------
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.704796"], ["updated_at", "2025-09-08 06:29:21.704796"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (3.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190965], ["job_name", "Test Print"], ["currency", "USD"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "200.0"], ["energy_cost_per_kwh", "0.12"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.716"], ["created_at", "2025-09-08 06:29:21.717731"], ["updated_at", "2025-09-08 06:29:21.717731"]]
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
PrinterTest: test_should_require_name
-------------------------------------
  [1m[36mPrintPricing Create (6.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["currency", "JPY"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", "250.0"], ["energy_cost_per_kwh", "35.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["printer_cost", "300000.0"], ["investment_return_years", 3], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 06:29:21.720468"], ["updated_at", "2025-09-08 06:29:21.720468"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#index as HTML
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/print_pricings/980190963
  [1m[36mPrintPricing Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
Completed 302 Found in 53ms (ActiveRecord: 11.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PrinterTest: test_should_be_valid_with_valid_attributes
-------------------------------------------------------
Completed 401 Unauthorized in 9ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mPrintPricing Load (4.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
  [1m[36mUser Load (8.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#new as HTML
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_true_for_old_printer_past_payoff_goal
-------------------------------------------------------------------------------
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (5.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[31mROLLBACK[0m
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 29.2ms | GC: 0.0ms)
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (3.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
PrinterTest: test_should_set_date_added_automatically
-----------------------------------------------------
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
Completed 404 Not Found in 32ms (ActiveRecord: 5.6ms (1 query, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
----------------------------------------------
PrinterTest: test_should_require_positive_cost
----------------------------------------------
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:137:in 'block in <class:PrintPricingFlowsTest>'
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.7ms | GC: 0.0ms)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 46.9ms | GC: 0.0ms)
  [1m[36mPrinter Create (5.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 06:29:21.767190"], ["created_at", "2025-09-08 06:29:21.773230"], ["updated_at", "2025-09-08 06:29:21.773230"]]
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 12.7ms | GC: 0.0ms)
Completed 200 OK in 76ms (Views: 44.5ms | ActiveRecord: 7.3ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (4.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_false_for_new_printer
---------------------------------------------------------------
-------------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_correct_months_remaining
-------------------------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 25.0ms | GC: 0.0ms)
Processing by PrintPricingsController#new as HTML
Completed 200 OK in 49ms (Views: 37.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 06:29:21.794841"], ["created_at", "2025-09-08 06:29:21.794937"], ["updated_at", "2025-09-08 06:29:21.794937"]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.3ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 06:29:21.797654"], ["created_at", "2025-09-08 06:29:21.798343"], ["updated_at", "2025-09-08 06:29:21.798343"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 8.0ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (2.9ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2024-09-08 06:29:21.795666"], ["created_at", "2025-09-08 06:29:21.800116"], ["updated_at", "2025-09-08 06:29:21.800116"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Started POST "/users" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 13.4ms | GC: 0.0ms)
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  Rendered layout layouts/application.html.erb (Duration: 14.8ms | GC: 0.0ms)
Completed 200 OK in 24ms (Views: 15.3ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.824491"], ["updated_at", "2025-09-08 06:29:21.824491"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
Redirected to http://www.example.com/
Completed 303 See Other in 10ms (ActiveRecord: 4.4ms (2 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "currency" => "EUR", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "power_consumption" => "150", "energy_cost_per_kwh" => "0.15", "vat_percentage" => "21.0"}}
Started GET "/" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
PrinterTest: test_should_belong_to_user
---------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["currency", "EUR"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["power_consumption", "150.0"], ["energy_cost_per_kwh", "0.15"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.09405625"], ["created_at", "2025-09-08 06:29:21.842737"], ["updated_at", "2025-09-08 06:29:21.842737"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 21ms (ActiveRecord: 1.2ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190964], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 9.1ms | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
-----------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_0_for_paid_off_printer
-----------------------------------------------------------------------
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
Processing by PrintPricingsController#index as HTML
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  Rendered layout layouts/application.html.erb (Duration: 13.5ms | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
Completed 200 OK in 25ms (Views: 14.2ms | ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 0.0ms)
-----------------------------------------------------------
PrinterTest: test_should_require_positive_power_consumption
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered layout layouts/application.html.erb (Duration: 82.0ms | GC: 0.0ms)
Completed 200 OK in 123ms (Views: 84.4ms | ActiveRecord: 8.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.9ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 11.5ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (21.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 06:29:21.866901"], ["created_at", "2025-09-08 06:29:21.870626"], ["updated_at", "2025-09-08 06:29:21.870626"]]
  Rendered layout layouts/application.html.erb (Duration: 18.8ms | GC: 0.0ms)
Completed 200 OK in 38ms (Views: 18.8ms | ActiveRecord: 1.6ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (1.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.5ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "final_price" = $3, "updated_at" = $4 WHERE "print_pricings"."id" = $5[0m  [["job_name", "Updated Job Name"], ["currency", "GBP"], ["final_price", "1.716"], ["updated_at", "2025-09-08 06:29:21.900642"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 21ms (ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 0.0ms)
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 42.0ms | GC: 0.0ms)
  [1m[36mUser Create (4.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:29:21.914584"], ["updated_at", "2025-09-08 06:29:21.914584"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[31mROLLBACK[0m
  Rendered layout layouts/application.html.erb (Duration: 44.6ms | GC: 0.0ms)
Completed 200 OK in 66ms (Views: 44.9ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190963/edit" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
Processing by PrintPricingsController#create as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  [1m[36mPrintPricing Load (0.9ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 11.2ms | GC: 0.0ms)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 8.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.1ms | GC: 0.0ms)
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
  Rendered layout layouts/application.html.erb (Duration: 33.6ms | GC: 0.0ms)
Completed 200 OK in 80ms (Views: 36.2ms | ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (3.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 9.5ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
  [1m[36mPrintPricing Create (1.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Other User's Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.69"], ["created_at", "2025-09-08 06:29:21.926697"], ["updated_at", "2025-09-08 06:29:21.926697"]]
Started PATCH "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190963"}
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mCACHE PrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (2.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (ActiveRecord: 2.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Update (1.9ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "currency" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Flow Test Print"], ["currency", "GBP"], ["updated_at", "2025-09-08 06:29:21.949363"], ["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintPricingsController#index as HTML
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:116:in 'block in <class:PrintPricingsControllerTest>'
  Rendered layout layouts/application.html.erb (Duration: 9.6ms | GC: 0.0ms)
Completed 200 OK in 15ms (Views: 10.6ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 24.8ms | GC: 0.0ms)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (1.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 22ms (ActiveRecord: 2.0ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendered layout layouts/application.html.erb (Duration: 30.6ms | GC: 0.0ms)
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
Completed 422 Unprocessable Content in 42ms (Views: 33.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#update as HTML
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
  [1m[36mPrintPricing Create (2.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Integration Test Print"], ["currency", "USD"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.621"], ["created_at", "2025-09-08 06:29:21.964694"], ["updated_at", "2025-09-08 06:29:21.964694"]]
Processing by PrintPricingsController#new as HTML
  [1m[36mTRANSACTION (7.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (4.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[35mBEGIN[0m
  Rendering layout layouts/application.html.erb
  [1m[36mPrintPricing Load (10.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 3.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.1ms | GC: 0.0ms)
Completed 200 OK in 24ms (Views: 6.5ms | ActiveRecord: 4.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:29:21 +0900
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (3.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 61ms (ActiveRecord: 11.0ms (2 queries, 1 cached) | GC: 0.0ms)
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 8.9ms | GC: 0.0ms)
  [1m[36mPrintPricing Count (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
  Rendered layout layouts/application.html.erb (Duration: 16.8ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mPrintPricing Destroy (1.9ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
Processing by PrintPricingsController#create as HTML
Completed 200 OK in 43ms (Views: 22.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (1.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 21ms (ActiveRecord: 5.7ms (2 queries, 0 cached) | GC: 0.0ms)
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 19.7ms | GC: 0.0ms)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_edit
------------------------------------------------
  Rendered layout layouts/application.html.erb (Duration: 26.9ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.6ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 17ms (ActiveRecord: 1.1ms (3 queries, 2 cached) | GC: 0.0ms)
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
Completed 422 Unprocessable Content in 64ms (Views: 36.2ms | ActiveRecord: 10.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
  [1m[36mPrintPricing Count (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
-------------------------------------------------
  [1m[36mPrintPricing Count (6.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/profile/edit" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (5.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (4.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by UserProfilesController#edit as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  [1m[36mPrintPricing Create (7.1ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "currency", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "power_consumption", "energy_cost_per_kwh", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "printer_cost", "investment_return_years", "daily_usage_hours", "repair_cost_percentage", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["currency", "EUR"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["power_consumption", nil], ["energy_cost_per_kwh", nil], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["printer_cost", nil], ["investment_return_years", nil], ["daily_usage_hours", nil], ["repair_cost_percentage", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 06:29:22.038322"], ["updated_at", "2025-09-08 06:29:22.038322"]]
  [1m[36mPrintPricing Load (1.9ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190964], ["id", 980190963], ["LIMIT", 1]]
  Rendering user_profiles/edit.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mPrintPricing Load (2.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered user_profiles/edit.html.erb within layouts/application (Duration: 8.0ms | GC: 0.0ms)
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
  Rendered layout layouts/application.html.erb (Duration: 9.5ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 10.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserProfilesControllerTest: test_should_update_user_profile
-----------------------------------------------------------
Redirected to http://www.example.com/print_pricings/980190964
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 11.9ms | GC: 0.0ms)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
Completed 302 Found in 53ms (ActiveRecord: 11.9ms (1 query, 0 cached) | GC: 0.0ms)
Started PATCH "/profile" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered layout layouts/application.html.erb (Duration: 15.4ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 16.1ms | ActiveRecord: 2.4ms (2 queries, 0 cached) | GC: 0.0ms)
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 19.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.4ms | GC: 0.0ms)
Completed 200 OK in 27ms (Views: 16.1ms | ActiveRecord: 5.5ms (4 queries, 0 cached) | GC: 0.0ms)
Processing by UserProfilesController#update as HTML
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[31mROLLBACK[0m
  Parameters: {"user" => {"default_currency" => "EUR", "default_energy_cost_per_kwh" => "0.15"}}
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendering layout layouts/application.html.erb
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  Rendering print_pricings/edit.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_show
------------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
Started GET "/profile" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 9.8ms | GC: 0.0ms)
--------------------------------------------------------------
UserProfilesControllerTest: test_should_require_authentication
--------------------------------------------------------------
Processing by UserProfilesController#show as HTML
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/show.html.erb within layouts/application
  Rendered user_profiles/show.html.erb within layouts/application (Duration: 3.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-08 06:29:22.081255"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/profile" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
  Rendered layout layouts/application.html.erb (Duration: 22.8ms | GC: 0.0ms)
Completed 200 OK in 44ms (Views: 28.6ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CurrencyHelperTest: test_zero_decimal_currencies_returns_JPY
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 39ms (ActiveRecord: 3.0ms (1 query, 0 cached) | GC: 0.0ms)
Processing by UserProfilesController#show as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (4.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_symbol_returns_correct_symbols
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CurrencyHelperTest: test_currency_decimals_returns_correct_decimal_places
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CurrencyHelperTest: test_format_currency_handles_different_currencies_correctly
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_options_returns_correct_format
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
CurrencyHelperTest: test_currency_sample_values_returns_appropriate_values
--------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PrintersControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PrintersControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintersControllerTest: test_should_update_printer
--------------------------------------------------
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
----------------------------------------------------------
PrintersControllerTest: test_should_require_authentication
----------------------------------------------------------
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/printers/980190962" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
  [1m[36mPrinter Load (1.0ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintersControllerTest: test_should_create_printer
--------------------------------------------------
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#update as HTML
  Parameters: {"printer" => {"name" => "Updated Printer Name", "power_consumption" => "250"}, "id" => "980190962"}
Started GET "/printers" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#index as HTML
Started GET "/printers" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
  [1m[36mPrinter Load (4.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (3.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering printers/index.html.erb within layouts/application
  Rendered printers/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Started GET "/printers/new" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
Completed 200 OK in 5ms (Views: 3.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Count (1.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
------------------------------------------------
PrintersControllerTest: test_should_show_printer
------------------------------------------------
Started POST "/printers" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintersController#create as HTML
  Parameters: {"printer" => {"name" => "Test Printer", "manufacturer" => "Prusa", "power_consumption" => "200", "cost" => "500", "payoff_goal_years" => "3"}}
Processing by PrintersController#index as HTML
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#new as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (2.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering printers/new.html.erb within layouts/application
  Rendered printers/new.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mPrinter Create (2.3ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 06:29:22.197414"], ["created_at", "2025-09-08 06:29:22.197623"], ["updated_at", "2025-09-08 06:29:22.197623"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
Redirected to http://www.example.com/printers/980190964
  Rendered layout layouts/application.html.erb (Duration: 1.2ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 1.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started GET "/printers/980190962" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
Completed 302 Found in 7ms (ActiveRecord: 4.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Processing by PrintersController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" ORDER BY "printers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintersControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
---------------------------------------------------
PrintersControllerTest: test_should_destroy_printer
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
---------------------------------------------------
Started GET "/printers/980190962/edit" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering printers/show.html.erb within layouts/application
  Rendered printers/show.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 0.9ms | GC: 0.0ms)
  [1m[36mPrinter Update (0.5ms)[0m  [1m[33mUPDATE "printers" SET "name" = $1, "power_consumption" = $2, "updated_at" = $3 WHERE "printers"."id" = $4[0m  [["name", "Updated Printer Name"], ["power_consumption", "250.0"], ["updated_at", "2025-09-08 06:29:22.187037"], ["id", 980190962]]
Completed 200 OK in 7ms (Views: 1.3ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (2.8ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering printers/edit.html.erb within layouts/application
  Rendered printers/edit.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 2.5ms | ActiveRecord: 2.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Count (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Started DELETE "/printers/980190962" for 127.0.0.1 at 2025-09-08 15:29:22 +0900
Redirected to http://www.example.com/printers/980190962
Completed 302 Found in 48ms (ActiveRecord: 5.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.9ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (1.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Destroy (4.0ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (10.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/printers
Completed 302 Found in 26ms (ActiveRecord: 15.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (47.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test"[0m
  [1m[35m (52.1ms)[0m  [1m[35mCREATE DATABASE "print_calc_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "investment_return_years" integer DEFAULT 3, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908063852)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:43:39.833656', '2025-09-08 06:43:39.833657') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '151561e862f1d785a7ac3c08159d230535997084', '2025-09-08 06:43:39.836959', '2025-09-08 06:43:39.836960') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35mSQL (0.2ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (51.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-0"[0m
  [1m[35m (114.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-3"[0m
  [1m[35m (111.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-5"[0m
  [1m[35m (110.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-6"[0m
  [1m[35m (118.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-4"[0m
  [1m[35m (123.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-2"[0m
  [1m[35m (111.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-7"[0m
  [1m[35m (125.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-1"[0m
  [1m[35m (106.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-8"[0m
  [1m[35m (120.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-9"[0m
  [1m[35m (306.9ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-0" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (74.3ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "investment_return_years" integer DEFAULT 3, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (347.7ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-6" ENCODING = 'unicode'[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (346.8ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-1" ENCODING = 'unicode'[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (345.5ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-7" ENCODING = 'unicode'[0m
  [1m[35m (353.3ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-3" ENCODING = 'unicode'[0m
  [1m[35m (349.5ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-2" ENCODING = 'unicode'[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (352.1ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-4" ENCODING = 'unicode'[0m
  [1m[35m (351.3ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-8" ENCODING = 'unicode'[0m
  [1m[35m (356.5ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-5" ENCODING = 'unicode'[0m
  [1m[35m (344.5ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-9" ENCODING = 'unicode'[0m
  [1m[36mActiveRecord::SchemaMigration Load (5.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908063852)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:43:40.457690', '2025-09-08 06:43:40.457694') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (18.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (19.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (15.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (14.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35mSQL (17.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '151561e862f1d785a7ac3c08159d230535997084', '2025-09-08 06:43:40.466056', '2025-09-08 06:43:40.466059') RETURNING "key"[0m
  [1m[35mSQL (17.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (21.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (21.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35mSQL (23.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "investment_return_years" integer DEFAULT 3, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "investment_return_years" integer DEFAULT 3, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "investment_return_years" integer DEFAULT 3, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "investment_return_years" integer DEFAULT 3, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "investment_return_years" integer DEFAULT 3, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "investment_return_years" integer DEFAULT 3, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "investment_return_years" integer DEFAULT 3, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "investment_return_years" integer DEFAULT 3, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "investment_return_years" integer DEFAULT 3, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908063852)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908063852)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908063852)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908063852)[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908063852)[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908063852)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908063852)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:43:40.503136', '2025-09-08 06:43:40.503138') RETURNING "key"[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908063852)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:43:40.503744', '2025-09-08 06:43:40.503745') RETURNING "key"[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '151561e862f1d785a7ac3c08159d230535997084', '2025-09-08 06:43:40.505399', '2025-09-08 06:43:40.505400') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:43:40.505388', '2025-09-08 06:43:40.505390') RETURNING "key"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:43:40.505444', '2025-09-08 06:43:40.505446') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:43:40.506161', '2025-09-08 06:43:40.506164') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '151561e862f1d785a7ac3c08159d230535997084', '2025-09-08 06:43:40.507585', '2025-09-08 06:43:40.507586') RETURNING "key"[0m
  [1m[35m (1.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250908063852)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:43:40.508254', '2025-09-08 06:43:40.508255') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:43:40.507231', '2025-09-08 06:43:40.507233') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:43:40.507008', '2025-09-08 06:43:40.507010') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '151561e862f1d785a7ac3c08159d230535997084', '2025-09-08 06:43:40.508378', '2025-09-08 06:43:40.508380') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '151561e862f1d785a7ac3c08159d230535997084', '2025-09-08 06:43:40.510843', '2025-09-08 06:43:40.510844') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '151561e862f1d785a7ac3c08159d230535997084', '2025-09-08 06:43:40.510928', '2025-09-08 06:43:40.510930') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '151561e862f1d785a7ac3c08159d230535997084', '2025-09-08 06:43:40.512757', '2025-09-08 06:43:40.512758') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '151561e862f1d785a7ac3c08159d230535997084', '2025-09-08 06:43:40.514326', '2025-09-08 06:43:40.514328') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (5.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '151561e862f1d785a7ac3c08159d230535997084', '2025-09-08 06:43:40.512177', '2025-09-08 06:43:40.512178') RETURNING "key"[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-08 06:43:40.528205', '2025-09-08 06:43:40.528208') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '151561e862f1d785a7ac3c08159d230535997084', '2025-09-08 06:43:40.533824', '2025-09-08 06:43:40.533826') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (25.3ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTruncate Tables (27.2ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTruncate Tables (25.0ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (26.2ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTruncate Tables (22.8ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTruncate Tables (24.0ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (23.7ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (23.9ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (21.9ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (22.9ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (2.3ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:44:14.189332', '2025-09-08 06:44:14.189332', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:44:14.189332', '2025-09-08 06:44:14.189332', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 06:44:14.212321', '2025-09-08 06:44:14.212321', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 06:44:14.212321', '2025-09-08 06:44:14.212321', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$Hx4zUjhyBJKGk47gxr.Xq.wJZkCTWEyxghZaZxyzuF1Zsm.2IWZhG', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.218594', '2025-09-08 06:44:14.218594', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$4Nls89I26g0n5WKfnsCjlu89YcJCDXd7Ognvg3U2pT/eylyxanssm', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.218594', '2025-09-08 06:44:14.218594', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:44:14.191547', '2025-09-08 06:44:14.191547', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:44:14.191547', '2025-09-08 06:44:14.191547', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 06:44:14.220084', '2025-09-08 06:44:14.220084', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 06:44:14.220084', '2025-09-08 06:44:14.220084', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$oJ05v2TtXeQKdjLR6g6d/uqqgyJAh09/DACS1t47h8bvrihGEcAkS', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.224160', '2025-09-08 06:44:14.224160', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$tdm4Q6EH0ZcK/xLOKR2TpeY6JP64EYcvEemF2sHZljonJYWqWkrkC', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.224160', '2025-09-08 06:44:14.224160', 'EUR', 0.1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (5.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mFixtures Load (2.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:44:14.196710', '2025-09-08 06:44:14.196710', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:44:14.196710', '2025-09-08 06:44:14.196710', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 06:44:14.221655', '2025-09-08 06:44:14.221655', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 06:44:14.221655', '2025-09-08 06:44:14.221655', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$eRSNUgl48ISVMWxM8QpemeTqH2SuXXyi9yA4ctEg4lBvbw.jMWv0K', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.225630', '2025-09-08 06:44:14.225630', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$FojSlP3bXWLhfHexH3WxCOvyTJoMAie.CZejAIjJhXd30J3DunjCC', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.225630', '2025-09-08 06:44:14.225630', 'EUR', 0.1)[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:44:14.196673', '2025-09-08 06:44:14.196673', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:44:14.196673', '2025-09-08 06:44:14.196673', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 06:44:14.222442', '2025-09-08 06:44:14.222442', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 06:44:14.222442', '2025-09-08 06:44:14.222442', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$xZ9X4dqQQUjpyJzAQD.zSuVcBQarWU3QC2v4gFznPlvn2JE0pnfyS', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.228534', '2025-09-08 06:44:14.228534', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$I3H2iBb1ZfHmjnWyUdu7A.QVUctm6IeS7G3DxBtVwOSRaoCPhz3u2', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.228534', '2025-09-08 06:44:14.228534', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:44:14.194217', '2025-09-08 06:44:14.194217', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:44:14.194217', '2025-09-08 06:44:14.194217', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 06:44:14.226225', '2025-09-08 06:44:14.226225', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 06:44:14.226225', '2025-09-08 06:44:14.226225', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$5PuaMsP1EG7sQk7IBmgZG.illh0cvq6GSwGnLoNuScb3VBl2YPfua', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.230261', '2025-09-08 06:44:14.230261', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$U2Yq/kelbpEyKKK.W8GftuX15t40GEeC/xPXs/zN.oo7fYTB.WUfu', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.230261', '2025-09-08 06:44:14.230261', 'EUR', 0.1)[0m
  [1m[36mFixtures Load (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:44:14.199584', '2025-09-08 06:44:14.199584', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:44:14.199584', '2025-09-08 06:44:14.199584', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 06:44:14.228102', '2025-09-08 06:44:14.228102', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 06:44:14.228102', '2025-09-08 06:44:14.228102', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$6Am23ATo/SIKmgXlV98LQObZ7O56cm9kpt8rGmKDDKKb2Hw3h8WkG', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.231313', '2025-09-08 06:44:14.231313', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$J0.bb.I.xQuTH.Utg.r6veUKKs.aAqy7g1BRiXX52vqlrIG3181Xe', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.231313', '2025-09-08 06:44:14.231313', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (4.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mFixtures Load (1.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:44:14.200387', '2025-09-08 06:44:14.200387', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:44:14.200387', '2025-09-08 06:44:14.200387', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 06:44:14.228221', '2025-09-08 06:44:14.228221', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 06:44:14.228221', '2025-09-08 06:44:14.228221', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$W.2vi2feelaOjyddHnYylOiXcjWLJCmskptczOyvoVFixP/VBW766', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.232754', '2025-09-08 06:44:14.232754', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$FL48CovrEEFSX8fJsJ5t0OkaXyj2uWb67NLfdTIKfhiitDFd2xc9m', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.232754', '2025-09-08 06:44:14.232754', 'EUR', 0.1)[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
---------------------------------------------------------
UserTest: test_should_require_default_energy_cost_per_kwh
---------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:44:14.200302', '2025-09-08 06:44:14.200302', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:44:14.200302', '2025-09-08 06:44:14.200302', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 06:44:14.229942', '2025-09-08 06:44:14.229942', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 06:44:14.229942', '2025-09-08 06:44:14.229942', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$46hn97xC7qzoO2YssawukuIxsAbcYA0l762Y46yVsqzNz6n2tmGkC', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.233795', '2025-09-08 06:44:14.233795', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$x9VytJ2l0Sj5MMhZujfO.uyX8Tuh4YLiXIVbe0d/R52lIDNft1Dbm', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.233795', '2025-09-08 06:44:14.233795', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (3.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:44:14.207860', '2025-09-08 06:44:14.207860', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:44:14.207860', '2025-09-08 06:44:14.207860', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 06:44:14.231928', '2025-09-08 06:44:14.231928', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 06:44:14.231928', '2025-09-08 06:44:14.231928', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$uIS08.MCfYI3L.FW6D0elOim9dXyonlge4Aa0HyMdCrqwzfPDOGKK', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.238542', '2025-09-08 06:44:14.238542', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$iV16V6OPzzY0vLYpJAgJKOqIeRAwcFb.rz8HliWUi.8AWnPVlx1xi', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.238542', '2025-09-08 06:44:14.238542', 'EUR', 0.1)[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
------------------------------------------------------------------
UserTest: test_should_require_positive_default_energy_cost_per_kwh
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserProfilesControllerTest: test_should_require_authentication
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
-------------------------------------------------------
UserTest: test_should_have_default_values_for_new_users
-------------------------------------------------------
  [1m[35m (5.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (3.2ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 06:44:14.211271', '2025-09-08 06:44:14.211271', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 06:44:14.211271', '2025-09-08 06:44:14.211271', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 06:44:14.240417', '2025-09-08 06:44:14.240417', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 06:44:14.240417', '2025-09-08 06:44:14.240417', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$8J0dx.Cc8xB5ST.LEGx4.OG7rj9Yp5W0LHX4RDMMdhewRdq9MCfYi', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.247175', '2025-09-08 06:44:14.247175', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$KLdiQSPWQtMl5ymRmazWwetG0.amm5/u9OYLEJiP8tt8t7fWDoWe6', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 06:44:14.247175', '2025-09-08 06:44:14.247175', 'EUR', 0.1)[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_show
------------------------------------------------
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserProfilesControllerTest: test_should_update_user_profile
-----------------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[35m (5.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.273369"], ["updated_at", "2025-09-08 06:44:14.273369"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_edit
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_require_default_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.284305"], ["updated_at", "2025-09-08 06:44:14.284305"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
-----------------------------------------------------------
PrinterTest: test_should_require_positive_payoff_goal_years
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/profile" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/profile" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
Started PATCH "/profile" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
PrinterTest: test_should_belong_to_user
---------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrinterTest: test_should_require_positive_cost
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_false_for_new_printer
---------------------------------------------------------------
-------------------------------------------------------
PrinterTest: test_should_be_valid_with_valid_attributes
-------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
PrinterTest: test_months_to_payoff_should_return_correct_months_remaining
-------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
-----------------------------------------------------------
PrinterTest: test_should_require_positive_power_consumption
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by UserProfilesController#show as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.9ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 06:44:14.327640"], ["created_at", "2025-09-08 06:44:14.327766"], ["updated_at", "2025-09-08 06:44:14.327766"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/profile/edit" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by UserProfilesController#show as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PrinterTest: test_should_have_valid_manufacturer_options
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
PrinterTest: test_should_require_name
-------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
PrinterTest: test_should_set_date_added_automatically
--------------------------------------------------------
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2024-09-08 06:44:14.334454"], ["created_at", "2025-09-08 06:44:14.335471"], ["updated_at", "2025-09-08 06:44:14.335471"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/show.html.erb within layouts/application
PrinterTest: test_months_to_payoff_should_return_0_for_paid_off_printer
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
-----------------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_true_for_old_printer_past_payoff_goal
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
-------------------------------------------------------------------------------
Completed 401 Unauthorized in 6ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendered user_profiles/show.html.erb within layouts/application (Duration: 2.3ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by UserProfilesController#update as HTML
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 06:44:14.339647"], ["created_at", "2025-09-08 06:44:14.339669"], ["updated_at", "2025-09-08 06:44:14.339669"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  Parameters: {"user" => {"default_currency" => "EUR", "default_energy_cost_per_kwh" => "0.15"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 06:44:14.340427"], ["created_at", "2025-09-08 06:44:14.341711"], ["updated_at", "2025-09-08 06:44:14.341711"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 06:44:14.341281"], ["created_at", "2025-09-08 06:44:14.342504"], ["updated_at", "2025-09-08 06:44:14.342504"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
---------------------------------------------------
PrintersControllerTest: test_should_destroy_printer
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  Rendered layout layouts/application.html.erb (Duration: 10.0ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintersControllerTest: test_should_update_printer
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 20ms (Views: 12.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-08 06:44:14.348542"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/profile
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Completed 302 Found in 8ms (ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
----------------------------------------------------------
PrintersControllerTest: test_should_require_authentication
----------------------------------------------------------
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
PrintersControllerTest: test_should_show_printer
------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by UserProfilesController#edit as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintersControllerTest: test_should_get_edit
--------------------------------------------
Started PATCH "/printers/980190962" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintersControllerTest: test_should_create_printer
--------------------------------------------------
---------------------------------------------
PrintersControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
----------------------------------------------------------------
CurrencyHelperTest: test_currency_options_returns_correct_format
----------------------------------------------------------------
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#update as HTML
  Parameters: {"printer" => {"name" => "Updated Printer Name", "power_consumption" => "250"}, "id" => "980190962"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PrintersControllerTest: test_should_get_new
-------------------------------------------
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendering user_profiles/edit.html.erb within layouts/application
------------------------------------------------------------
CurrencyHelperTest: test_zero_decimal_currencies_returns_JPY
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendered user_profiles/edit.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
Started GET "/printers" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Update (1.9ms)[0m  [1m[33mUPDATE "printers" SET "name" = $1, "power_consumption" = $2, "updated_at" = $3 WHERE "printers"."id" = $4[0m  [["name", "Updated Printer Name"], ["power_consumption", "250.0"], ["updated_at", "2025-09-08 06:44:14.368192"], ["id", 980190962]]
  Rendered layout layouts/application.html.erb (Duration: 6.8ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 18ms (Views: 8.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
Redirected to http://www.example.com/printers/980190962
CurrencyHelperTest: test_currency_sample_values_returns_appropriate_values
--------------------------------------------------------------------------
Completed 302 Found in 12ms (ActiveRecord: 3.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CurrencyHelperTest: test_format_currency_handles_different_currencies_correctly
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintersController#index as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CurrencyHelperTest: test_currency_decimals_returns_correct_decimal_places
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_symbol_returns_correct_symbols
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendering printers/index.html.erb within layouts/application
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "printers" WHERE "printers"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mPrinter Load (0.7ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (1.0ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 ORDER BY "printers"."name" ASC[0m  [["user_id", 980190962]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mPrinter Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Started DELETE "/printers/980190962" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  Rendered printers/index.html.erb within layouts/application (Duration: 4.5ms | GC: 0.0ms)
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  Rendered layout layouts/application.html.erb (Duration: 9.0ms | GC: 0.0ms)
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
Completed 200 OK in 13ms (Views: 8.1ms | ActiveRecord: 1.4ms (2 queries, 0 cached) | GC: 0.0ms)
Completed 401 Unauthorized in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
[31mUnpermitted parameters: :currency, :power_consumption, :energy_cost_per_kwh, :printer_cost, :investment_return_years, :daily_usage_hours, :repair_cost_percentage. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x000000011f755c90>, params: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
Processing by Devise::RegistrationsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mPrinter Load (1.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers/new" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 4.1ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 4.9ms | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 7ms (Views: 5.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/users" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by Devise::RegistrationsController#create as HTML
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers/980190962/edit" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.405243"], ["updated_at", "2025-09-08 06:44:14.405243"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrintPricing Create (1.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4633.75"], ["created_at", "2025-09-08 06:44:14.403516"], ["updated_at", "2025-09-08 06:44:14.403516"], ["printer_id", nil]]
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Redirected to http://www.example.com/print_pricings/980190963
  [1m[36mPrintPricing Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
Started GET "/printers/980190962" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
Completed 302 Found in 17ms (ActiveRecord: 3.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Processing by PrintersController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.410709"], ["updated_at", "2025-09-08 06:44:14.410709"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
Started POST "/printers" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 20.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.4ms | GC: 0.0ms)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 1.7ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (1.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190962]]
Processing by PrintersController#new as HTML
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.424067"], ["updated_at", "2025-09-08 06:44:14.424067"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by PrintersController#index as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/
Processing by PrintersController#show as HTML
Completed 303 See Other in 20ms (ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.0ms)
  Parameters: {"id" => "980190962"}
Processing by PrintersController#edit as HTML
  Parameters: {"id" => "980190962"}
Started GET "/" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by PrintPricingsController#index as HTML
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.429523"], ["updated_at", "2025-09-08 06:44:14.429523"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering printers/new.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 401 Unauthorized in 8ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.434450"], ["updated_at", "2025-09-08 06:44:14.434450"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendered printers/new.html.erb within layouts/application (Duration: 4.4ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mPrinter Destroy (0.4ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190962]]
  Rendering layout layouts/application.html.erb
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | GC: 0.0ms)
Completed 200 OK in 18ms (Views: 11.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendering printers/edit.html.erb within layouts/application
  Rendered printers/edit.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/printers
Completed 302 Found in 32ms (ActiveRecord: 2.5ms (4 queries, 0 cached) | GC: 0.0ms)
Processing by PrintersController#create as HTML
  Parameters: {"printer" => {"name" => "Test Printer", "manufacturer" => "Prusa", "power_consumption" => "200", "cost" => "500", "payoff_goal_years" => "3"}}
  Rendering layout layouts/application.html.erb
  Rendering printers/show.html.erb within layouts/application
  Rendered printers/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | GC: 0.0ms)
Completed 200 OK in 18ms (Views: 6.9ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190963], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 6.2ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  Rendered layout layouts/application.html.erb (Duration: 7.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.4ms | GC: 0.0ms)
Completed 200 OK in 22ms (Views: 6.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
Completed 200 OK in 22ms (Views: 8.6ms | ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by PrintPricingsController#new as HTML
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 06:44:14.451053"], ["created_at", "2025-09-08 06:44:14.451077"], ["updated_at", "2025-09-08 06:44:14.451077"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/printers/980190964
Completed 302 Found in 9ms (ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_currency
----------------------------------------------
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" ORDER BY "printers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.459798"], ["updated_at", "2025-09-08 06:44:14.459798"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.459094"], ["updated_at", "2025-09-08 06:44:14.459094"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.461479"], ["updated_at", "2025-09-08 06:44:14.461479"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.462787"], ["updated_at", "2025-09-08 06:44:14.462787"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 3.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.1ms | GC: 0.0ms)
Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.0ms (1 query, 1 cached) | GC: 0.0ms)
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.461633"], ["updated_at", "2025-09-08 06:44:14.461633"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.463000"], ["updated_at", "2025-09-08 06:44:14.463000"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.467258"], ["updated_at", "2025-09-08 06:44:14.467258"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.462112"], ["updated_at", "2025-09-08 06:44:14.462112"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.465682"], ["updated_at", "2025-09-08 06:44:14.465682"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.474310"], ["updated_at", "2025-09-08 06:44:14.474310"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.476966"], ["updated_at", "2025-09-08 06:44:14.476966"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#index as HTML
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x00000001249be1a8>, params: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x000000012197b2c0>, params: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}, "controller" => "print_pricings", "action" => "create"} }[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 2.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (4.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 06:44:14.497508"], ["updated_at", "2025-09-08 06:44:14.497508"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (1.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 06:44:14.497736"], ["updated_at", "2025-09-08 06:44:14.497736"], ["printer_id", nil]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (1.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
PrintPricingsControllerTest - test_should_not_create_print_pricing_with_invalid_params: ActionView::Template::Error raised.
If you expected this exception, use `assert_raises` as near to the code that raises as possible.
Other block based assertions (e.g. `assert_difference`) can be used, as long as `assert_raises` is inside their block.

  Rendering print_pricings/show.html.erb within layouts/application
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-08 15:44:14 +0900
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x000000011f714b00>, params: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190962"} }[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 2.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | GC: 0.0ms)
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering print_pricings/edit.html.erb within layouts/application
  [1m[36mPrintPricing Destroy (1.6ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 22ms (ActiveRecord: 1.7ms (1 query, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
Redirected to http://www.example.com/print_pricings
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
Completed 302 Found in 24ms (ActiveRecord: 3.0ms (2 queries, 0 cached) | GC: 0.0ms)
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Count (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (1.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 13.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.6ms | GC: 0.0ms)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 2.1ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Update (0.9ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "final_price" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Job Name"], ["final_price", "1.84784931506849315068493150684931375"], ["updated_at", "2025-09-08 06:44:14.514143"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 45ms (ActiveRecord: 1.2ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (21.3ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (18.1ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (20.8ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (18.5ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (22.9ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (18.5ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (18.8ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (18.6ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (17.1ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (16.6ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (2.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:33:08.422606', '2025-09-08 23:33:08.422606', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:33:08.422606', '2025-09-08 23:33:08.422606', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:33:08.442932', '2025-09-08 23:33:08.442932', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:33:08.442932', '2025-09-08 23:33:08.442932', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$wYU8H9kgNeaY6qqUCE9zPeDbBduKteVi3cWCkbtb66YDhK529.SHu', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.446940', '2025-09-08 23:33:08.446940', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$gcSxV.elhapPLVdNe38ORuPzZ.xZKCCsbOLw01.LkHsuzAwTXPKmm', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.446940', '2025-09-08 23:33:08.446940', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:33:08.426847', '2025-09-08 23:33:08.426847', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:33:08.426847', '2025-09-08 23:33:08.426847', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:33:08.444963', '2025-09-08 23:33:08.444963', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:33:08.444963', '2025-09-08 23:33:08.444963', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$Re9BRhvyI3RxYDaKvuh4c.og.m4BlxOQ3glyaSP7/JBca4p3bSjUu', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.447853', '2025-09-08 23:33:08.447853', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$63TRH0c9HOoD9B9lzIZobudAQyetJ/gvNsHvLrO.OuHgLJIoMUA2W', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.447853', '2025-09-08 23:33:08.447853', 'EUR', 0.1)[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:33:08.424939', '2025-09-08 23:33:08.424939', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:33:08.424939', '2025-09-08 23:33:08.424939', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:33:08.446419', '2025-09-08 23:33:08.446419', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:33:08.446419', '2025-09-08 23:33:08.446419', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$XN9p9411mstk./n4agLJKO9sH/ynyPAlARjDst3rZ6Zurckfu7unC', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.450775', '2025-09-08 23:33:08.450775', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$jh7p3jm2Q/nr8TDPAHDvru7daquZ/a3OkRR1IxkzxgVs.c7FUa5Za', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.450775', '2025-09-08 23:33:08.450775', 'EUR', 0.1)[0m
  [1m[36mFixtures Load (1.6ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:33:08.428442', '2025-09-08 23:33:08.428442', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:33:08.428442', '2025-09-08 23:33:08.428442', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:33:08.446608', '2025-09-08 23:33:08.446608', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:33:08.446608', '2025-09-08 23:33:08.446608', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$Y15spPqxHeaB4/8n/.Caw.WuNxaAnQEX4G3ZpC4A/clSUEqN1VBz2', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.449479', '2025-09-08 23:33:08.449479', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$UlsWdTb01NwbwhAP0d/veeHQZllEhE4ojkWXf7S.Pn0BnQcd7j4Em', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.449479', '2025-09-08 23:33:08.449479', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (4.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (3.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (2.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mFixtures Load (0.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:33:08.431373', '2025-09-08 23:33:08.431373', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:33:08.431373', '2025-09-08 23:33:08.431373', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:33:08.451516', '2025-09-08 23:33:08.451516', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:33:08.451516', '2025-09-08 23:33:08.451516', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$U5YuVtXsP0sf8KMc6trGWeJ9gQaYfR/r7hwKE7LDjpM3ZrIZ0HO8O', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.456145', '2025-09-08 23:33:08.456145', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$R9w8ZIXvgq0vz2LbTq3exexee2b1vOYCbQgSVW864iRMhdPMh7pjK', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.456145', '2025-09-08 23:33:08.456145', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mFixtures Load (1.4ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:33:08.432918', '2025-09-08 23:33:08.432918', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:33:08.432918', '2025-09-08 23:33:08.432918', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:33:08.450984', '2025-09-08 23:33:08.450984', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:33:08.450984', '2025-09-08 23:33:08.450984', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$XRv7MADL0m8DJ366zaypYeydVjegXuDs4w8MG8nMsmU1hOcMcoQPS', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.453707', '2025-09-08 23:33:08.453707', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$aLckAL6xpZyHm0CxCTqOXeYBr8raK8FC/5860qBL9v/rwR5XPQcom', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.453707', '2025-09-08 23:33:08.453707', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_options_returns_correct_format
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CurrencyHelperTest: test_currency_decimals_returns_correct_decimal_places
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
CurrencyHelperTest: test_currency_sample_values_returns_appropriate_values
--------------------------------------------------------------------------
  [1m[35m (2.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:33:08.439324', '2025-09-08 23:33:08.439324', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:33:08.439324', '2025-09-08 23:33:08.439324', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:33:08.457144', '2025-09-08 23:33:08.457144', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:33:08.457144', '2025-09-08 23:33:08.457144', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$jGQGk.lwnZojv7wtXnpNpuXSWvt8whE8EyabWs7RHJlwtTwz4Htpy', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.461597', '2025-09-08 23:33:08.461597', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$azQ/7qZO5jIWKvVCsxEyTuOvTgdccL0XwJAMMEuMX1Uq9/CjIXCr2', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.461597', '2025-09-08 23:33:08.461597', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_symbol_returns_correct_symbols
----------------------------------------------------------------
  [1m[36mFixtures Load (0.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:33:08.442002', '2025-09-08 23:33:08.442002', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:33:08.442002', '2025-09-08 23:33:08.442002', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:33:08.459751', '2025-09-08 23:33:08.459751', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:33:08.459751', '2025-09-08 23:33:08.459751', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$a.xMrXdEl9EXRmiRhdE4cuHbCNXzn.GGXJ4DOzDCmOSdyCfySMKPO', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.462701', '2025-09-08 23:33:08.462701', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$xcXpRG6roF4Js8oa33cS..EvnzKuU8PJOx1W1eSmR5UFZ5yVcZIMe', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.462701', '2025-09-08 23:33:08.462701', 'EUR', 0.1)[0m
  [1m[35m (3.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:33:08.437135', '2025-09-08 23:33:08.437135', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:33:08.437135', '2025-09-08 23:33:08.437135', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:33:08.458065', '2025-09-08 23:33:08.458065', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:33:08.458065', '2025-09-08 23:33:08.458065', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$Kq4UirCh7Hxr2hzGR8xkXuG/ewiQ/9vEgYZvc6Dz.s7VEUT1pubLW', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.463445', '2025-09-08 23:33:08.463445', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$ZrLHPC2c.9WAql5zc0uqX.B3AkQjE7OZ0Ldsm1yQ5zSqigqHWaVPO', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.463445', '2025-09-08 23:33:08.463445', 'EUR', 0.1)[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
------------------------------------------------------------
CurrencyHelperTest: test_zero_decimal_currencies_returns_JPY
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CurrencyHelperTest: test_format_currency_handles_different_currencies_correctly
-------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (2.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mFixtures Load (0.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:33:08.443945', '2025-09-08 23:33:08.443945', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:33:08.443945', '2025-09-08 23:33:08.443945', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:33:08.465677', '2025-09-08 23:33:08.465677', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:33:08.465677', '2025-09-08 23:33:08.465677', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$FCX/oYP0xVKQgRPmkJNvpujlCndf5nOJyuprgZOuXvC/qUaWziySa', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.470441', '2025-09-08 23:33:08.470441', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$enyggjmHT6MkJnT9aaaeaOfqdv2MaAxktXN8/M8x3knPr3TacJu4O', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:33:08.470441', '2025-09-08 23:33:08.470441', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[35m (3.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.491200"], ["updated_at", "2025-09-08 23:33:08.491200"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.492396"], ["updated_at", "2025-09-08 23:33:08.492396"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.492317"], ["updated_at", "2025-09-08 23:33:08.492317"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.493562"], ["updated_at", "2025-09-08 23:33:08.493562"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_currency
----------------------------------------------
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.496546"], ["updated_at", "2025-09-08 23:33:08.496546"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.499250"], ["updated_at", "2025-09-08 23:33:08.499250"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.505878"], ["updated_at", "2025-09-08 23:33:08.505878"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.510108"], ["updated_at", "2025-09-08 23:33:08.510108"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.514794"], ["updated_at", "2025-09-08 23:33:08.514794"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.516219"], ["updated_at", "2025-09-08 23:33:08.516219"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.547257"], ["updated_at", "2025-09-08 23:33:08.547257"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
-------------------------------------------------------
UserTest: test_should_have_default_values_for_new_users
-------------------------------------------------------
---------------------------------------------------------
UserTest: test_should_require_default_energy_cost_per_kwh
---------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.547626"], ["updated_at", "2025-09-08 23:33:08.547626"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.547970"], ["updated_at", "2025-09-08 23:33:08.547970"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
UserProfilesControllerTest: test_should_require_authentication
--------------------------------------------------------------
------------------------------------------------
UserProfilesControllerTest: test_should_update_user_profile
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
UserProfilesControllerTest: test_should_get_edit
------------------------------------------------
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.549692"], ["updated_at", "2025-09-08 23:33:08.549692"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
------------------------------------------------
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
UserProfilesControllerTest: test_should_get_show
------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.554697"], ["updated_at", "2025-09-08 23:33:08.554697"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
UserTest: test_should_require_positive_default_energy_cost_per_kwh
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
----------------------------------------------
UserTest: test_should_require_default_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.560905"], ["updated_at", "2025-09-08 23:33:08.560905"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/profile" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/profile/edit" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
Started GET "/profile" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/profile" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by UserProfilesController#show as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
-----------------------------------------------------------
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by UserProfilesController#update as HTML
  Parameters: {"user" => {"default_currency" => "EUR", "default_energy_cost_per_kwh" => "0.15"}}
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
Processing by UserProfilesController#show as HTML
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Processing by UserProfilesController#edit as HTML
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-08 23:33:08.631931"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/show.html.erb within layouts/application
Redirected to http://www.example.com/profile
Processing by PrintPricingsController#edit as HTML
Completed 302 Found in 9ms (ActiveRecord: 1.9ms (1 query, 0 cached) | GC: 0.0ms)
  Parameters: {"id" => "980190962"}
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/edit.html.erb within layouts/application
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.632775"], ["updated_at", "2025-09-08 23:33:08.632775"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  Rendered user_profiles/show.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered user_profiles/edit.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered layout layouts/application.html.erb (Duration: 5.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
Completed 200 OK in 14ms (Views: 7.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 6.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 5.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.7ms | GC: 0.0ms)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#create as HTML
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Processing by PrintPricingsController#index as HTML
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x00000001201a4f70>, params: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PrintersControllerTest: test_should_get_index
---------------------------------------------
Processing by PrintPricingsController#new as HTML
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#destroy as HTML
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (1.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 23:33:08.656009"], ["updated_at", "2025-09-08 23:33:08.656009"], ["printer_id", nil]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x0000000121000ab0>, params: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}, "controller" => "print_pricings", "action" => "create"} }[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 4.9ms | GC: 0.0ms)
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 11ms (ActiveRecord: 2.7ms (1 query, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  Rendering print_pricings/new.html.erb within layouts/application
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x000000011f58f0a0>, params: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190962"} }[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered layout layouts/application.html.erb (Duration: 9.4ms | GC: 0.0ms)
Completed 200 OK in 28ms (Views: 12.4ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintersControllerTest: test_should_destroy_printer
---------------------------------------------------
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 9.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.0ms | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 17ms (ActiveRecord: 1.3ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintersControllerTest: test_should_update_printer
--------------------------------------------------
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 11.9ms | GC: 0.0ms)
  [1m[36mPrintPricing Destroy (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  Rendered layout layouts/application.html.erb (Duration: 12.4ms | GC: 0.0ms)
Completed 200 OK in 15ms (Views: 12.4ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 15ms (ActiveRecord: 2.0ms (2 queries, 0 cached) | GC: 0.0ms)
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 9.3ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by PrintPricingsController#index as HTML
--------------------------------------------
PrintersControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Update (0.3ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "final_price" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Job Name"], ["final_price", "1.84784931506849315068493150684931375"], ["updated_at", "2025-09-08 23:33:08.674877"], ["id", 980190962]]
--------------------------------------------------
PrintersControllerTest: test_should_create_printer
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | GC: 0.0ms)
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 24ms (ActiveRecord: 1.1ms (3 queries, 0 cached) | GC: 0.0ms)
Completed 422 Unprocessable Content in 31ms (Views: 18.4ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started GET "/printers" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PrintersControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
------------------------------------------------
PrintersControllerTest: test_should_show_printer
------------------------------------------------
Processing by PrintersController#index as HTML
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started DELETE "/printers/980190962" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
----------------------------------------------------------
PrintersControllerTest: test_should_require_authentication
----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/printers/980190962" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering printers/index.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 21.8ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers/980190962/edit" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  Rendered layout layouts/application.html.erb (Duration: 22.9ms | GC: 0.0ms)
Processing by PrintersController#update as HTML
  Parameters: {"printer" => {"name" => "Updated Printer Name", "power_consumption" => "250"}, "id" => "980190962"}
Completed 422 Unprocessable Content in 27ms (Views: 23.0ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "printers" WHERE "printers"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#destroy as HTML
  Parameters: {"id" => "980190962"}
Processing by PrintersController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Load (0.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
---------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_false_for_new_printer
---------------------------------------------------------------
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 ORDER BY "printers"."name" ASC[0m  [["user_id", 980190962]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Started GET "/printers/980190962" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_correct_months_remaining
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
-------------------------------------------------------------------------
  Rendering printers/edit.html.erb within layouts/application
Started GET "/printers" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  Rendered printers/edit.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Update (0.4ms)[0m  [1m[33mUPDATE "printers" SET "name" = $1, "power_consumption" = $2, "updated_at" = $3 WHERE "printers"."id" = $4[0m  [["name", "Updated Printer Name"], ["power_consumption", "250.0"], ["updated_at", "2025-09-08 23:33:08.691241"], ["id", 980190962]]
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 4.9ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered printers/index.html.erb within layouts/application (Duration: 10.9ms | GC: 0.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering printers/show.html.erb within layouts/application
  Rendered printers/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
Processing by PrintersController#index as HTML
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_0_for_paid_off_printer
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  Rendered layout layouts/application.html.erb (Duration: 4.3ms | GC: 0.0ms)
Started POST "/printers" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  Rendered layout layouts/application.html.erb (Duration: 17.2ms | GC: 0.0ms)
Completed 200 OK in 20ms (Views: 16.8ms | ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 5.8ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2024-09-08 23:33:08.696677"], ["created_at", "2025-09-08 23:33:08.700260"], ["updated_at", "2025-09-08 23:33:08.700260"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
Started GET "/printers/new" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintersController#create as HTML
  Parameters: {"printer" => {"name" => "Test Printer", "manufacturer" => "Prusa", "power_consumption" => "200", "cost" => "500", "payoff_goal_years" => "3"}}
Processing by PrintersController#new as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
PrinterTest: test_should_belong_to_user
---------------------------------------
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:33:08.697335"], ["created_at", "2025-09-08 23:33:08.697358"], ["updated_at", "2025-09-08 23:33:08.697358"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrinterTest: test_should_require_positive_payoff_goal_years
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
-------------------------------------
PrinterTest: test_should_require_name
-------------------------------------
Redirected to http://www.example.com/printers/980190962
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 302 Found in 22ms (ActiveRecord: 1.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
-------------------------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_true_for_old_printer_past_payoff_goal
-------------------------------------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering printers/new.html.erb within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered printers/new.html.erb within layouts/application (Duration: 2.8ms | GC: 0.0ms)
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:33:08.709173"], ["created_at", "2025-09-08 23:33:08.709203"], ["updated_at", "2025-09-08 23:33:08.709203"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrinterTest: test_should_require_positive_power_consumption
-----------------------------------------------------------
  [1m[36mPrinter Destroy (0.3ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
-----------------------------------------------------
PrinterTest: test_should_set_date_added_automatically
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrinterTest: test_should_require_positive_cost
----------------------------------------------
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 23:33:08.708915"], ["created_at", "2025-09-08 23:33:08.713129"], ["updated_at", "2025-09-08 23:33:08.713129"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
-------------------------------------------------------
PrinterTest: test_should_be_valid_with_valid_attributes
-------------------------------------------------------
  Rendered layout layouts/application.html.erb (Duration: 7.1ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 13ms (Views: 8.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PrinterTest: test_should_have_valid_manufacturer_options
--------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.9ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 23:33:08.715268"], ["created_at", "2025-09-08 23:33:08.716677"], ["updated_at", "2025-09-08 23:33:08.716677"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
Redirected to http://www.example.com/printers
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/printers/980190963
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
Completed 302 Found in 36ms (ActiveRecord: 1.4ms (4 queries, 0 cached) | GC: 0.0ms)
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 302 Found in 19ms (ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Processing by Devise::RegistrationsController#new as HTML
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
Started GET "/" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mPrinter Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (3.3ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:33:08.720530"], ["created_at", "2025-09-08 23:33:08.720568"], ["updated_at", "2025-09-08 23:33:08.720568"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
[31mUnpermitted parameters: :currency, :power_consumption, :energy_cost_per_kwh, :printer_cost, :investment_return_years, :daily_usage_hours, :repair_cost_percentage. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x0000000120bc6058>, params: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" ORDER BY "printers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  Rendering layout layouts/application.html.erb
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.6ms | GC: 0.0ms)
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Processing by PrintPricingsController#index as HTML
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4633.75"], ["created_at", "2025-09-08 23:33:08.727319"], ["updated_at", "2025-09-08 23:33:08.727319"], ["printer_id", nil]]
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 2.8ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 6.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.7ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 8.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.731537"], ["updated_at", "2025-09-08 23:33:08.731537"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
Started POST "/users" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 10.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.5ms | GC: 0.0ms)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.8ms (3 queries, 0 cached) | GC: 0.0ms)
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 21ms (ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Processing by PrintPricingsController#new as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:33:08.744885"], ["updated_at", "2025-09-08 23:33:08.744885"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 303 See Other in 19ms (ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190964], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.2ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 1.5ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mPrinter Load (0.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190964]]
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 3.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.1ms (2 queries, 1 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x000000011eb82940>, params: {"print_pricing" => {"job_name" => "Integration Test Print", "currency" => "USD", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Integration Test Print"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.621"], ["created_at", "2025-09-08 23:33:08.792337"], ["updated_at", "2025-09-08 23:33:08.792337"], ["printer_id", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 7ms (ActiveRecord: 0.8ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:33:08 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190964], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 2.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (27.3ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (28.9ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (27.2ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (29.3ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (25.2ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (24.1ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (22.9ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (29.5ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (25.3ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (26.8ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:36:12.555963', '2025-09-08 23:36:12.555963', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:36:12.555963', '2025-09-08 23:36:12.555963', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:36:12.595481', '2025-09-08 23:36:12.595481', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:36:12.595481', '2025-09-08 23:36:12.595481', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$O7CFDNURoyeKQkLBbjDm8.VvSPlaMDjCrjb7OwLy3lZTc0UCJcACK', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.598601', '2025-09-08 23:36:12.598601', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$3rXgMBKz3CD80g.jMe2mE.NeDZa2eaW4b6gKkTaENXadZdCIT0AuG', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.598601', '2025-09-08 23:36:12.598601', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:36:12.559251', '2025-09-08 23:36:12.559251', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:36:12.559251', '2025-09-08 23:36:12.559251', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:36:12.596139', '2025-09-08 23:36:12.596139', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:36:12.596139', '2025-09-08 23:36:12.596139', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$fkLrU1mi3wwuQLDCKuUQZOoAqHhJAjXqWxuDei/y5DtzYr0Gzctvq', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.599218', '2025-09-08 23:36:12.599218', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$bU1MEqTrITKSQDdBc2yyp.TeVK9lkXQ.QpBtGDAhIEy3CbgvqZZg6', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.599218', '2025-09-08 23:36:12.599218', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:36:12.563061', '2025-09-08 23:36:12.563061', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:36:12.563061', '2025-09-08 23:36:12.563061', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:36:12.597577', '2025-09-08 23:36:12.597577', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:36:12.597577', '2025-09-08 23:36:12.597577', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$T/A0O4fL.zXHYiZQ3LrW5uGv/D3YKrr9qr.b3J3jD3U4IzW0buSra', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.601010', '2025-09-08 23:36:12.601010', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$JlDLFDhwlynInC3O3o9fpO4qCemOXWOVlw6M2MgGLcDGbqAxl1G/a', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.601010', '2025-09-08 23:36:12.601010', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:36:12.576042', '2025-09-08 23:36:12.576042', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:36:12.576042', '2025-09-08 23:36:12.576042', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:36:12.605385', '2025-09-08 23:36:12.605385', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:36:12.605385', '2025-09-08 23:36:12.605385', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$s2qjoZwjwKxeWbFcjf7gkOccblobJtrCgkeRO8Vqb.68XyYOWq9qu', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.608298', '2025-09-08 23:36:12.608298', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$w6o0hf3j31/fR0jEobprreZpZvdJ8nh1ipE4/F/NaeXZzGXoRfSr6', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.608298', '2025-09-08 23:36:12.608298', 'EUR', 0.1)[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:36:12.571452', '2025-09-08 23:36:12.571452', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:36:12.571452', '2025-09-08 23:36:12.571452', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:36:12.602740', '2025-09-08 23:36:12.602740', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:36:12.602740', '2025-09-08 23:36:12.602740', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$UVWiL35k3UoI8q7PSjUEeuml3hZLJtjzyuL/t7/o6CYD8iGBApeBq', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.606048', '2025-09-08 23:36:12.606048', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$bOvZHgrrlhaVf5vVQL8f.u4FdFIV8k2ggBg/zK81i5xrndMR8vxPG', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.606048', '2025-09-08 23:36:12.606048', 'EUR', 0.1)[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (3.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:36:12.573876', '2025-09-08 23:36:12.573876', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:36:12.573876', '2025-09-08 23:36:12.573876', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:36:12.605699', '2025-09-08 23:36:12.605699', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:36:12.605699', '2025-09-08 23:36:12.605699', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$DBo.xJoE.fNlcM41tY5YBewgyhh2mE5t8RtUtYeV80fImv9yex3n2', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.610363', '2025-09-08 23:36:12.610363', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$5Hw2W79k4EcWHQjtEtxuiuh1CNCnm8zdUAVyWeDVDMXlKuEFE97sq', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.610363', '2025-09-08 23:36:12.610363', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:36:12.583177', '2025-09-08 23:36:12.583177', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:36:12.583177', '2025-09-08 23:36:12.583177', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:36:12.608276', '2025-09-08 23:36:12.608276', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:36:12.608276', '2025-09-08 23:36:12.608276', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$J2chhM27yFi2Ou1zLYZF7e3Q/rlH4Tw60AGhOC2U2AoEc028EayDq', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.610872', '2025-09-08 23:36:12.610872', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$pGh8LP/D/jbD4GwnI.N.g.F.u4OVofVgRMgGu.e6UHzBP5LilqXza', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.610872', '2025-09-08 23:36:12.610872', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mFixtures Load (1.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:36:12.576039', '2025-09-08 23:36:12.576039', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:36:12.576039', '2025-09-08 23:36:12.576039', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:36:12.606616', '2025-09-08 23:36:12.606616', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:36:12.606616', '2025-09-08 23:36:12.606616', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$ELCPnJeUJ7dXPlq52voeYu64OGkINyMdshieP9UJyQ/sSFbITAmO2', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.613332', '2025-09-08 23:36:12.613332', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$TwotyA4nmX824pJmo3/HXexfB4JdCl4ZwRdkAGEjJHCKac2fY5Nl2', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.613332', '2025-09-08 23:36:12.613332', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:36:12.581725', '2025-09-08 23:36:12.581725', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:36:12.581725', '2025-09-08 23:36:12.581725', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:36:12.612247', '2025-09-08 23:36:12.612247', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:36:12.612247', '2025-09-08 23:36:12.612247', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$tmoQAtVgNPQBTjo/ioRNvufSHpKsGfU7oy.bHhM6fbD6FU9FlHoZ6', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.617926', '2025-09-08 23:36:12.617926', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$0Yjlfwip7bFVRLEPWcH03uoLciO85e/AnetCBQ9110lSa9NzRckTK', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.617926', '2025-09-08 23:36:12.617926', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[35m (2.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:36:12.605972', '2025-09-08 23:36:12.605972', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:36:12.605972', '2025-09-08 23:36:12.605972', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:36:12.653908', '2025-09-08 23:36:12.653908', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:36:12.653908', '2025-09-08 23:36:12.653908', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$dPlEKCvazEUnt/61FJKfaefLUsbZdcmGAs5tz3jVaRJTZmXotwUzS', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.659085', '2025-09-08 23:36:12.659085', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$oI/Xcnx4olOTxzkIFyxN.uymKJbRRWdua2nda8K3bX4bgyKyfP3Z6', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:36:12.659085', '2025-09-08 23:36:12.659085', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (1.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
Processing by PrintPricingsController#index as HTML
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x000000011eb09248>, params: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 23:36:12.707926"], ["updated_at", "2025-09-08 23:36:12.707926"], ["printer_id", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 9ms (ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#update as HTML
  Rendering layout layouts/application.html.erb
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  Rendering print_pricings/index.html.erb within layouts/application
Processing by PrintPricingsController#show as HTML
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  Parameters: {"id" => "980190962"}
Processing by PrintPricingsController#create as HTML
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
------------------------------------------------------------------------------
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 6.3ms | GC: 0.0ms)
Processing by PrintPricingsController#index as HTML
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x000000011eb08668>, params: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 16.3ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
Completed 200 OK in 33ms (Views: 21.3ms | ActiveRecord: 0.8ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 8.8ms | GC: 0.0ms)
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.738863"], ["updated_at", "2025-09-08 23:36:12.738863"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
------------------------------------------------------------------
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#destroy as HTML
UserTest: test_should_require_positive_default_energy_cost_per_kwh
  Parameters: {"id" => "980190962"}
Processing by PrintPricingsController#new as HTML
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
------------------------------------------------------------------
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.740451"], ["updated_at", "2025-09-08 23:36:12.740451"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 17.7ms | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 422 Unprocessable Content in 29ms (Views: 21.9ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 13.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  [1m[36mPrintPricing Destroy (0.5ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  Rendering print_pricings/edit.html.erb within layouts/application
Completed 500 Internal Server Error in 30ms (ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 9ms (ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Other Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.751022"], ["created_at", "2025-09-08 23:36:12.751045"], ["updated_at", "2025-09-08 23:36:12.751045"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.751539"], ["created_at", "2025-09-08 23:36:12.751565"], ["updated_at", "2025-09-08 23:36:12.751565"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 8.0ms | GC: 0.0ms)
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 21.7ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Other User's Print"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.77393150684931506849315068493150625"], ["created_at", "2025-09-08 23:36:12.757583"], ["updated_at", "2025-09-08 23:36:12.757583"], ["printer_id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.6798630136986301369863013698630125"], ["created_at", "2025-09-08 23:36:12.758380"], ["updated_at", "2025-09-08 23:36:12.758380"], ["printer_id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintPricingsController#update as HTML
  Rendered layout layouts/application.html.erb (Duration: 12.5ms | GC: 0.0ms)
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 26ms (Views: 14.1ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
-------------------------------------------------------
UserTest: test_should_have_default_values_for_new_users
-------------------------------------------------------
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  Rendered layout layouts/application.html.erb (Duration: 27.2ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 42ms (Views: 30.7ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
----------------------------------------------
----------------------------------------------
UserTest: test_should_have_many_print_pricings
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
UserTest: test_should_require_default_currency
----------------------------------------------
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
----------------------------------------------
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 11.9ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
----------------------------------------------------
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.765975"], ["updated_at", "2025-09-08 23:36:12.765975"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x000000011eb0e108>, params: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190962"} }[0m
Completed 404 Not Found in 4ms (ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
--------------------------------------
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
UserTest: test_should_require_password
--------------------------------------
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190964" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:131:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
UserTest: test_should_require_default_energy_cost_per_kwh
---------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserProfilesControllerTest: test_should_update_user_profile
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
--------------------------------------------------------------
UserProfilesControllerTest: test_should_require_authentication
--------------------------------------------------------------
  Rendered layout layouts/application.html.erb (Duration: 17.5ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190963]]
------------------------------------------------
UserProfilesControllerTest: test_should_get_edit
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 29ms (Views: 20.9ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_show
------------------------------------------------
Started PATCH "/profile" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started GET "/profile" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Started GET "/profile" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
Processing by UserProfilesController#update as HTML
  Parameters: {"user" => {"default_currency" => "EUR", "default_energy_cost_per_kwh" => "0.15"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-08 23:36:12.773856"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Processing by UserProfilesController#show as HTML
Completed 302 Found in 3ms (ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
Processing by UserProfilesController#show as HTML
  Rendering layout layouts/application.html.erb
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendering user_profiles/show.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started GET "/profile/edit" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mPrintPricing Update (0.3ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "final_price" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Job Name"], ["final_price", "1.84784931506849315068493150684931375"], ["updated_at", "2025-09-08 23:36:12.776373"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendered user_profiles/show.html.erb within layouts/application (Duration: 2.3ms | GC: 0.0ms)
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
Redirected to http://www.example.com/print_pricings/980190962
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Completed 302 Found in 18ms (ActiveRecord: 1.5ms (3 queries, 0 cached) | GC: 0.0ms)
Processing by UserProfilesController#edit as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/edit.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.779133"], ["updated_at", "2025-09-08 23:36:12.779133"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.779740"], ["updated_at", "2025-09-08 23:36:12.779740"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190963]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  Rendered user_profiles/edit.html.erb within layouts/application (Duration: 2.3ms | GC: 0.0ms)
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Destroy (0.3ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190963]]
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Create (1.1ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.783074"], ["created_at", "2025-09-08 23:36:12.783104"], ["updated_at", "2025-09-08 23:36:12.783104"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.783006"], ["updated_at", "2025-09-08 23:36:12.783006"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.785831"], ["updated_at", "2025-09-08 23:36:12.785831"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.784063"], ["created_at", "2025-09-08 23:36:12.784084"], ["updated_at", "2025-09-08 23:36:12.784084"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.789128"], ["updated_at", "2025-09-08 23:36:12.789128"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.787501"], ["updated_at", "2025-09-08 23:36:12.787501"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.789542"], ["updated_at", "2025-09-08 23:36:12.789542"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.791756"], ["updated_at", "2025-09-08 23:36:12.791756"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.788649"], ["created_at", "2025-09-08 23:36:12.788670"], ["updated_at", "2025-09-08 23:36:12.788670"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.793376"], ["created_at", "2025-09-08 23:36:12.793392"], ["updated_at", "2025-09-08 23:36:12.793392"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.793821"], ["updated_at", "2025-09-08 23:36:12.793821"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.793884"], ["created_at", "2025-09-08 23:36:12.793913"], ["updated_at", "2025-09-08 23:36:12.793913"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.0ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.795450"], ["created_at", "2025-09-08 23:36:12.795472"], ["updated_at", "2025-09-08 23:36:12.795472"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.800209"], ["created_at", "2025-09-08 23:36:12.800233"], ["updated_at", "2025-09-08 23:36:12.800233"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.84784931506849315068493150684931375"], ["created_at", "2025-09-08 23:36:12.799521"], ["updated_at", "2025-09-08 23:36:12.799521"], ["printer_id", 980190963]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.802219"], ["updated_at", "2025-09-08 23:36:12.802219"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.803348"], ["created_at", "2025-09-08 23:36:12.803376"], ["updated_at", "2025-09-08 23:36:12.803376"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.803025"], ["created_at", "2025-09-08 23:36:12.803069"], ["updated_at", "2025-09-08 23:36:12.803069"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.803750"], ["updated_at", "2025-09-08 23:36:12.803750"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.805181"], ["created_at", "2025-09-08 23:36:12.805202"], ["updated_at", "2025-09-08 23:36:12.805202"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.803117"], ["updated_at", "2025-09-08 23:36:12.803117"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.808926"], ["created_at", "2025-09-08 23:36:12.809102"], ["updated_at", "2025-09-08 23:36:12.809102"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.811187"], ["updated_at", "2025-09-08 23:36:12.811187"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.810664"], ["created_at", "2025-09-08 23:36:12.810694"], ["updated_at", "2025-09-08 23:36:12.810694"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrinterTest: test_should_require_positive_power_consumption
-----------------------------------------------------------
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.814823"], ["created_at", "2025-09-08 23:36:12.814968"], ["updated_at", "2025-09-08 23:36:12.814968"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
-------------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_correct_months_remaining
-------------------------------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.6ms | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[31mUnpermitted parameters: :currency, :power_consumption, :energy_cost_per_kwh, :printer_cost, :investment_return_years, :daily_usage_hours, :repair_cost_percentage. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x000000011f4e7b20>, params: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 0.4ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 3.8ms | GC: 0.0ms)
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2024-09-08 23:36:12.821146"], ["created_at", "2025-09-08 23:36:12.824502"], ["updated_at", "2025-09-08 23:36:12.824502"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 11.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
Started POST "/users" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrinterTest: test_should_require_positive_cost
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PrinterTest: test_should_have_valid_manufacturer_options
--------------------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4633.75"], ["created_at", "2025-09-08 23:36:12.823996"], ["updated_at", "2025-09-08 23:36:12.823996"], ["printer_id", nil]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.827259"], ["updated_at", "2025-09-08 23:36:12.827259"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_false_for_new_printer
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:36:12.833419"], ["updated_at", "2025-09-08 23:36:12.833419"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 10.8ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrinterTest: test_should_require_positive_payoff_goal_years
-----------------------------------------------------------
  Rendered layout layouts/application.html.erb (Duration: 12.1ms | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 15ms (Views: 11.9ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.0ms)
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_true_for_old_printer_past_payoff_goal
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
PrinterTest: test_should_set_date_added_automatically
-----------------------------------------------------
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PrinterTest: test_should_be_valid_with_valid_attributes
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
-------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_0_for_paid_off_printer
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
PrinterTest: test_should_require_name
-------------------------------------
Completed 303 See Other in 20ms (ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190965], ["name", "Other Integration Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.837989"], ["created_at", "2025-09-08 23:36:12.838023"], ["updated_at", "2025-09-08 23:36:12.838023"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
Started GET "/" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (1.1ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.845718"], ["created_at", "2025-09-08 23:36:12.845739"], ["updated_at", "2025-09-08 23:36:12.845739"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/print_pricings/980190963
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190965], ["job_name", "Other User's Print"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.77393150684931506849315068493150625"], ["created_at", "2025-09-08 23:36:12.851745"], ["updated_at", "2025-09-08 23:36:12.851745"], ["printer_id", 980190965]]
Completed 302 Found in 35ms (ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.847421"], ["created_at", "2025-09-08 23:36:12.847472"], ["updated_at", "2025-09-08 23:36:12.847472"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
PrinterTest: test_should_belong_to_user
---------------------------------------
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintersControllerTest: test_should_destroy_printer
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 23:36:12.842188"], ["created_at", "2025-09-08 23:36:12.847221"], ["updated_at", "2025-09-08 23:36:12.847221"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintersControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
--------------------------------------------------
PrintersControllerTest: test_should_update_printer
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190964], ["LIMIT", 1]]
------------------------------------------------
PrintersControllerTest: test_should_show_printer
------------------------------------------------
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 4.6ms | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 23:36:12.854370"], ["created_at", "2025-09-08 23:36:12.857218"], ["updated_at", "2025-09-08 23:36:12.857218"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (1.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
Started DELETE "/printers/980190962" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
Started PATCH "/printers/980190962" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered layout layouts/application.html.erb (Duration: 8.0ms | GC: 0.0ms)
Completed 200 OK in 20ms (Views: 8.8ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:165:in 'block in <class:PrintPricingFlowsTest>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started GET "/printers/980190962" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PrintersControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#update as HTML
  Parameters: {"printer" => {"name" => "Updated Printer Name", "power_consumption" => "250"}, "id" => "980190962"}
Processing by PrintersController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Started GET "/printers" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 17.4ms | GC: 0.0ms)
Started GET "/printers/980190962/edit" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
-------------------------------------------
PrintersControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (2.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Started GET "/printers/new" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
Processing by PrintersController#edit as HTML
  Parameters: {"id" => "980190962"}
Processing by PrintersController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrinter Load (1.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 25.3ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.875640"], ["created_at", "2025-09-08 23:36:12.875680"], ["updated_at", "2025-09-08 23:36:12.875680"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
Completed 200 OK in 32ms (Views: 25.7ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
Processing by PrintersController#new as HTML
Processing by PrintersController#index as HTML
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190962]]
  Rendering layout layouts/application.html.erb
  Rendering printers/edit.html.erb within layouts/application
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  Rendering printers/show.html.erb within layouts/application
  Rendered printers/edit.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered printers/show.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "currency" => "EUR", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "power_consumption" => "150", "energy_cost_per_kwh" => "0.15", "vat_percentage" => "21.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
Completed 200 OK in 8ms (Views: 3.4ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  Rendering printers/index.html.erb within layouts/application
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mPrinter Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "printers" WHERE "printers"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | GC: 0.0ms)
  Rendering printers/new.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 ORDER BY "printers"."name" ASC[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
Completed 200 OK in 15ms (Views: 6.7ms | ActiveRecord: 1.3ms (1 query, 0 cached) | GC: 0.0ms)
[31mUnpermitted parameters: :currency, :power_consumption, :energy_cost_per_kwh. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x000000011eb6e940>, params: {"print_pricing" => {"job_name" => "Flow Test Print", "currency" => "EUR", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "power_consumption" => "150", "energy_cost_per_kwh" => "0.15", "vat_percentage" => "21.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by PrintPricingsController#new as HTML
  [1m[36mPrinter Update (0.8ms)[0m  [1m[33mUPDATE "printers" SET "name" = $1, "power_consumption" = $2, "updated_at" = $3 WHERE "printers"."id" = $4[0m  [["name", "Updated Printer Name"], ["power_consumption", "250.0"], ["updated_at", "2025-09-08 23:36:12.879029"], ["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  Rendered printers/index.html.erb within layouts/application (Duration: 6.3ms | GC: 0.0ms)
  [1m[36mPrinter Destroy (0.3ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered printers/new.html.erb within layouts/application (Duration: 6.1ms | GC: 0.0ms)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 16.7ms | GC: 0.0ms)
  [1m[36mPrintPricing Create (1.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.0328"], ["created_at", "2025-09-08 23:36:12.900630"], ["updated_at", "2025-09-08 23:36:12.900630"], ["printer_id", nil]]
Redirected to http://www.example.com/printers/980190962
Completed 200 OK in 23ms (Views: 18.1ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 16.4ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190964]]
Completed 302 Found in 36ms (ActiveRecord: 1.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 25ms (Views: 20.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintersControllerTest: test_should_create_printer
--------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/printers
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Started POST "/printers" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
Completed 302 Found in 42ms (ActiveRecord: 3.2ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintersController#create as HTML
  Parameters: {"printer" => {"name" => "Test Printer", "manufacturer" => "Prusa", "power_consumption" => "200", "cost" => "500", "payoff_goal_years" => "3"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PrintersControllerTest: test_should_require_authentication
----------------------------------------------------------
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_symbol_returns_correct_symbols
----------------------------------------------------------------
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 21.2ms | GC: 0.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendered layout layouts/application.html.erb (Duration: 22.5ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 22.4ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
CurrencyHelperTest: test_currency_sample_values_returns_appropriate_values
--------------------------------------------------------------------------
Started GET "/printers" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_options_returns_correct_format
----------------------------------------------------------------
Redirected to http://www.example.com/print_pricings/980190963
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 302 Found in 36ms (ActiveRecord: 1.9ms (2 queries, 1 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CurrencyHelperTest: test_currency_decimals_returns_correct_decimal_places
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CurrencyHelperTest: test_format_currency_handles_different_currencies_correctly
-------------------------------------------------------------------------------
  [1m[36mPrintPricing Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CurrencyHelperTest: test_zero_decimal_currencies_returns_JPY
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintersController#index as HTML
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (3.0ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:36:12.922499"], ["created_at", "2025-09-08 23:36:12.922585"], ["updated_at", "2025-09-08 23:36:12.922585"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
  Rendering layout layouts/application.html.erb
Processing by PrintPricingsController#create as HTML
  Rendering print_pricings/show.html.erb within layouts/application
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "printer_id" => "980190964", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
Redirected to http://www.example.com/printers/980190964
Completed 302 Found in 23ms (ActiveRecord: 2.9ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" ORDER BY "printers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 5.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | GC: 0.0ms)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Integration Test Print"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.72460602739726027397260273972602675"], ["created_at", "2025-09-08 23:36:12.946601"], ["updated_at", "2025-09-08 23:36:12.946601"], ["printer_id", 980190964]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 16ms (ActiveRecord: 1.1ms (3 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-09 08:36:12 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190964], ["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 3.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.1ms | GC: 0.0ms)
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.7ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (5.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:37:26.588362', '2025-09-08 23:37:26.588362', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:37:26.588362', '2025-09-08 23:37:26.588362', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:37:26.603778', '2025-09-08 23:37:26.603778', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:37:26.603778', '2025-09-08 23:37:26.603778', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$pI0OLUdIK6MwSuL6j4gaKOWURMR1iqSLQkm2wMx6lNu6Ker9aiG8W', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:37:26.611943', '2025-09-08 23:37:26.611943', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$73CjLeQuYTR3wq27lbRDjOFnP.0jGjCahpkjfJ0bZXa0uo.vv223y', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:37:26.611943', '2025-09-08 23:37:26.611943', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:37:26.665181"], ["updated_at", "2025-09-08 23:37:26.665181"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.9ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:37:26.683135"], ["created_at", "2025-09-08 23:37:26.683152"], ["updated_at", "2025-09-08 23:37:26.683152"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (2.3ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:37:36.888363', '2025-09-08 23:37:36.888363', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:37:36.888363', '2025-09-08 23:37:36.888363', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:37:36.905523', '2025-09-08 23:37:36.905523', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:37:36.905523', '2025-09-08 23:37:36.905523', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$xoazO1msAaERcbNpRds3A.FgfAD5oMISkzr0iKq6OV7c35e01eS.y', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:37:36.913634', '2025-09-08 23:37:36.913634', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$zqyoJnCCO.85G6Dia6SN.e/0G85LeNLTOef4ycgK8/GDUVivNysY.', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:37:36.913634', '2025-09-08 23:37:36.913634', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:37:36 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
[31mUnpermitted parameters: :currency, :power_consumption, :energy_cost_per_kwh, :printer_cost, :investment_return_years, :daily_usage_hours, :repair_cost_percentage. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x00000001221d01f0>, params: {"print_pricing" => {"job_name" => "Complete Test", "currency" => "JPY", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "power_consumption" => "250", "energy_cost_per_kwh" => "35.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "printer_cost" => "300000.0", "investment_return_years" => "3", "daily_usage_hours" => "10", "repair_cost_percentage" => "8.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4633.75"], ["created_at", "2025-09-08 23:37:37.026068"], ["updated_at", "2025-09-08 23:37:37.026068"], ["printer_id", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 26ms (ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (2.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (32.8ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (31.5ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (30.1ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (31.3ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (33.1ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (31.4ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (30.8ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (32.1ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (26.7ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTruncate Tables (29.7ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:03.083786', '2025-09-08 23:38:03.083786', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:03.083786', '2025-09-08 23:38:03.083786', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:03.107845', '2025-09-08 23:38:03.107845', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:03.107845', '2025-09-08 23:38:03.107845', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$Kw3unxVXZoq/CTQoQKZFbusSGB5JO48Lix6oo/yFWOuMdKEruAe2.', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.111039', '2025-09-08 23:38:03.111039', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$HbzJVL2yYV54kZxoiv6STuIddHIkIcM9JVIVtmpPiPweNEz1fu./C', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.111039', '2025-09-08 23:38:03.111039', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:03.083935', '2025-09-08 23:38:03.083935', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:03.083935', '2025-09-08 23:38:03.083935', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:03.107771', '2025-09-08 23:38:03.107771', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:03.107771', '2025-09-08 23:38:03.107771', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$NZj0rD2Dvm5lxwPuq3KDMOKzY7Bm6Fro9MTU5dF11lMomO5YlQRYu', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.113228', '2025-09-08 23:38:03.113228', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$uEJHTCWkEPZQw9hW5kPpouc9BG/XGUpn3hNXJ3rkdIP8JR7FNK7u2', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.113228', '2025-09-08 23:38:03.113228', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mFixtures Load (1.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:03.085036', '2025-09-08 23:38:03.085036', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:03.085036', '2025-09-08 23:38:03.085036', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:03.108592', '2025-09-08 23:38:03.108592', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:03.108592', '2025-09-08 23:38:03.108592', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$.3xC8IFikWzCGeYNyTx.oORIQUmFpvwP3gmJATfUCMu9GUaU1rN3y', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.112902', '2025-09-08 23:38:03.112902', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$Jj9myWuiP.5Bed3KMqD4Ge9oIrSUlP/VH3tsL1oSuifyN51CGHxM6', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.112902', '2025-09-08 23:38:03.112902', 'EUR', 0.1)[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mFixtures Load (2.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:03.095258', '2025-09-08 23:38:03.095258', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:03.095258', '2025-09-08 23:38:03.095258', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:03.112530', '2025-09-08 23:38:03.112530', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:03.112530', '2025-09-08 23:38:03.112530', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$dA9NB6EZHsYW0SGetyPHS.6P9rFT2l0ReC8wfSFb/DsGHhI0I9BRS', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.116320', '2025-09-08 23:38:03.116320', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$QdcF5oPDjtOI2T2nm.JdwuzNTFGt4WMJVy.R2Uo1Q/mMtBgmKegmm', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.116320', '2025-09-08 23:38:03.116320', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:03.095073', '2025-09-08 23:38:03.095073', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:03.095073', '2025-09-08 23:38:03.095073', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:03.115068', '2025-09-08 23:38:03.115068', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:03.115068', '2025-09-08 23:38:03.115068', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$rXBbPubOrE84yKcTbEB4nO3AliLCHPpZDqIyxhBEyx/.gi9XPf/Fm', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.118599', '2025-09-08 23:38:03.118599', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$yNWeb47hLMT0CzdImE8Rq.7r4OVCi38lYUrLTxw5cnmtLER4jfNd.', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.118599', '2025-09-08 23:38:03.118599', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:03.092669', '2025-09-08 23:38:03.092669', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:03.092669', '2025-09-08 23:38:03.092669', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:03.112892', '2025-09-08 23:38:03.112892', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:03.112892', '2025-09-08 23:38:03.112892', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$VLuC57Tp6tjcv/5exhblX..jqwm2ytb.mtOlK99R5Tgsz4A/976Oa', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.118692', '2025-09-08 23:38:03.118692', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$RKzhQXuXCxpBkmBJPcLPo.gLU8Bhj2SFDDcVSyY9UCQRlHgSeYOM.', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.118692', '2025-09-08 23:38:03.118692', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (1.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:03.101234', '2025-09-08 23:38:03.101234', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:03.101234', '2025-09-08 23:38:03.101234', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:03.119374', '2025-09-08 23:38:03.119374', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:03.119374', '2025-09-08 23:38:03.119374', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$s/WnALmVnzw.aBheiPSuGu6SysQpBkgKaZ/Mr3kNKiGI6sjSzeisq', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.122596', '2025-09-08 23:38:03.122596', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$yG0iwtmEjP12SfMxi5eVoey/zUbBbX6rvqff3/o83Jdl8dzqn.21q', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.122596', '2025-09-08 23:38:03.122596', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[35m (3.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
  [1m[35m (4.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.3ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:03.100582', '2025-09-08 23:38:03.100582', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:03.100582', '2025-09-08 23:38:03.100582', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:03.123041', '2025-09-08 23:38:03.123041', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:03.123041', '2025-09-08 23:38:03.123041', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$xJgVl3r/NKh04pMWXdI8euXvOJ/72lETpwlNiduA1G20pSStt/Uru', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.126870', '2025-09-08 23:38:03.126870', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$BEuZQVZJ6nHJuoswSYmow.FrEyn35AvGlQNdOXnBo0gotwSkdzcGa', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.126870', '2025-09-08 23:38:03.126870', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mFixtures Load (1.4ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:03.103986', '2025-09-08 23:38:03.103986', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:03.103986', '2025-09-08 23:38:03.103986', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:03.122612', '2025-09-08 23:38:03.122612', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:03.122612', '2025-09-08 23:38:03.122612', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$fpOkmOMTW8bsDwscq7RHWeuiIpYGc976qvfI1vLII6Vf1jQ3q.acy', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.126347', '2025-09-08 23:38:03.126347', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$syRn/WbCv2.zgPQ178fHaOKS9vU0GQOMdyxXCOzJMyFOuYNcTPiG2', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.126347', '2025-09-08 23:38:03.126347', 'EUR', 0.1)[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:03.102852', '2025-09-08 23:38:03.102852', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:03.102852', '2025-09-08 23:38:03.102852', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:03.120661', '2025-09-08 23:38:03.120661', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:03.120661', '2025-09-08 23:38:03.120661', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$/3C2TFded.LEUgQ7a4chWOMMsldyQx3F5cN7aCIyf4T1H.La./PSq', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.125926', '2025-09-08 23:38:03.125926', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$bSE6LgxD9wILx8392s9.c.eDazUgdO0sYeHnFtuqPOg5pa6hnBUbW', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:03.125926', '2025-09-08 23:38:03.125926', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[35m (4.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.145577"], ["updated_at", "2025-09-08 23:38:03.145577"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.150807"], ["updated_at", "2025-09-08 23:38:03.150807"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.153261"], ["updated_at", "2025-09-08 23:38:03.153261"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.151887"], ["updated_at", "2025-09-08 23:38:03.151887"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrinter Create (1.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.155310"], ["created_at", "2025-09-08 23:38:03.155587"], ["updated_at", "2025-09-08 23:38:03.155587"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrinter Create (2.1ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.157889"], ["created_at", "2025-09-08 23:38:03.157917"], ["updated_at", "2025-09-08 23:38:03.157917"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.159925"], ["updated_at", "2025-09-08 23:38:03.159925"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.159687"], ["updated_at", "2025-09-08 23:38:03.159687"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.161452"], ["created_at", "2025-09-08 23:38:03.161777"], ["updated_at", "2025-09-08 23:38:03.161777"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.159697"], ["updated_at", "2025-09-08 23:38:03.159697"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.163183"], ["created_at", "2025-09-08 23:38:03.163204"], ["updated_at", "2025-09-08 23:38:03.163204"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.162759"], ["updated_at", "2025-09-08 23:38:03.162759"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.163986"], ["updated_at", "2025-09-08 23:38:03.163986"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.167807"], ["created_at", "2025-09-08 23:38:03.167836"], ["updated_at", "2025-09-08 23:38:03.167836"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.3ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.171360"], ["created_at", "2025-09-08 23:38:03.171385"], ["updated_at", "2025-09-08 23:38:03.171385"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.84784931506849315068493150684931375"], ["created_at", "2025-09-08 23:38:03.170057"], ["updated_at", "2025-09-08 23:38:03.170057"], ["printer_id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.172978"], ["created_at", "2025-09-08 23:38:03.173045"], ["updated_at", "2025-09-08 23:38:03.173045"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.174407"], ["updated_at", "2025-09-08 23:38:03.174407"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.172841"], ["created_at", "2025-09-08 23:38:03.172903"], ["updated_at", "2025-09-08 23:38:03.172903"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.173899"], ["updated_at", "2025-09-08 23:38:03.173899"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.176308"], ["created_at", "2025-09-08 23:38:03.176332"], ["updated_at", "2025-09-08 23:38:03.176332"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_symbol_returns_correct_symbols
----------------------------------------------------------------
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrinter Create (1.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.178560"], ["created_at", "2025-09-08 23:38:03.178580"], ["updated_at", "2025-09-08 23:38:03.178580"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.182660"], ["updated_at", "2025-09-08 23:38:03.182660"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
--------------------------------------------------------------------------
CurrencyHelperTest: test_currency_sample_values_returns_appropriate_values
--------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.183834"], ["created_at", "2025-09-08 23:38:03.183859"], ["updated_at", "2025-09-08 23:38:03.183859"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CurrencyHelperTest: test_currency_decimals_returns_correct_decimal_places
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Update (0.6ms)[0m  [1m[33mUPDATE "printers" SET "cost" = $1, "updated_at" = $2 WHERE "printers"."id" = $3[0m  [["cost", "1000.0"], ["updated_at", "2025-09-08 23:38:03.184789"], ["id", 980190963]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.184082"], ["updated_at", "2025-09-08 23:38:03.184082"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CurrencyHelperTest: test_format_currency_handles_different_currencies_correctly
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
------------------------------------------------------------
CurrencyHelperTest: test_zero_decimal_currencies_returns_JPY
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
  [1m[36mPrinter Create (1.0ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.185221"], ["created_at", "2025-09-08 23:38:03.185235"], ["updated_at", "2025-09-08 23:38:03.185235"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
----------------------------------------------------------------
CurrencyHelperTest: test_currency_options_returns_correct_format
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
PrinterTest: test_months_to_payoff_should_return_0_for_paid_off_printer
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrinterTest: test_should_require_positive_payoff_goal_years
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
---------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_false_for_new_printer
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
PrinterTest: test_should_set_date_added_automatically
-----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.189344"], ["created_at", "2025-09-08 23:38:03.189367"], ["updated_at", "2025-09-08 23:38:03.189367"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
-------------------------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_true_for_old_printer_past_payoff_goal
-------------------------------------------------------------------------------
--------------------------------------------------------
PrinterTest: test_should_have_valid_manufacturer_options
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PrinterTest: test_should_be_valid_with_valid_attributes
-------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
----------------------------------------------
PrinterTest: test_should_require_positive_cost
----------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrinterTest: test_should_require_positive_power_consumption
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 23:38:03.190852"], ["created_at", "2025-09-08 23:38:03.193694"], ["updated_at", "2025-09-08 23:38:03.193694"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
PrinterTest: test_should_belong_to_user
---------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
PrinterTest: test_months_to_payoff_should_return_correct_months_remaining
-------------------------------------------------------------------------
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.195369"], ["created_at", "2025-09-08 23:38:03.195402"], ["updated_at", "2025-09-08 23:38:03.195402"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.195364"], ["created_at", "2025-09-08 23:38:03.195387"], ["updated_at", "2025-09-08 23:38:03.195387"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
-------------------------------------
PrinterTest: test_should_require_name
-------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
----------------------------------------------
UserTest: test_should_require_default_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
UserTest: test_should_have_default_values_for_new_users
-------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.3ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2024-09-08 23:38:03.197601"], ["created_at", "2025-09-08 23:38:03.199394"], ["updated_at", "2025-09-08 23:38:03.199394"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Create (1.1ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 23:38:03.198280"], ["created_at", "2025-09-08 23:38:03.199532"], ["updated_at", "2025-09-08 23:38:03.199532"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
----------------------------------------------
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_should_require_positive_default_energy_cost_per_kwh
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
UserTest: test_should_require_default_energy_cost_per_kwh
---------------------------------------------------------
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.205774"], ["updated_at", "2025-09-08 23:38:03.205774"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.213012"], ["updated_at", "2025-09-08 23:38:03.213012"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
--------------------------------------------------------------
  [1m[36mPrinter Create (1.2ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190965], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.218539"], ["created_at", "2025-09-08 23:38:03.218641"], ["updated_at", "2025-09-08 23:38:03.218641"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
UserProfilesControllerTest: test_should_require_authentication
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_show
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
------------------------------------------------
UserProfilesControllerTest: test_should_get_edit
------------------------------------------------
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserProfilesControllerTest: test_should_update_user_profile
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190965], ["job_name", "Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.6798630136986301369863013698630125"], ["created_at", "2025-09-08 23:38:03.223940"], ["updated_at", "2025-09-08 23:38:03.223940"], ["printer_id", 980190965]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (1.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190965]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190965]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190965]]
  [1m[36mPrinter Destroy (0.4ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190965]]
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-08 23:38:03.261697"], ["default_currency", "JPY"], ["default_energy_cost_per_kwh", "35.0"], ["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/profile" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
Processing by PrintPricingsController#new as HTML
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 401 Unauthorized in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.272625"], ["updated_at", "2025-09-08 23:38:03.272625"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (2.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190965]]
Started GET "/profile" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/profile/edit" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Complete Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "250.0"], ["cost", "300000.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.276402"], ["created_at", "2025-09-08 23:38:03.276460"], ["updated_at", "2025-09-08 23:38:03.276460"], ["daily_usage_hours", 10], ["investment_return_years", 3], ["repair_cost_percentage", "8.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Other Integration Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.283340"], ["created_at", "2025-09-08 23:38:03.283999"], ["updated_at", "2025-09-08 23:38:03.283999"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
Started GET "/profile" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by Devise::RegistrationsController#new as HTML
---------------------------------------------
PrintersControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mPrintPricing Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by UserProfilesController#update as HTML
  [1m[36mPrintPricing Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  Parameters: {"user" => {"default_currency" => "EUR", "default_energy_cost_per_kwh" => "0.15"}}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mPrintPricing Create (1.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Other User's Print"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.77393150684931506849315068493150625"], ["created_at", "2025-09-08 23:38:03.287985"], ["updated_at", "2025-09-08 23:38:03.287985"], ["printer_id", 980190965]]
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  [1m[36mPrintPricing Load (1.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 2.8ms | GC: 0.0ms)
Processing by UserProfilesController#edit as HTML
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 6.7ms | GC: 0.0ms)
--------------------------------------------
PrintersControllerTest: test_should_get_edit
--------------------------------------------
Completed 200 OK in 14ms (Views: 9.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/printers" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
Started POST "/users" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by PrintersController#index as HTML
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-08 23:38:03.300927"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by UserProfilesController#show as HTML
Redirected to http://www.example.com/profile
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/edit.html.erb within layouts/application
Completed 302 Found in 16ms (ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 21.3ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  Rendered user_profiles/edit.html.erb within layouts/application (Duration: 2.3ms | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.309705"], ["updated_at", "2025-09-08 23:38:03.309705"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  Rendering user_profiles/show.html.erb within layouts/application
  Rendering layout layouts/application.html.erb
  Rendering printers/index.html.erb within layouts/application
Processing by UserProfilesController#show as HTML
  Rendered layout layouts/application.html.erb (Duration: 6.2ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 16ms (Views: 7.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 27.9ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "printers" WHERE "printers"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 38ms (Views: 26.6ms | ActiveRecord: 2.9ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  Rendered user_profiles/show.html.erb within layouts/application (Duration: 5.1ms | GC: 0.0ms)
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
--------------------------------------------------
PrintersControllerTest: test_should_create_printer
--------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#create as HTML
  [1m[36mPrinter Load (0.7ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 ORDER BY "printers"."name" ASC[0m  [["user_id", 980190962]]
  Rendered layout layouts/application.html.erb (Duration: 9.0ms | GC: 0.0ms)
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "printer_id" => "980190965", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
Completed 200 OK in 15ms (Views: 10.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
------------------------------------------------
-------------------------------------------
PrintersControllerTest: test_should_show_printer
PrintersControllerTest: test_should_get_new
------------------------------------------------
-------------------------------------------
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PrintersControllerTest: test_should_require_authentication
----------------------------------------------------------
Redirected to http://www.example.com/
Completed 303 See Other in 23ms (ActiveRecord: 1.8ms (2 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#index as HTML
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/printers" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
Started GET "/printers" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started GET "/printers/980190962" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (2.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  Rendered printers/index.html.erb within layouts/application (Duration: 20.6ms | GC: 0.0ms)
Processing by PrintersController#create as HTML
  Parameters: {"printer" => {"name" => "Test Printer", "manufacturer" => "Prusa", "power_consumption" => "200", "cost" => "500", "payoff_goal_years" => "3"}}
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  [1m[36mPrintPricing Load (3.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering print_pricings/new.html.erb within layouts/application
Completed 404 Not Found in 11ms (ActiveRecord: 3.2ms (1 query, 0 cached) | GC: 0.0ms)
Processing by PrintersController#index as HTML
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:165:in 'block in <class:PrintPricingFlowsTest>'
  Rendered layout layouts/application.html.erb (Duration: 24.5ms | GC: 0.0ms)
Completed 200 OK in 34ms (Views: 25.9ms | ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers/new" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Started GET "/printers/980190962/edit" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
Processing by PrintersController#show as HTML
  Parameters: {"id" => "980190962"}
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 23:38:03.337699"], ["updated_at", "2025-09-08 23:38:03.337699"], ["printer_id", 980190965]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintersControllerTest: test_should_destroy_printer
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  [1m[36mPrinter Load (0.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#new as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
--------------------------------------------------
PrintersControllerTest: test_should_update_printer
--------------------------------------------------
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendering printers/new.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.337901"], ["created_at", "2025-09-08 23:38:03.337922"], ["updated_at", "2025-09-08 23:38:03.337922"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  Rendered printers/new.html.erb within layouts/application (Duration: 3.3ms | GC: 0.0ms)
Redirected to http://www.example.com/print_pricings/980190963
  Rendered layout layouts/application.html.erb (Duration: 4.3ms | GC: 0.0ms)
  [1m[36mPrinter Count (3.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Completed 200 OK in 9ms (Views: 5.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/printers/980190962" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 10.7ms | GC: 0.0ms)
Completed 302 Found in 36ms (ActiveRecord: 3.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.8ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering printers/show.html.erb within layouts/application
  Rendered layout layouts/application.html.erb (Duration: 14.5ms | GC: 0.0ms)
  Rendered printers/show.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
Completed 200 OK in 32ms (Views: 16.2ms | ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.0ms)
Started PATCH "/printers/980190962" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 24.0ms | GC: 0.0ms)
Processing by PrintersController#edit as HTML
  Parameters: {"id" => "980190962"}
Processing by PrintersController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 26.7ms | GC: 0.0ms)
Processing by PrintersController#update as HTML
  Parameters: {"printer" => {"name" => "Updated Printer Name", "power_consumption" => "250"}, "id" => "980190962"}
  [1m[36mPrinter Load (0.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 39ms (Views: 27.4ms | ActiveRecord: 1.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPrinter Load (0.9ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/printers/980190965
  Rendered layout layouts/application.html.erb (Duration: 9.7ms | GC: 0.0ms)
Completed 200 OK in 27ms (Views: 11.0ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
Completed 302 Found in 34ms (ActiveRecord: 1.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190962]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "currency" => "EUR", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "power_consumption" => "150", "energy_cost_per_kwh" => "0.15", "vat_percentage" => "21.0"}}
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.0ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.366309"], ["created_at", "2025-09-08 23:38:03.366398"], ["updated_at", "2025-09-08 23:38:03.366398"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrintPricing Destroy (0.6ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  Rendering printers/edit.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[31mUnpermitted parameters: :currency, :power_consumption, :energy_cost_per_kwh. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x0000000121d388e0>, params: {"print_pricing" => {"job_name" => "Flow Test Print", "currency" => "EUR", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "power_consumption" => "150", "energy_cost_per_kwh" => "0.15", "vat_percentage" => "21.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mPrinter Destroy (0.3ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190962]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" ORDER BY "printers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  Rendered printers/edit.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by PrintPricingsController#new as HTML
  [1m[36mPrinter Update (0.9ms)[0m  [1m[33mUPDATE "printers" SET "name" = $1, "power_consumption" = $2, "updated_at" = $3 WHERE "printers"."id" = $4[0m  [["name", "Updated Printer Name"], ["power_consumption", "250.0"], ["updated_at", "2025-09-08 23:38:03.368256"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendered layout layouts/application.html.erb (Duration: 7.8ms | GC: 0.0ms)
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
PrintPricingsControllerTest: test_should_create_print_pricing
Redirected to http://www.example.com/printers
Completed 200 OK in 30ms (Views: 12.6ms | ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)
-------------------------------------------------------------
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.0328"], ["created_at", "2025-09-08 23:38:03.385314"], ["updated_at", "2025-09-08 23:38:03.385314"], ["printer_id", nil]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 302 Found in 32ms (ActiveRecord: 2.5ms (4 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190964]]
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/printers/980190962
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mCACHE Printer Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
Processing by PrintPricingsController#create as HTML
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 4.7ms | GC: 0.0ms)
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x0000000121d3b900>, params: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 20.4ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Completed 302 Found in 45ms (ActiveRecord: 1.9ms (2 queries, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 25.0ms | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
Redirected to http://www.example.com/print_pricings/980190963
Completed 200 OK in 32ms (Views: 27.1ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#create as HTML
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Completed 302 Found in 40ms (ActiveRecord: 1.3ms (2 queries, 1 cached) | GC: 0.0ms)
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 13.6ms | GC: 0.0ms)
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x0000000121d38c00>, params: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mPrintPricing Create (2.8ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 23:38:03.409850"], ["updated_at", "2025-09-08 23:38:03.409850"], ["printer_id", nil]]
Completed 200 OK in 19ms (Views: 15.3ms | ActiveRecord: 0.8ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering print_pricings/new.html.erb within layouts/application
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  Rendered layout layouts/application.html.erb (Duration: 30.2ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
Completed 200 OK in 53ms (Views: 32.5ms | ActiveRecord: 0.7ms (3 queries, 1 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  Rendering layout layouts/application.html.erb
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering print_pricings/edit.html.erb within layouts/application
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (1.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "printer_id" => "980190965", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
Redirected to http://www.example.com/print_pricings/980190964
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 6.1ms | GC: 0.0ms)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
Completed 302 Found in 33ms (ActiveRecord: 3.0ms (1 query, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | GC: 0.0ms)
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
Completed 200 OK in 13ms (Views: 8.4ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (2.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (1.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 10.5ms | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x0000000121cbed88>, params: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190962"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 11.8ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 11.8ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 22.4ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  Rendered layout layouts/application.html.erb (Duration: 25.1ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 5.4ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 32ms (Views: 25.8ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 12.2ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 12.4ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 4.2ms | GC: 0.0ms)
  [1m[36mPrintPricing Update (0.2ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "final_price" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Job Name"], ["final_price", "1.84784931506849315068493150684931375"], ["updated_at", "2025-09-08 23:38:03.451809"], ["id", 980190962]]
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 7.6ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Integration Test Print"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.72460602739726027397260273972602675"], ["created_at", "2025-09-08 23:38:03.452355"], ["updated_at", "2025-09-08 23:38:03.452355"], ["printer_id", 980190965]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
Redirected to http://www.example.com/print_pricings/980190962
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
Completed 302 Found in 20ms (ActiveRecord: 1.1ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/print_pricings/980190963
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 302 Found in 24ms (ActiveRecord: 1.1ms (3 queries, 1 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.6ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:03.459290"], ["updated_at", "2025-09-08 23:38:03.459290"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 6ms (ActiveRecord: 1.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (1.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 4.5ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
  Rendered layout layouts/application.html.erb (Duration: 5.4ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 9ms (Views: 6.1ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190966], ["name", "Other Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:03.470519"], ["created_at", "2025-09-08 23:38:03.470535"], ["updated_at", "2025-09-08 23:38:03.470535"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190964], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 4.8ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 5.2ms | ActiveRecord: 0.7ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190966], ["job_name", "Other User's Print"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.77393150684931506849315068493150625"], ["created_at", "2025-09-08 23:38:03.476249"], ["updated_at", "2025-09-08 23:38:03.476249"], ["printer_id", 980190966]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-09 08:38:03 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190964" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:131:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (2.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:29.831454', '2025-09-08 23:38:29.831454', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:29.831454', '2025-09-08 23:38:29.831454', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:29.849486', '2025-09-08 23:38:29.849486', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:29.849486', '2025-09-08 23:38:29.849486', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$OvlxJH4/1xCHoFx10i6r5uUCtk9wmZpFeCbIPlraEgwTPYCIEUreS', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:29.857438', '2025-09-08 23:38:29.857438', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$unbvn5AFZH79LuMuc7.4m.jk//rkB6E24r/EJ9IWZVJ.nhgCZOkXC', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:29.857438', '2025-09-08 23:38:29.857438', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-08 23:38:29.939652"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Flow Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "150.0"], ["cost", "800.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:29.951184"], ["created_at", "2025-09-08 23:38:29.951195"], ["updated_at", "2025-09-08 23:38:29.951195"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/" for 127.0.0.1 at 2025-09-09 08:38:29 +0900
Processing by PrintPricingsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 10.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.9ms | GC: 0.0ms)
Completed 200 OK in 21ms (Views: 14.0ms | ActiveRecord: 1.3ms (3 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:38:30 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 7.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.5ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 7.3ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:30 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "printer_id" => "980190963", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "vat_percentage" => "21.0"}}
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.32611104452054794520547945205479537625"], ["created_at", "2025-09-08 23:38:30.018217"], ["updated_at", "2025-09-08 23:38:30.018217"], ["printer_id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 12ms (ActiveRecord: 1.0ms (3 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:30 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 4.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.7ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190963/edit" for 127.0.0.1 at 2025-09-09 08:38:30 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 3.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.2ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.0ms)
Started PATCH "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:30 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190963"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x00000001277a2f88>, params: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190963"} }[0m
  [1m[36mCACHE Printer Load (0.0ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.4ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "updated_at" = $2 WHERE "print_pricings"."id" = $3[0m  [["job_name", "Updated Flow Test Print"], ["updated_at", "2025-09-08 23:38:30.041891"], ["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 3ms (ActiveRecord: 0.5ms (4 queries, 3 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:30 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mPrinter Load (0.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 3.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.5ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:30 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 5ms (ActiveRecord: 0.4ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:30 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 6.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.9ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 7.5ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (24.2ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (21.7ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (23.1ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (20.6ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (23.7ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTruncate Tables (17.4ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (22.7ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (22.9ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTruncate Tables (17.0ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (14.1ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:34.413591', '2025-09-08 23:38:34.413591', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:34.413591', '2025-09-08 23:38:34.413591', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:34.427786', '2025-09-08 23:38:34.427786', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:34.427786', '2025-09-08 23:38:34.427786', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$sXOHhK0IjSvRiY0TnMOFsO4r3NrsD5e/2mzZ6t5u.hEaKpIPzTJL6', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.430839', '2025-09-08 23:38:34.430839', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$DRgxYJpNLJYK0fUww.dVi.jZkjJBffqG.LaTeT16p/.FS2n7AlsVa', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.430839', '2025-09-08 23:38:34.430839', 'EUR', 0.1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:34.411032', '2025-09-08 23:38:34.411032', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:34.411032', '2025-09-08 23:38:34.411032', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:34.427971', '2025-09-08 23:38:34.427971', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:34.427971', '2025-09-08 23:38:34.427971', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$.K0Ow76G9UEb/z8aa1CmZu6l7xsAypO5bWOd5VekXZ2LpwObLU66q', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.432969', '2025-09-08 23:38:34.432969', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$30fAMo6RHpfK/eKMvxI53.dPGXip89JTl2ip1SrCTHe.nyXwtqtRC', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.432969', '2025-09-08 23:38:34.432969', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:34.414564', '2025-09-08 23:38:34.414564', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:34.414564', '2025-09-08 23:38:34.414564', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:34.429451', '2025-09-08 23:38:34.429451', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:34.429451', '2025-09-08 23:38:34.429451', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$3VxFB67A2IPxo50VGH0ho.KqfUwNLkVS8hOiSXUGRR7piXToySciC', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.433113', '2025-09-08 23:38:34.433113', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$s.zwfkTNJvDKXR4.WvO4SO.qK9SIC5ZO7orQkNJc4qpgizVqn5iH2', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.433113', '2025-09-08 23:38:34.433113', 'EUR', 0.1)[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:34.414548', '2025-09-08 23:38:34.414548', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:34.414548', '2025-09-08 23:38:34.414548', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:34.430453', '2025-09-08 23:38:34.430453', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:34.430453', '2025-09-08 23:38:34.430453', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$2HMwyfKpQPYYiZNRYTUFyOr.5YlguIIXZ0zms2vy8B.uAr0aP41Ka', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.433409', '2025-09-08 23:38:34.433409', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$t/r3w8yRE5knWjMTUVNyZu85h219gfEN6Ho16ncit0Dpk7a3gEKhS', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.433409', '2025-09-08 23:38:34.433409', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:34.417748', '2025-09-08 23:38:34.417748', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:34.417748', '2025-09-08 23:38:34.417748', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:34.435126', '2025-09-08 23:38:34.435126', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:34.435126', '2025-09-08 23:38:34.435126', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$s49WFAq5DO5IHHtSb65pcOjBjUFec84o1NKnBxwaugIpe3J4x/Uwa', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.439118', '2025-09-08 23:38:34.439118', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$ewnzz0dTQzlseRLiS8Sjgev/FY/vRsW2IJsCe9COOh7lWub0t/oHq', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.439118', '2025-09-08 23:38:34.439118', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:34.417667', '2025-09-08 23:38:34.417667', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:34.417667', '2025-09-08 23:38:34.417667', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:34.435387', '2025-09-08 23:38:34.435387', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:34.435387', '2025-09-08 23:38:34.435387', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$weusGQFnFaa2PSWNGsSS5uYd4yJ/akhoqbXsPElS2kcMrg.2nC.ta', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.439443', '2025-09-08 23:38:34.439443', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$UrAHMowsL.YskSRVd72P1.8GWTGfxYw1hiETGCPIQamVShzPQgS4O', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.439443', '2025-09-08 23:38:34.439443', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (1.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:34.417163', '2025-09-08 23:38:34.417163', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:34.417163', '2025-09-08 23:38:34.417163', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:34.434064', '2025-09-08 23:38:34.434064', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:34.434064', '2025-09-08 23:38:34.434064', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$07zczMaWPCQV3n8w4WKrceN2edIvHHRz5bddCL2RyIyXexlo1jguy', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.437623', '2025-09-08 23:38:34.437623', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$ltu7fb1ACzarbMGtSoIHbOaPRbDLv2Trc174zrmknVRpqI0cGKhoC', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.437623', '2025-09-08 23:38:34.437623', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
-------------------------------------------------------
UserTest: test_should_have_default_values_for_new_users
-------------------------------------------------------
  [1m[36mFixtures Load (1.4ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:34.418432', '2025-09-08 23:38:34.418432', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:34.418432', '2025-09-08 23:38:34.418432', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:34.434567', '2025-09-08 23:38:34.434567', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:34.434567', '2025-09-08 23:38:34.434567', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$3DpOk8F.ySKt9gdjKGUbQ.8TxmX.qFTNl6HQwbE3z0K4dYda1dFi2', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.439279', '2025-09-08 23:38:34.439279', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$Bs/geGj/SQvHMcqILVeqxOfWaiNiibor7rPXKyqFHAY60Rrk4oWg6', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.439279', '2025-09-08 23:38:34.439279', 'EUR', 0.1)[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:34.417977', '2025-09-08 23:38:34.417977', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:34.417977', '2025-09-08 23:38:34.417977', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:34.435912', '2025-09-08 23:38:34.435912', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:34.435912', '2025-09-08 23:38:34.435912', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$X9us4Ryg1wiL37pEZUWorOavGkE4RT/yqBKJSkkGp6cCgRYYtXQKG', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.441444', '2025-09-08 23:38:34.441444', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$Cv4T7Yq5ZJIEQ0a.8nFq5.EG1BQocTz7Xk8i1gNPMawev0nvLWIm6', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.441444', '2025-09-08 23:38:34.441444', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintersControllerTest: test_should_destroy_printer
---------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-08 23:38:34.420551', '2025-09-08 23:38:34.420551', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-08 23:38:34.420551', '2025-09-08 23:38:34.420551', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-08 23:38:34.439137', '2025-09-08 23:38:34.439137', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-08 23:38:34.439137', '2025-09-08 23:38:34.439137', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$UTlSTRc2njv3sgyF9LU.5uD27xsgJXFg1CImdP9EQClO9zZvjEbpe', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.442743', '2025-09-08 23:38:34.442743', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$xqCDSiQJyXnB1vV.bix3vewPu/PWfH44y9EdKaWBDDLzWuqOZSg5u', DEFAULT, DEFAULT, DEFAULT, '2025-09-08 23:38:34.442743', '2025-09-08 23:38:34.442743', 'EUR', 0.1)[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (3.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
-------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
PrintersControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PrintersControllerTest: test_should_require_authentication
----------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
--------------------------------------------------
PrintersControllerTest: test_should_create_printer
--------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PrintersControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintersControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintersControllerTest: test_should_update_printer
--------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
------------------------------------------------
PrintersControllerTest: test_should_show_printer
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.465072"], ["updated_at", "2025-09-08 23:38:34.465072"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
UserTest: test_should_require_email
-----------------------------------
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.469930"], ["updated_at", "2025-09-08 23:38:34.469930"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
UserTest: test_should_require_default_energy_cost_per_kwh
---------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.478077"], ["created_at", "2025-09-08 23:38:34.478101"], ["updated_at", "2025-09-08 23:38:34.478101"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_require_default_currency
----------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_should_require_positive_default_energy_cost_per_kwh
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.6798630136986301369863013698630125"], ["created_at", "2025-09-08 23:38:34.494865"], ["updated_at", "2025-09-08 23:38:34.494865"], ["printer_id", 980190963]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (1.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Started GET "/printers/980190962/edit" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started DELETE "/printers/980190962" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Started GET "/printers" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
Started GET "/printers" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
Started GET "/printers/new" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
Started PATCH "/printers/980190962" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mPrinter Load (1.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.518203"], ["updated_at", "2025-09-08 23:38:34.518203"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
Started POST "/printers" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190963]]
Started GET "/printers/980190962" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mPrinter Destroy (1.6ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190963]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintersController#edit as HTML
  Parameters: {"id" => "980190962"}
Processing by PrintersController#index as HTML
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Processing by PrintersController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintersController#index as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
Processing by PrintersController#create as HTML
  Parameters: {"printer" => {"name" => "Test Printer", "manufacturer" => "Prusa", "power_consumption" => "200", "cost" => "500", "payoff_goal_years" => "3"}}
Completed 401 Unauthorized in 6ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Processing by PrintersController#new as HTML
Processing by PrintersController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.543020"], ["updated_at", "2025-09-08 23:38:34.543020"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.535265"], ["created_at", "2025-09-08 23:38:34.535308"], ["updated_at", "2025-09-08 23:38:34.535308"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendering printers/index.html.erb within layouts/application
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.545482"], ["created_at", "2025-09-08 23:38:34.545531"], ["updated_at", "2025-09-08 23:38:34.545531"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.545474"], ["created_at", "2025-09-08 23:38:34.545493"], ["updated_at", "2025-09-08 23:38:34.545493"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "printers" WHERE "printers"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/printers/980190963
Completed 302 Found in 8ms (ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190962]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 ORDER BY "printers"."name" ASC[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  Rendered printers/index.html.erb within layouts/application (Duration: 3.6ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" ORDER BY "printers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Processing by PrintersController#update as HTML
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  Parameters: {"printer" => {"name" => "Updated Printer Name", "power_consumption" => "250"}, "id" => "980190962"}
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.551391"], ["updated_at", "2025-09-08 23:38:34.551391"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendering printers/edit.html.erb within layouts/application
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
------------------------------------------------------------------------
  Rendered printers/edit.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering printers/new.html.erb within layouts/application
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrinter Destroy (0.3ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering printers/show.html.erb within layouts/application
Redirected to http://www.example.com/printers
  Rendered printers/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
Completed 302 Found in 20ms (ActiveRecord: 1.3ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered printers/new.html.erb within layouts/application (Duration: 2.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 11.4ms | GC: 0.0ms)
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.555398"], ["created_at", "2025-09-08 23:38:34.555452"], ["updated_at", "2025-09-08 23:38:34.555452"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.554821"], ["updated_at", "2025-09-08 23:38:34.554821"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  Rendered layout layouts/application.html.erb (Duration: 4.4ms | GC: 0.0ms)
Completed 200 OK in 20ms (Views: 12.9ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
Completed 200 OK in 24ms (Views: 8.2ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.558166"], ["updated_at", "2025-09-08 23:38:34.558166"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendered layout layouts/application.html.erb (Duration: 4.3ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 5.9ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  Rendered layout layouts/application.html.erb (Duration: 9.2ms | GC: 0.0ms)
Completed 200 OK in 20ms (Views: 11.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Update (0.5ms)[0m  [1m[33mUPDATE "printers" SET "name" = $1, "power_consumption" = $2, "updated_at" = $3 WHERE "printers"."id" = $4[0m  [["name", "Updated Printer Name"], ["power_consumption", "250.0"], ["updated_at", "2025-09-08 23:38:34.563564"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
Redirected to http://www.example.com/printers/980190962
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
Completed 302 Found in 15ms (ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 0.0ms)
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
----------------------------------------------------
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.564307"], ["created_at", "2025-09-08 23:38:34.564364"], ["updated_at", "2025-09-08 23:38:34.564364"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
--------------------------------------------------------------
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mPrinter Update (0.6ms)[0m  [1m[33mUPDATE "printers" SET "cost" = $1, "updated_at" = $2 WHERE "printers"."id" = $3[0m  [["cost", "1000.0"], ["updated_at", "2025-09-08 23:38:34.566753"], ["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.568521"], ["updated_at", "2025-09-08 23:38:34.568521"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.570183"], ["updated_at", "2025-09-08 23:38:34.570183"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.570457"], ["updated_at", "2025-09-08 23:38:34.570457"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.571744"], ["updated_at", "2025-09-08 23:38:34.571744"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.570959"], ["updated_at", "2025-09-08 23:38:34.570959"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.571969"], ["created_at", "2025-09-08 23:38:34.572004"], ["updated_at", "2025-09-08 23:38:34.572004"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (4.0ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190965], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.564020"], ["created_at", "2025-09-08 23:38:34.564220"], ["updated_at", "2025-09-08 23:38:34.564220"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.574395"], ["created_at", "2025-09-08 23:38:34.574434"], ["updated_at", "2025-09-08 23:38:34.574434"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.572314"], ["updated_at", "2025-09-08 23:38:34.572314"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.84784931506849315068493150684931375"], ["created_at", "2025-09-08 23:38:34.573635"], ["updated_at", "2025-09-08 23:38:34.573635"], ["printer_id", 980190964]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190965], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.575242"], ["created_at", "2025-09-08 23:38:34.575257"], ["updated_at", "2025-09-08 23:38:34.575257"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.574548"], ["created_at", "2025-09-08 23:38:34.574585"], ["updated_at", "2025-09-08 23:38:34.574585"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.574355"], ["created_at", "2025-09-08 23:38:34.574542"], ["updated_at", "2025-09-08 23:38:34.574542"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.575791"], ["updated_at", "2025-09-08 23:38:34.575791"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
-----------------------------------------------------------
UserProfilesControllerTest: test_should_update_user_profile
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.576860"], ["created_at", "2025-09-08 23:38:34.576899"], ["updated_at", "2025-09-08 23:38:34.576899"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_edit
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.579756"], ["updated_at", "2025-09-08 23:38:34.579756"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.582197"], ["created_at", "2025-09-08 23:38:34.582215"], ["updated_at", "2025-09-08 23:38:34.582215"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_show
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/profile" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
Started PATCH "/profile" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by UserProfilesController#show as HTML
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.585603"], ["created_at", "2025-09-08 23:38:34.585640"], ["updated_at", "2025-09-08 23:38:34.585640"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
Processing by UserProfilesController#update as HTML
  Parameters: {"user" => {"default_currency" => "EUR", "default_energy_cost_per_kwh" => "0.15"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
--------------------------------------------------------------
UserProfilesControllerTest: test_should_require_authentication
--------------------------------------------------------------
Started GET "/profile/edit" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/show.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-08 23:38:34.590460"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by UserProfilesController#edit as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/edit.html.erb within layouts/application
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered user_profiles/edit.html.erb within layouts/application (Duration: 2.4ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered user_profiles/show.html.erb within layouts/application (Duration: 5.8ms | GC: 0.0ms)
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 7.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.5ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 4.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-08 23:38:34.598177"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-08 23:38:34.599673"], ["default_currency", "JPY"], ["default_energy_cost_per_kwh", "35.0"], ["id", 980190962]]
Processing by PrintPricingsController#new as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 17ms (ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#index as HTML
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.598507"], ["updated_at", "2025-09-08 23:38:34.598507"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Flow Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "150.0"], ["cost", "800.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.606365"], ["created_at", "2025-09-08 23:38:34.606410"], ["updated_at", "2025-09-08 23:38:34.606410"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.607857"], ["updated_at", "2025-09-08 23:38:34.607857"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Complete Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "250.0"], ["cost", "300000.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.607486"], ["created_at", "2025-09-08 23:38:34.607529"], ["updated_at", "2025-09-08 23:38:34.607529"], ["daily_usage_hours", 10], ["investment_return_years", 3], ["repair_cost_percentage", "8.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mPrintPricing Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Other Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.611269"], ["created_at", "2025-09-08 23:38:34.611286"], ["updated_at", "2025-09-08 23:38:34.611286"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "printer_id" => "980190964", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190965], ["name", "Other Integration Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.614278"], ["created_at", "2025-09-08 23:38:34.614295"], ["updated_at", "2025-09-08 23:38:34.614295"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Other User's Print"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.77393150684931506849315068493150625"], ["created_at", "2025-09-08 23:38:34.615896"], ["updated_at", "2025-09-08 23:38:34.615896"], ["printer_id", 980190964]]
  [1m[36mPrintPricing Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mPrintPricing Create (0.8ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-08 23:38:34.619839"], ["updated_at", "2025-09-08 23:38:34.619839"], ["printer_id", 980190964]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (1.0ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190965], ["job_name", "Other User's Print"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.77393150684931506849315068493150625"], ["created_at", "2025-09-08 23:38:34.621845"], ["updated_at", "2025-09-08 23:38:34.621845"], ["printer_id", 980190965]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 17.7ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 19.0ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
Completed 200 OK in 23ms (Views: 18.4ms | ActiveRecord: 1.0ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Destroy (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started GET "/profile" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 14.0ms | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 15.9ms | GC: 0.0ms)
Completed 200 OK in 17ms (Views: 14.9ms | ActiveRecord: 1.4ms (3 queries, 0 cached) | GC: 0.0ms)
Completed 404 Not Found in 4ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 7.1ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:131:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.7ms | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:181:in 'block in <class:PrintPricingFlowsTest>'
Completed 200 OK in 21ms (Views: 10.2ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 16ms (ActiveRecord: 1.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 25ms (ActiveRecord: 1.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendering layout layouts/application.html.erb
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendering print_pricings/edit.html.erb within layouts/application
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x000000012232e6a0>, params: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 7.2ms | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
Processing by PrintPricingsController#new as HTML
  Rendered layout layouts/application.html.erb (Duration: 12.5ms | GC: 0.0ms)
Processing by PrintPricingsController#index as HTML
Completed 422 Unprocessable Content in 26ms (Views: 18.7ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 17.0ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  Rendered layout layouts/application.html.erb (Duration: 18.6ms | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 18.6ms | ActiveRecord: 1.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 7.0ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
Processing by UserProfilesController#show as HTML
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "printer_id" => "980190964", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "vat_percentage" => "21.0"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering print_pricings/show.html.erb within layouts/application
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 1.3ms | GC: 0.0ms)
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.32611104452054794520547945205479537625"], ["created_at", "2025-09-08 23:38:34.675431"], ["updated_at", "2025-09-08 23:38:34.675431"], ["printer_id", 980190964]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x00000001222edc18>, params: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 29.1ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 29.8ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 5.7ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 35ms (Views: 30.2ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 12.0ms | GC: 0.0ms)
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 22.1ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 14.0ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 29ms (Views: 23.6ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.6ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 21ms (Views: 15.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_options_returns_correct_format
----------------------------------------------------------------
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-08 23:38:34.683569"], ["updated_at", "2025-09-08 23:38:34.683569"], ["printer_id", nil]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 25ms (ActiveRecord: 1.1ms (3 queries, 1 cached) | GC: 0.0ms)
  [1m[36mCACHE Printer Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_symbol_returns_correct_symbols
----------------------------------------------------------------
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x0000000122107638>, params: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190962"} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CurrencyHelperTest: test_format_currency_handles_different_currencies_correctly
-------------------------------------------------------------------------------
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 13.1ms | GC: 0.0ms)
Started POST "/users" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
-------------------------------------------------------------------------
CurrencyHelperTest: test_currency_decimals_returns_correct_decimal_places
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 17.0ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
--------------------------------------------------------------------------
CurrencyHelperTest: test_currency_sample_values_returns_appropriate_values
--------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
Completed 200 OK in 35ms (Views: 18.7ms | ActiveRecord: 1.2ms (3 queries, 1 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/print_pricings/980190963
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
PrinterTest: test_should_belong_to_user
---------------------------------------
Completed 302 Found in 30ms (ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_true_for_old_printer_past_payoff_goal
PrinterTest: test_paid_off?_should_return_false_for_new_printer
-------------------------------------------------------------------------------
---------------------------------------------------------------
------------------------------------------------------------
CurrencyHelperTest: test_zero_decimal_currencies_returns_JPY
------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-08 23:38:34.707307"], ["updated_at", "2025-09-08 23:38:34.707307"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_correct_months_remaining
-------------------------------------------------------------------------
-------------------------------------
PrinterTest: test_should_require_name
-------------------------------------
  [1m[36mPrintPricing Update (0.3ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "final_price" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Job Name"], ["final_price", "1.84784931506849315068493150684931375"], ["updated_at", "2025-09-08 23:38:34.701407"], ["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 13.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.9ms | GC: 0.0ms)
Completed 200 OK in 21ms (Views: 14.5ms | ActiveRecord: 0.8ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started GET "/print_pricings/980190963/edit" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2024-09-08 23:38:34.716300"], ["created_at", "2025-09-08 23:38:34.718725"], ["updated_at", "2025-09-08 23:38:34.718725"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.715392"], ["created_at", "2025-09-08 23:38:34.715430"], ["updated_at", "2025-09-08 23:38:34.715430"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PrinterTest: test_should_have_valid_manufacturer_options
--------------------------------------------------------
Redirected to http://www.example.com/
Completed 303 See Other in 24ms (ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
----------------------------------------------
PrinterTest: test_should_require_positive_cost
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started GET "/" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
-------------------------------------------------------
PrinterTest: test_should_be_valid_with_valid_attributes
-------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 23:38:34.714056"], ["created_at", "2025-09-08 23:38:34.719046"], ["updated_at", "2025-09-08 23:38:34.719046"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
-----------------------------------------------------------
PrinterTest: test_should_require_positive_payoff_goal_years
-----------------------------------------------------------
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 37ms (ActiveRecord: 1.1ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCACHE User Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
-----------------------------------------------------
PrinterTest: test_should_set_date_added_automatically
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_0_for_paid_off_printer
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrinterTest: test_should_require_positive_power_consumption
-----------------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190966], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 3.4ms | GC: 0.0ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 4.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 5.0ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.1ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 17ms (Views: 9.2ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.741435"], ["created_at", "2025-09-08 23:38:34.741502"], ["updated_at", "2025-09-08 23:38:34.741502"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-08 23:38:34.744901"], ["created_at", "2025-09-08 23:38:34.746652"], ["updated_at", "2025-09-08 23:38:34.746652"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started PATCH "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190963"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190966], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-08 23:38:34.759921"], ["created_at", "2025-09-08 23:38:34.760172"], ["updated_at", "2025-09-08 23:38:34.760172"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x0000000120c030c0>, params: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190963"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mCACHE Printer Load (0.0ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190966]]
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 11.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.5ms | GC: 0.0ms)
Completed 200 OK in 15ms (Views: 12.4ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "printer_id" => "980190965", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (2.6ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "updated_at" = $2 WHERE "print_pricings"."id" = $3[0m  [["job_name", "Updated Flow Test Print"], ["updated_at", "2025-09-08 23:38:34.767347"], ["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 25ms (ActiveRecord: 2.7ms (4 queries, 3 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (3.9ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Create (1.8ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190966], ["job_name", "Integration Test Print"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.72460602739726027397260273972602675"], ["created_at", "2025-09-08 23:38:34.791695"], ["updated_at", "2025-09-08 23:38:34.791695"], ["printer_id", 980190965]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 18ms (ActiveRecord: 9.1ms (3 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190966], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 7.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.0ms | GC: 0.0ms)
Completed 200 OK in 22ms (Views: 7.9ms | ActiveRecord: 0.7ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 4.4ms | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendered layout layouts/application.html.erb (Duration: 4.9ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 5.0ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.0ms)
Started DELETE "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.4ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 5ms (ActiveRecord: 0.6ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 08:38:34 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 2.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (14.0ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (14.3ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (11.7ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (12.9ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (11.9ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (16.1ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTruncate Tables (13.5ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (12.9ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (12.5ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (12.3ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 00:04:03.408236', '2025-09-09 00:04:03.408236', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 00:04:03.408236', '2025-09-09 00:04:03.408236', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 00:04:03.437799', '2025-09-09 00:04:03.437799', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 00:04:03.437799', '2025-09-09 00:04:03.437799', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$03wJcxfjWdbwN2WPRJfXyuiuHYmFZTNznRgzL2gmx6XcfUXTPFvbm', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.442468', '2025-09-09 00:04:03.442468', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$/5WqGQ56Jsc4UqfJzjobmuXyIvgPTG/tzn3P6C29McSXDqdqSaf2.', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.442468', '2025-09-09 00:04:03.442468', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (0.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 00:04:03.413049', '2025-09-09 00:04:03.413049', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 00:04:03.413049', '2025-09-09 00:04:03.413049', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 00:04:03.438891', '2025-09-09 00:04:03.438891', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 00:04:03.438891', '2025-09-09 00:04:03.438891', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$fkv966dE9tkk35bFHY.FOuR2OJvT5s/sVumLzWS2yUxFeWIBQfWO6', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.443227', '2025-09-09 00:04:03.443227', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$M2qhohBnBXI5BsrmdbpU3.60E076uad9Saa68FQh3inmNsyNzUBhm', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.443227', '2025-09-09 00:04:03.443227', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 00:04:03.411893', '2025-09-09 00:04:03.411893', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 00:04:03.411893', '2025-09-09 00:04:03.411893', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 00:04:03.440673', '2025-09-09 00:04:03.440673', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 00:04:03.440673', '2025-09-09 00:04:03.440673', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$kcs/8RFlcsKs7pkbnsy14.6F3QWnrG.ZpCAX1nogQKfxE1eWU9LvS', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.446443', '2025-09-09 00:04:03.446443', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$7t4RUNjpnEAVI5UNORzwn.iTtfunD/TuzgDphGA56ezv6YhSrSgte', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.446443', '2025-09-09 00:04:03.446443', 'EUR', 0.1)[0m
  [1m[35m (3.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mFixtures Load (0.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 00:04:03.413501', '2025-09-09 00:04:03.413501', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 00:04:03.413501', '2025-09-09 00:04:03.413501', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 00:04:03.447926', '2025-09-09 00:04:03.447926', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 00:04:03.447926', '2025-09-09 00:04:03.447926', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$fAjaHdEE174Dgf2iAX4/1O3ZXUznSnUgYHBeXvKVdkOcNEv4.oAkW', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.452291', '2025-09-09 00:04:03.452291', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$yjnR2Ucaxq5LmjJ/XNU89uO3ogdZXSCPuBj9.Xfph0dKoWd8XWO32', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.452291', '2025-09-09 00:04:03.452291', 'EUR', 0.1)[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
  [1m[36mFixtures Load (1.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 00:04:03.420245', '2025-09-09 00:04:03.420245', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 00:04:03.420245', '2025-09-09 00:04:03.420245', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 00:04:03.449451', '2025-09-09 00:04:03.449451', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 00:04:03.449451', '2025-09-09 00:04:03.449451', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$9.jMCksFTJq28IchkvIP9eGff6cWC1IIP32WmVOxyGVxlPK3XdR1G', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.454394', '2025-09-09 00:04:03.454394', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$xcOCJvKvST6ULhM8ZthZyejI/qlQV9UWw9XlAtPz6n6/GoCRmc3Ee', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.454394', '2025-09-09 00:04:03.454394', 'EUR', 0.1)[0m
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mFixtures Load (0.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 00:04:03.414246', '2025-09-09 00:04:03.414246', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 00:04:03.414246', '2025-09-09 00:04:03.414246', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 00:04:03.450259', '2025-09-09 00:04:03.450259', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 00:04:03.450259', '2025-09-09 00:04:03.450259', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$D7aX/cA5FzHhvPV5.NiupeTafQSAS/xw6H2y8bATspxfqSW4IuCOu', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.454734', '2025-09-09 00:04:03.454734', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$S9NMKqkPUSVm.ghu8YUhxOjp9dJhfewnb7Ah9eAizna1h4t.vvmgi', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.454734', '2025-09-09 00:04:03.454734', 'EUR', 0.1)[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.4ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 00:04:03.419505', '2025-09-09 00:04:03.419505', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 00:04:03.419505', '2025-09-09 00:04:03.419505', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 00:04:03.448800', '2025-09-09 00:04:03.448800', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 00:04:03.448800', '2025-09-09 00:04:03.448800', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$GiFVrpxR9iAhyNxIC..NG.8G.4V7dwlLor5XAVHxzyXnVKOlMxcS6', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.455010', '2025-09-09 00:04:03.455010', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$eLhocBczC4ltO2qvtsb7p.NAHO5x4nWFA21.foPQIKPFR5/1t6UOW', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.455010', '2025-09-09 00:04:03.455010', 'EUR', 0.1)[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 00:04:03.419887', '2025-09-09 00:04:03.419887', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 00:04:03.419887', '2025-09-09 00:04:03.419887', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 00:04:03.451799', '2025-09-09 00:04:03.451799', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 00:04:03.451799', '2025-09-09 00:04:03.451799', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$jl24UN5qiX0VOBVX4RtUTu8Zs3UfLiDoqiiZuGgdLiYdFMZtmfXJG', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.456886', '2025-09-09 00:04:03.456886', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$3fj9k6wQ3tg8bLF/RvcIiOXoEdPD6bA65GW1Vi0p2P.BE40qeU4Ty', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.456886', '2025-09-09 00:04:03.456886', 'EUR', 0.1)[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 00:04:03.414401', '2025-09-09 00:04:03.414401', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 00:04:03.414401', '2025-09-09 00:04:03.414401', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 00:04:03.449891', '2025-09-09 00:04:03.449891', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 00:04:03.449891', '2025-09-09 00:04:03.449891', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$rEQDNhMMbjR20jXEBY5.Zuj0uUIs.F9B8yfmBNCFA4a/duBIsXW4q', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.457101', '2025-09-09 00:04:03.457101', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$7onac7GTYo3vwzzHtviLzuek2h/8piSGVOoPm4KFtwioPRzTVOgAC', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.457101', '2025-09-09 00:04:03.457101', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.3ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 00:04:03.420483', '2025-09-09 00:04:03.420483', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 00:04:03.420483', '2025-09-09 00:04:03.420483', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 00:04:03.453445', '2025-09-09 00:04:03.453445', 8, 3, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 00:04:03.453445', '2025-09-09 00:04:03.453445', 6, 2, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$rTdk5Dr.kzjQkqYUsuczf.G5vrlhs2yGLoOeSdrg.FvvDnWlOok1K', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.458169', '2025-09-09 00:04:03.458169', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$ebKBA.oPjkaFVAoJRA4pfOaTBaAtGh/iBsUB5eiF2nkYoDTWRcIR2', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 00:04:03.458169', '2025-09-09 00:04:03.458169', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (2.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.477015"], ["updated_at", "2025-09-09 00:04:03.477015"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.479833"], ["updated_at", "2025-09-09 00:04:03.479833"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.478576"], ["updated_at", "2025-09-09 00:04:03.478576"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.487832"], ["created_at", "2025-09-09 00:04:03.487856"], ["updated_at", "2025-09-09 00:04:03.487856"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.487440"], ["updated_at", "2025-09-09 00:04:03.487440"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.487690"], ["updated_at", "2025-09-09 00:04:03.487690"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.489977"], ["updated_at", "2025-09-09 00:04:03.489977"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.489524"], ["updated_at", "2025-09-09 00:04:03.489524"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.489979"], ["created_at", "2025-09-09 00:04:03.490001"], ["updated_at", "2025-09-09 00:04:03.490001"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (3.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.490358"], ["created_at", "2025-09-09 00:04:03.490504"], ["updated_at", "2025-09-09 00:04:03.490504"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.493626"], ["updated_at", "2025-09-09 00:04:03.493626"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrinter Create (2.3ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.495100"], ["created_at", "2025-09-09 00:04:03.495126"], ["updated_at", "2025-09-09 00:04:03.495126"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.497357"], ["created_at", "2025-09-09 00:04:03.497380"], ["updated_at", "2025-09-09 00:04:03.497380"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.84784931506849315068493150684931375"], ["created_at", "2025-09-09 00:04:03.496817"], ["updated_at", "2025-09-09 00:04:03.496817"], ["printer_id", 980190963]]
  [1m[36mPrinter Create (1.1ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.498078"], ["created_at", "2025-09-09 00:04:03.498103"], ["updated_at", "2025-09-09 00:04:03.498103"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.497752"], ["updated_at", "2025-09-09 00:04:03.497752"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.499117"], ["created_at", "2025-09-09 00:04:03.499139"], ["updated_at", "2025-09-09 00:04:03.499139"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.499967"], ["updated_at", "2025-09-09 00:04:03.499967"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.505436"], ["created_at", "2025-09-09 00:04:03.505459"], ["updated_at", "2025-09-09 00:04:03.505459"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.504777"], ["created_at", "2025-09-09 00:04:03.504848"], ["updated_at", "2025-09-09 00:04:03.504848"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.507755"], ["created_at", "2025-09-09 00:04:03.507777"], ["updated_at", "2025-09-09 00:04:03.507777"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.514603"], ["updated_at", "2025-09-09 00:04:03.514603"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.517025"], ["updated_at", "2025-09-09 00:04:03.517025"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.517235"], ["updated_at", "2025-09-09 00:04:03.517235"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.2ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.515769"], ["created_at", "2025-09-09 00:04:03.515780"], ["updated_at", "2025-09-09 00:04:03.515780"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_require_default_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.519047"], ["created_at", "2025-09-09 00:04:03.519058"], ["updated_at", "2025-09-09 00:04:03.519058"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.519233"], ["created_at", "2025-09-09 00:04:03.519245"], ["updated_at", "2025-09-09 00:04:03.519245"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
UserTest: test_should_require_default_energy_cost_per_kwh
---------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
-------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_should_require_positive_default_energy_cost_per_kwh
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
UserTest: test_should_have_default_values_for_new_users
-------------------------------------------------------
  [1m[36mPrinter Update (0.3ms)[0m  [1m[33mUPDATE "printers" SET "cost" = $1, "updated_at" = $2 WHERE "printers"."id" = $3[0m  [["cost", "1000.0"], ["updated_at", "2025-09-09 00:04:03.523267"], ["id", 980190964]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.527131"], ["updated_at", "2025-09-09 00:04:03.527131"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.532803"], ["created_at", "2025-09-09 00:04:03.532831"], ["updated_at", "2025-09-09 00:04:03.532831"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (3.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.531986"], ["updated_at", "2025-09-09 00:04:03.531986"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_show
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
------------------------------------------------
UserProfilesControllerTest: test_should_get_edit
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
  [1m[36mPrintPricing Create (0.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.6798630136986301369863013698630125"], ["created_at", "2025-09-09 00:04:03.537175"], ["updated_at", "2025-09-09 00:04:03.537175"], ["printer_id", 980190964]]
UserProfilesControllerTest: test_should_update_user_profile
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
  [1m[36mPrintPricing Load (1.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190964]]
UserProfilesControllerTest: test_should_require_authentication
--------------------------------------------------------------
  [1m[36mPrintPricing Destroy (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PrintersControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintersControllerTest: test_should_create_printer
--------------------------------------------------
---------------------------------------------
PrintersControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190964]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintersControllerTest: test_should_destroy_printer
---------------------------------------------------
----------------------------------------------------------
PrintersControllerTest: test_should_require_authentication
----------------------------------------------------------
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190964]]
  [1m[36mPrinter Destroy (0.1ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190964]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190964]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/profile/edit" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintersControllerTest: test_should_get_edit
--------------------------------------------
Started PATCH "/profile" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/profile" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/profile" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers/new" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Processing by UserProfilesController#edit as HTML
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by UserProfilesController#update as HTML
  Parameters: {"user" => {"default_currency" => "EUR", "default_energy_cost_per_kwh" => "0.15"}}
Started GET "/printers" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Processing by UserProfilesController#show as HTML
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/edit.html.erb within layouts/application
  [1m[36mPrinter Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Started DELETE "/printers/980190962" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Started POST "/printers" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  Rendered user_profiles/edit.html.erb within layouts/application (Duration: 4.8ms | GC: 0.0ms)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (1.7ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-09 00:04:03.609102"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 15ms (ActiveRecord: 3.1ms (1 query, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/show.html.erb within layouts/application
Processing by PrintersController#new as HTML
  Rendered layout layouts/application.html.erb (Duration: 11.8ms | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered user_profiles/show.html.erb within layouts/application (Duration: 5.6ms | GC: 0.0ms)
Processing by UserProfilesController#show as HTML
Processing by PrintersController#index as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 20ms (Views: 13.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
--------------------------------------------------
PrintersControllerTest: test_should_update_printer
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintersControllerTest: test_should_show_printer
------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering printers/new.html.erb within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 401 Unauthorized in 6ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/printers/980190962" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#create as HTML
  Rendered layout layouts/application.html.erb (Duration: 15.3ms | GC: 0.0ms)
  Parameters: {"printer" => {"name" => "Test Printer", "manufacturer" => "Prusa", "power_consumption" => "200", "cost" => "500", "payoff_goal_years" => "3"}}
Completed 200 OK in 24ms (Views: 16.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendered printers/new.html.erb within layouts/application (Duration: 3.2ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering printers/index.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started GET "/printers/980190962" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Processing by PrintersController#update as HTML
  Parameters: {"printer" => {"name" => "Updated Printer Name", "power_consumption" => "250"}, "id" => "980190962"}
Processing by PrintersController#index as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Processing by PrintersController#show as HTML
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  Parameters: {"id" => "980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "printers" WHERE "printers"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#destroy as HTML
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Parameters: {"id" => "980190962"}
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.3ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 21ms (Views: 12.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 ORDER BY "printers"."name" ASC[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
Started GET "/printers/980190962/edit" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mPrinter Update (0.4ms)[0m  [1m[33mUPDATE "printers" SET "name" = $1, "power_consumption" = $2, "updated_at" = $3 WHERE "printers"."id" = $4[0m  [["name", "Updated Printer Name"], ["power_consumption", "250.0"], ["updated_at", "2025-09-09 00:04:03.639249"], ["id", 980190962]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering printers/show.html.erb within layouts/application
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered printers/show.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 3.9ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 4.7ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  Rendered printers/index.html.erb within layouts/application (Duration: 11.7ms | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.642678"], ["created_at", "2025-09-09 00:04:03.642698"], ["updated_at", "2025-09-09 00:04:03.642698"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
Redirected to http://www.example.com/printers/980190965
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190962]]
Completed 302 Found in 16ms (ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mPrinter Destroy (0.3ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 19.4ms | GC: 0.0ms)
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Processing by PrintPricingsController#index as HTML
Completed 200 OK in 29ms (Views: 20.4ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" ORDER BY "printers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/printers/980190962
Completed 302 Found in 19ms (ActiveRecord: 1.3ms (2 queries, 0 cached) | GC: 0.0ms)
Redirected to http://www.example.com/printers
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
Completed 302 Found in 15ms (ActiveRecord: 1.3ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering print_pricings/index.html.erb within layouts/application
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrinter Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mPrintPricing Load (1.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrintPricing Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
Processing by PrintersController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrintPricing Load (0.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
-------------------------------------------------------------
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x0000000122dfe1c0>, params: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190962"} }[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 14.2ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
---------------------------------------------------------------------------------
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | GC: 0.0ms)
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mPrinter Load (1.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 19ms (Views: 15.7ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 5.3ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by PrintPricingsController#destroy as HTML
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 12.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Update (0.3ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "final_price" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Job Name"], ["final_price", "1.84784931506849315068493150684931375"], ["updated_at", "2025-09-09 00:04:03.664871"], ["id", 980190962]]
  Rendered layout layouts/application.html.erb (Duration: 9.4ms | GC: 0.0ms)
Completed 200 OK in 19ms (Views: 11.1ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 13.0ms | ActiveRecord: 1.0ms (3 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mPrintPricing Destroy (0.8ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
-------------------------------------------------------------------------------------
  Rendering printers/edit.html.erb within layouts/application
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  Rendered printers/edit.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.666683"], ["updated_at", "2025-09-09 00:04:03.666683"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 5.2ms | GC: 0.0ms)
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mPrintPricing Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x0000000122b5f838>, params: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 23ms (ActiveRecord: 2.4ms (3 queries, 0 cached) | GC: 0.0ms)
Completed 200 OK in 20ms (Views: 7.7ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 17ms (ActiveRecord: 2.3ms (2 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x000000011fffa8c8>, params: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  Rendering layout layouts/application.html.erb
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-09 00:04:03.679243"], ["updated_at", "2025-09-09 00:04:03.679243"], ["printer_id", nil]]
  Rendering print_pricings/edit.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  Rendering layout layouts/application.html.erb
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190965], ["name", "Other Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.681515"], ["created_at", "2025-09-09 00:04:03.681559"], ["updated_at", "2025-09-09 00:04:03.681559"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 7.2ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-09 00:04:03.679702"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 11.7ms | GC: 0.0ms)
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190965], ["job_name", "Other User's Print"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.77393150684931506849315068493150625"], ["created_at", "2025-09-09 00:04:03.692313"], ["updated_at", "2025-09-09 00:04:03.692313"], ["printer_id", 980190965]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 10.6ms | GC: 0.0ms)
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 12.4ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 22ms (Views: 15.3ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Completed 200 OK in 23ms (Views: 12.5ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 30ms (ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_false_for_new_printer
---------------------------------------------------------------
  Rendering layout layouts/application.html.erb
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.6ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Flow Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "150.0"], ["cost", "800.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.698140"], ["created_at", "2025-09-09 00:04:03.698174"], ["updated_at", "2025-09-09 00:04:03.698174"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrintPricing Load (0.9ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 1.4ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 4.0ms | GC: 0.0ms)
Completed 404 Not Found in 5ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:131:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mUser Update (2.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-09 00:04:03.689903"], ["default_currency", "JPY"], ["default_energy_cost_per_kwh", "35.0"], ["id", 980190962]]
  Rendered layout layouts/application.html.erb (Duration: 6.5ms | GC: 0.0ms)
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.701521"], ["updated_at", "2025-09-09 00:04:03.701521"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Completed 200 OK in 12ms (Views: 8.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.707372"], ["created_at", "2025-09-09 00:04:03.707394"], ["updated_at", "2025-09-09 00:04:03.707394"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
Started POST "/users" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
-------------------------------------------------------
Processing by Devise::RegistrationsController#create as HTML
PrinterTest: test_should_be_valid_with_valid_attributes
-------------------------------------------------------
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Processing by PrintPricingsController#index as HTML
Processing by PrintPricingsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Other Integration Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.717046"], ["created_at", "2025-09-09 00:04:03.717084"], ["updated_at", "2025-09-09 00:04:03.717084"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_true_for_old_printer_past_payoff_goal
-------------------------------------------------------------------------------
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 4.8ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
PrinterTest: test_should_belong_to_user
---------------------------------------
  Rendered layout layouts/application.html.erb (Duration: 5.5ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 5.3ms | ActiveRecord: 0.7ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
PrinterTest: test_should_set_date_added_automatically
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_correct_months_remaining
-------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 37.6ms | GC: 0.0ms)
-----------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_0_for_paid_off_printer
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 00:04:03.720727"], ["updated_at", "2025-09-09 00:04:03.720727"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 39.2ms | GC: 0.0ms)
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Complete Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "250.0"], ["cost", "300000.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.719712"], ["created_at", "2025-09-09 00:04:03.719908"], ["updated_at", "2025-09-09 00:04:03.719908"], ["daily_usage_hours", 10], ["investment_return_years", 3], ["repair_cost_percentage", "8.0"]]
Completed 422 Unprocessable Content in 48ms (Views: 39.4ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2024-09-09 00:04:03.725744"], ["created_at", "2025-09-09 00:04:03.728663"], ["updated_at", "2025-09-09 00:04:03.728663"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-09 00:04:03.726890"], ["created_at", "2025-09-09 00:04:03.727755"], ["updated_at", "2025-09-09 00:04:03.727755"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
Redirected to http://www.example.com/
Completed 303 See Other in 19ms (ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrinterTest: test_should_require_positive_cost
----------------------------------------------
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "printer_id" => "980190965", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
PrinterTest: test_should_require_name
-------------------------------------
Started GET "/" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.727080"], ["created_at", "2025-09-09 00:04:03.727133"], ["updated_at", "2025-09-09 00:04:03.727133"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Create (0.8ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Other User's Print"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.77393150684931506849315068493150625"], ["created_at", "2025-09-09 00:04:03.731084"], ["updated_at", "2025-09-09 00:04:03.731084"], ["printer_id", 980190964]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by PrintPricingsController#index as HTML
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (2.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-09 00:04:03.730682"], ["created_at", "2025-09-09 00:04:03.732843"], ["updated_at", "2025-09-09 00:04:03.732843"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
-----------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
PrinterTest: test_should_require_positive_payoff_goal_years
-----------------------------------------------------------
  [1m[36mPrinter Load (4.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 404 Not Found in 2ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:181:in 'block in <class:PrintPricingFlowsTest>'
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-09 00:04:03.746225"], ["updated_at", "2025-09-09 00:04:03.746225"], ["printer_id", 980190965]]
-----------------------------------------------------------
PrinterTest: test_should_require_positive_power_consumption
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190964], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
------------------------------------------------------------
CurrencyHelperTest: test_zero_decimal_currencies_returns_JPY
------------------------------------------------------------
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CurrencyHelperTest: test_format_currency_handles_different_currencies_correctly
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 0.0ms)
-------------------------------------------------------------------------
Completed 200 OK in 10ms (Views: 3.8ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
--------------------------------------------------------
PrinterTest: test_should_have_valid_manufacturer_options
--------------------------------------------------------
CurrencyHelperTest: test_currency_decimals_returns_correct_decimal_places
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_symbol_returns_correct_symbols
----------------------------------------------------------------
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_options_returns_correct_format
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
CurrencyHelperTest: test_currency_sample_values_returns_appropriate_values
--------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 12.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.4ms | GC: 0.0ms)
Completed 200 OK in 19ms (Views: 13.3ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 27ms (ActiveRecord: 5.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "printer_id" => "980190965", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "vat_percentage" => "21.0"}}
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "investment_return_years", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 00:04:03.774868"], ["created_at", "2025-09-09 00:04:03.774924"], ["updated_at", "2025-09-09 00:04:03.774924"], ["daily_usage_hours", 8], ["investment_return_years", 3], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.32611104452054794520547945205479537625"], ["created_at", "2025-09-09 00:04:03.778366"], ["updated_at", "2025-09-09 00:04:03.778366"], ["printer_id", 980190965]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190964]]
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 25ms (ActiveRecord: 1.4ms (3 queries, 1 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 12.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.1ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
Completed 200 OK in 19ms (Views: 13.0ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
Processing by PrintPricingsController#create as HTML
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "printer_id" => "980190964", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mCACHE Printer Load (0.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 10.2ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 12.6ms | GC: 0.0ms)
Completed 200 OK in 19ms (Views: 13.2ms | ActiveRecord: 0.7ms (3 queries, 1 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 14.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.6ms | GC: 0.0ms)
Completed 200 OK in 19ms (Views: 14.6ms | ActiveRecord: 0.8ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Integration Test Print"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.72460602739726027397260273972602675"], ["created_at", "2025-09-09 00:04:03.813330"], ["updated_at", "2025-09-09 00:04:03.813330"], ["printer_id", 980190964]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190963/edit" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190963"}
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 17ms (ActiveRecord: 1.1ms (3 queries, 1 cached) | GC: 0.0ms)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190964], ["id", 980190963], ["LIMIT", 1]]
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 3.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.5ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
Completed 200 OK in 11ms (Views: 4.7ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.0ms)
Started PATCH "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190963"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x00000001275be9d8>, params: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190963"} }[0m
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 5.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.5ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 5.4ms | ActiveRecord: 0.9ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE Printer Load (0.0ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.7ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "updated_at" = $2 WHERE "print_pricings"."id" = $3[0m  [["job_name", "Updated Flow Test Print"], ["updated_at", "2025-09-09 00:04:03.839070"], ["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 9ms (ActiveRecord: 0.9ms (4 queries, 3 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 5.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.0ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.5ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 3ms (ActiveRecord: 0.6ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 09:04:03 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.9ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (54.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test"[0m
  [1m[35m (51.7ms)[0m  [1m[35mCREATE DATABASE "print_calc_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250909001105)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908063852),
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-09 00:13:55.732263', '2025-09-09 00:13:55.732264') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'abaeffa84668e54318995222eba26c862475d8ef', '2025-09-09 00:13:55.735342', '2025-09-09 00:13:55.735342') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (51.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-0"[0m
  [1m[35m (121.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-8"[0m
  [1m[35m (129.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-1"[0m
  [1m[35m (122.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-6"[0m
  [1m[35m (130.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-2"[0m
  [1m[35m (122.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-9"[0m
  [1m[35m (124.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-4"[0m
  [1m[35m (118.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-7"[0m
  [1m[35m (130.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-3"[0m
  [1m[35m (136.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "print_calc_test-5"[0m
  [1m[35m (226.8ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-0" ENCODING = 'unicode'[0m
  [1m[35mSQL (19.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (66.0ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (271.6ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-4" ENCODING = 'unicode'[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (278.5ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-6" ENCODING = 'unicode'[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (281.2ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-1" ENCODING = 'unicode'[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (285.1ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-8" ENCODING = 'unicode'[0m
  [1m[35m (286.0ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-9" ENCODING = 'unicode'[0m
  [1m[35m (286.6ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-2" ENCODING = 'unicode'[0m
  [1m[35m (280.5ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-7" ENCODING = 'unicode'[0m
  [1m[35m (280.6ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-5" ENCODING = 'unicode'[0m
  [1m[35m (282.4ms)[0m  [1m[35mCREATE DATABASE "print_calc_test-3" ENCODING = 'unicode'[0m
  [1m[36mActiveRecord::SchemaMigration Load (9.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250909001105)[0m
  [1m[35m (1.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908063852),
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-09 00:13:56.283953', '2025-09-09 00:13:56.283956') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'abaeffa84668e54318995222eba26c862475d8ef', '2025-09-09 00:13:56.286987', '2025-09-09 00:13:56.286990') RETURNING "key"[0m
  [1m[35mSQL (27.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (25.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (17.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (18.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (18.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (14.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (18.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (22.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35mSQL (18.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "print_pricings" CASCADE[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "print_pricings" ("id" bigserial primary key, "user_id" bigint NOT NULL, "job_name" character varying, "printing_time_hours" integer, "printing_time_minutes" integer, "filament_weight" decimal, "filament_type" character varying, "spool_price" decimal, "spool_weight" decimal, "markup_percentage" decimal, "prep_time_minutes" integer, "prep_cost_per_hour" decimal, "postprocessing_time_minutes" integer, "postprocessing_cost_per_hour" decimal, "other_costs" decimal, "vat_percentage" decimal, "final_price" decimal, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "printer_id" bigint)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_printer_id" ON "print_pricings" ("printer_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE INDEX "index_print_pricings_on_user_id" ON "print_pricings" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "printers" CASCADE[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "printers" ("id" bigserial primary key, "user_id" bigint NOT NULL, "name" character varying NOT NULL, "manufacturer" character varying, "power_consumption" decimal(8,2), "cost" decimal(10,2), "payoff_goal_years" integer, "date_added" timestamp(6) DEFAULT CURRENT_TIMESTAMP, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "daily_usage_hours" integer DEFAULT 8, "repair_cost_percentage" decimal(8,2) DEFAULT 0.0)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_printers_on_user_id" ON "printers" ("user_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "default_currency" character varying DEFAULT 'USD', "default_energy_cost_per_kwh" decimal(8,4) DEFAULT 0.12)[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250909001105)[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250909001105)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908063852),
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908063852),
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250909001105)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908063852),
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250909001105)[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-09 00:13:56.331485', '2025-09-09 00:13:56.331486') RETURNING "key"[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_4db0eb9566"
FOREIGN KEY ("printer_id")
  REFERENCES "printers" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250909001105)[0m
  [1m[35m (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908063852),
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-09 00:13:56.332720', '2025-09-09 00:13:56.332721') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ADD CONSTRAINT "fk_rails_c6f1ad081a"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250909001105)[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908063852),
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "printers" ADD CONSTRAINT "fk_rails_ee8c2b457e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-09 00:13:56.334409', '2025-09-09 00:13:56.334410') RETURNING "key"[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908063852),
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250909001105)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'abaeffa84668e54318995222eba26c862475d8ef', '2025-09-09 00:13:56.334595', '2025-09-09 00:13:56.334596') RETURNING "key"[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908063852),
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (1.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250909001105)[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'abaeffa84668e54318995222eba26c862475d8ef', '2025-09-09 00:13:56.336132', '2025-09-09 00:13:56.336134') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908063852),
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[36mActiveRecord::InternalMetadata Create (2.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'abaeffa84668e54318995222eba26c862475d8ef', '2025-09-09 00:13:56.338057', '2025-09-09 00:13:56.338058') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Create (12.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-09 00:13:56.339375', '2025-09-09 00:13:56.339379') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (10.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-09 00:13:56.341147', '2025-09-09 00:13:56.341150') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (3.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-09 00:13:56.348812', '2025-09-09 00:13:56.348815') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (10.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-09 00:13:56.342251', '2025-09-09 00:13:56.342253') RETURNING "key"[0m
  [1m[35m (11.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20250909001105)[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20250908063852),
(20250908041942),
(20250908041858),
(20250908022939),
(20250908022800);[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'abaeffa84668e54318995222eba26c862475d8ef', '2025-09-09 00:13:56.359327', '2025-09-09 00:13:56.359328') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (6.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-09 00:13:56.354045', '2025-09-09 00:13:56.354048') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'abaeffa84668e54318995222eba26c862475d8ef', '2025-09-09 00:13:56.360834', '2025-09-09 00:13:56.360835') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'abaeffa84668e54318995222eba26c862475d8ef', '2025-09-09 00:13:56.360964', '2025-09-09 00:13:56.360968') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'abaeffa84668e54318995222eba26c862475d8ef', '2025-09-09 00:13:56.360897', '2025-09-09 00:13:56.360903') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'abaeffa84668e54318995222eba26c862475d8ef', '2025-09-09 00:13:56.381174', '2025-09-09 00:13:56.381175') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (3.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-09-09 00:13:56.382173', '2025-09-09 00:13:56.382176') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'abaeffa84668e54318995222eba26c862475d8ef', '2025-09-09 00:13:56.388450', '2025-09-09 00:13:56.388452') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (11.5ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTruncate Tables (12.5ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTruncate Tables (12.4ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTruncate Tables (11.5ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (12.5ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (10.1ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (10.5ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTruncate Tables (13.0ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (14.4ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (7.7ms)[0m  [1m[35mTRUNCATE TABLE "printers", "print_pricings", "users"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:02:00.028981', '2025-09-09 01:02:00.028981', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:02:00.028981', '2025-09-09 01:02:00.028981', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:02:00.050773', '2025-09-09 01:02:00.050773', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:02:00.050773', '2025-09-09 01:02:00.050773', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$A9TVQbu3zthhEBIETDC3zeBDNaebeZAxII0uE54vt1TKYz/1iBuFa', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.054539', '2025-09-09 01:02:00.054539', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$6LV/drGOzn8FBe0m3slImuxnui5CxNIz.zwlMWeeqNXpK7P0iiicW', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.054539', '2025-09-09 01:02:00.054539', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:02:00.035117', '2025-09-09 01:02:00.035117', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:02:00.035117', '2025-09-09 01:02:00.035117', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:02:00.058559', '2025-09-09 01:02:00.058559', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:02:00.058559', '2025-09-09 01:02:00.058559', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$QNyEgj97k4Pa6BwEJDzXouzEEqEltW8dl8hMGnvCsl1rLRUIshxzK', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.061728', '2025-09-09 01:02:00.061728', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$Tlus66zEqlKg0Qx9s3W2zOfsM0uM6M3VqtEEYvYfaSI2rnvgRl3iC', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.061728', '2025-09-09 01:02:00.061728', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:02:00.030242', '2025-09-09 01:02:00.030242', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:02:00.030242', '2025-09-09 01:02:00.030242', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:02:00.056695', '2025-09-09 01:02:00.056695', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:02:00.056695', '2025-09-09 01:02:00.056695', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$ayIhOp2xHjnHV1ERrACpkedg2r/7S5VCZyGxEKRZvYsgYeuPFxLNm', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.060729', '2025-09-09 01:02:00.060729', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$Q1rIum4KB4FVdN82YG2nj.dMU4eDTvpisqNWobRfv9t6BSJkCwbEe', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.060729', '2025-09-09 01:02:00.060729', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:02:00.037311', '2025-09-09 01:02:00.037311', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:02:00.037311', '2025-09-09 01:02:00.037311', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:02:00.061750', '2025-09-09 01:02:00.061750', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:02:00.061750', '2025-09-09 01:02:00.061750', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$xsg2hPUqWIBhV6OGJYoABuAcXAE7ZCneCWvjSMRHq48ZUiVfjS4hC', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.065075', '2025-09-09 01:02:00.065075', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$z0gFIaeWo.Q58LCH5ID.Q.JIN4bpbpP9k/xEOT8kI87iVRqpBPnme', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.065075', '2025-09-09 01:02:00.065075', 'EUR', 0.1)[0m
  [1m[35m (2.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mFixtures Load (1.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:02:00.035929', '2025-09-09 01:02:00.035929', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:02:00.035929', '2025-09-09 01:02:00.035929', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:02:00.061641', '2025-09-09 01:02:00.061641', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:02:00.061641', '2025-09-09 01:02:00.061641', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$ZpfNVBBEiCIFw9IneMbYY.yZ2TGpGmVnDhh.XZxDOSqiB.W0rD.ju', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.065982', '2025-09-09 01:02:00.065982', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$iYvQDU5qPuRDkpTtTop4POZGZHvMLE67fZFDXZ/.gFunLPZSnjS0e', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.065982', '2025-09-09 01:02:00.065982', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:02:00.033257', '2025-09-09 01:02:00.033257', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:02:00.033257', '2025-09-09 01:02:00.033257', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:02:00.061734', '2025-09-09 01:02:00.061734', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:02:00.061734', '2025-09-09 01:02:00.061734', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$3np/Npin6PEc22fA4K.i1.9u6zlQPhXdrSDW3z5DoKNYX7HoDCM52', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.065043', '2025-09-09 01:02:00.065043', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$hYz.dmdgu4xEZXo2m4wqhuimRv1jrBvsR9JDI/WIa8cUjK/Q55Y42', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.065043', '2025-09-09 01:02:00.065043', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
UserTest: test_should_have_default_values_for_new_users
-------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.3ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:02:00.040010', '2025-09-09 01:02:00.040010', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:02:00.040010', '2025-09-09 01:02:00.040010', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:02:00.063704', '2025-09-09 01:02:00.063704', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:02:00.063704', '2025-09-09 01:02:00.063704', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$rpMPEsDBT25f1yxvf3YDU.eUVgx3Kiy8fTcc3SDWxVHPbqOblL6ZS', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.067100', '2025-09-09 01:02:00.067100', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$AsO9TZAr8Ip51dkT9t5zPuSvJbr2XgXC6MU/yr0F7rLmfMfQiBbz.', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.067100', '2025-09-09 01:02:00.067100', 'EUR', 0.1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mFixtures Load (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:02:00.038981', '2025-09-09 01:02:00.038981', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:02:00.038981', '2025-09-09 01:02:00.038981', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:02:00.062846', '2025-09-09 01:02:00.062846', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:02:00.062846', '2025-09-09 01:02:00.062846', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$kFrTvJbHyzsBRIo5.K95euzRV8fwUnQCqPtZ9ArMMioNG0H79NCyC', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.069685', '2025-09-09 01:02:00.069685', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$qXNXKR1a2Iztq07FbJTMmOC3Uc1A292CxxqT6XKs60npJcPhYMKYK', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.069685', '2025-09-09 01:02:00.069685', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (2.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:02:00.037439', '2025-09-09 01:02:00.037439', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:02:00.037439', '2025-09-09 01:02:00.037439', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:02:00.065768', '2025-09-09 01:02:00.065768', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:02:00.065768', '2025-09-09 01:02:00.065768', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$OrZneRAAXs48YuBOJcgEgOYLEXaD.wrGdQVNl2SN7yX6GMeXw2I0i', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.070898', '2025-09-09 01:02:00.070898', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$yZQYZd5H1MgmD1VuOFXM9.eEq0H9JrEGP724sw0uvLVwMlfkN5p8S', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.070898', '2025-09-09 01:02:00.070898', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mFixtures Load (1.6ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:02:00.034650', '2025-09-09 01:02:00.034650', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:02:00.034650', '2025-09-09 01:02:00.034650', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:02:00.064493', '2025-09-09 01:02:00.064493', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:02:00.064493', '2025-09-09 01:02:00.064493', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$MWeHdomVCk3oNpvtUILGj.HHRWBJo1f1Gm2I2rOTwqPZ77Ue6J2Qu', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.070145', '2025-09-09 01:02:00.070145', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$fRQrIC.spCfDjJnP3bWL8OXiiSbztiIYtTuBBycQl/oM6gauZlZM2', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:02:00.070145', '2025-09-09 01:02:00.070145', 'EUR', 0.1)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (2.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_require_default_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------
UserTest: test_should_require_default_energy_cost_per_kwh
---------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.099666"], ["updated_at", "2025-09-09 01:02:00.099666"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
------------------------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
UserTest: test_should_require_positive_default_energy_cost_per_kwh
------------------------------------------------------------------
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.116385"], ["updated_at", "2025-09-09 01:02:00.116385"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.125430"], ["created_at", "2025-09-09 01:02:00.125456"], ["updated_at", "2025-09-09 01:02:00.125456"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
PrintPricingsControllerTest: test_should_get_edit
------------------------------------------------
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.136566"], ["updated_at", "2025-09-09 01:02:00.136566"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.6798630136986301369863013698630125"], ["created_at", "2025-09-09 01:02:00.138019"], ["updated_at", "2025-09-09 01:02:00.138019"], ["printer_id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-09 01:02:00.143747"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Other Integration Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.145438"], ["created_at", "2025-09-09 01:02:00.145459"], ["updated_at", "2025-09-09 01:02:00.145459"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (1.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Update (1.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-09 01:02:00.153136"], ["default_currency", "JPY"], ["default_energy_cost_per_kwh", "35.0"], ["id", 980190962]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Flow Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "150.0"], ["cost", "800.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.155496"], ["created_at", "2025-09-09 01:02:00.155519"], ["updated_at", "2025-09-09 01:02:00.155519"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
Processing by PrintPricingsController#index as HTML
  [1m[36mPrinter Load (1.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.3ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Complete Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "250.0"], ["cost", "300000.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.164102"], ["created_at", "2025-09-09 01:02:00.164145"], ["updated_at", "2025-09-09 01:02:00.164145"], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Create (1.2ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Other User's Print"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.77393150684931506849315068493150625"], ["created_at", "2025-09-09 01:02:00.163171"], ["updated_at", "2025-09-09 01:02:00.163171"], ["printer_id", 980190963]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (1.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190963]]
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Destroy (0.7ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190963]]
  [1m[36mPrintPricing Load (1.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
Completed 401 Unauthorized in 6ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (4.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#new as HTML
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.2ms | GC: 0.0ms)
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
Processing by PrintPricingsController#create as HTML
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.181042"], ["updated_at", "2025-09-09 01:02:00.181042"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 0.3ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 3.6ms | GC: 0.0ms)
Processing by PrintPricingsController#index as HTML
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[31mROLLBACK[0m
  Rendered layout layouts/application.html.erb (Duration: 9.5ms | GC: 0.0ms)
Completed 200 OK in 23ms (Views: 15.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/users" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.1ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Other Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.191745"], ["created_at", "2025-09-09 01:02:00.191768"], ["updated_at", "2025-09-09 01:02:00.191768"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
Processing by PrintPricingsController#new as HTML
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
Processing by PrintPricingsController#show as HTML
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  Parameters: {"id" => "980190963"}
  [1m[36mPrintPricing Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.199254"], ["updated_at", "2025-09-09 01:02:00.199254"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
-------------------------------------------------------------
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintPricingsController#create as HTML
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 6.0ms | GC: 0.0ms)
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "printer_id" => "980190963", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mPrintPricing Create (1.3ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Other User's Print"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.77393150684931506849315068493150625"], ["created_at", "2025-09-09 01:02:00.202523"], ["updated_at", "2025-09-09 01:02:00.202523"], ["printer_id", 980190963]]
  [1m[36mPrintPricing Load (0.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 404 Not Found in 8ms (ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
Redirected to http://www.example.com/
Completed 303 See Other in 13ms (ActiveRecord: 2.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:178:in 'block in <class:PrintPricingFlowsTest>'
Started GET "/" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 10.8ms | GC: 0.0ms)
Processing by PrintPricingsController#edit as HTML
  Rendered layout layouts/application.html.erb (Duration: 14.1ms | GC: 0.0ms)
  Parameters: {"id" => "980190962"}
Completed 200 OK in 28ms (Views: 16.9ms | ActiveRecord: 1.5ms (3 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#index as HTML
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendered layout layouts/application.html.erb (Duration: 17.4ms | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 29ms (Views: 18.2ms | ActiveRecord: 1.1ms (3 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x000000011d674580>, params: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 14.8ms | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-09 01:02:00.220442"], ["updated_at", "2025-09-09 01:02:00.220442"], ["printer_id", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintPricingsController#new as HTML
Redirected to http://www.example.com/print_pricings/980190963
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
Completed 302 Found in 6ms (ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190963], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 22.6ms | GC: 0.0ms)
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 4.2ms | GC: 0.0ms)
Completed 200 OK in 31ms (Views: 23.7ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-09 01:02:00.223411"], ["updated_at", "2025-09-09 01:02:00.223411"], ["printer_id", 980190963]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/print_pricings/980190963
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 302 Found in 27ms (ActiveRecord: 1.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (1.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 4.5ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | GC: 0.0ms)
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
Completed 200 OK in 18ms (Views: 9.5ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by PrintPricingsController#show as HTML
-------------------------------------------------------------
  Parameters: {"id" => "980190962"}
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 8.8ms | GC: 0.0ms)
Completed 200 OK in 22ms (Views: 10.3ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x00000001285bb0e8>, params: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  Rendering layout layouts/application.html.erb
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering print_pricings/new.html.erb within layouts/application
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
Completed 404 Not Found in 8ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:130:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (1.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.243096"], ["created_at", "2025-09-09 01:02:00.243144"], ["updated_at", "2025-09-09 01:02:00.243144"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 15.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.7ms | GC: 0.0ms)
Completed 200 OK in 25ms (Views: 16.3ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x0000000128ef7e40>, params: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190962"} }[0m
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "printer_id" => "980190963", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "vat_percentage" => "21.0"}}
  [1m[36mPrintPricing Load (2.9ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 16.2ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 16.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.9ms | GC: 0.0ms)
Completed 200 OK in 24ms (Views: 18.9ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 18.2ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 422 Unprocessable Content in 21ms (Views: 18.3ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendering print_pricings/show.html.erb within layouts/application
--------------------------------------------------------------
UserProfilesControllerTest: test_should_require_authentication
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started GET "/profile" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#update as HTML
  [1m[36mPrintPricing Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mCACHE Printer Load (0.0ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_edit
------------------------------------------------
Processing by UserProfilesController#show as HTML
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.32611104452054794520547945205479537625"], ["created_at", "2025-09-09 01:02:00.263847"], ["updated_at", "2025-09-09 01:02:00.263847"], ["printer_id", 980190963]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_show
------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/profile/edit" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 12.9ms | GC: 0.0ms)
  [1m[36mPrintPricing Update (0.3ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "final_price" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Job Name"], ["final_price", "1.84784931506849315068493150684931375"], ["updated_at", "2025-09-09 01:02:00.268252"], ["id", 980190962]]
  [1m[36mPrinter Load (1.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 23ms (ActiveRecord: 1.5ms (3 queries, 1 cached) | GC: 0.0ms)
Processing by UserProfilesController#edit as HTML
  [1m[36mPrintPricing Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendering layout layouts/application.html.erb
  Rendered layout layouts/application.html.erb (Duration: 19.5ms | GC: 0.0ms)
Completed 200 OK in 32ms (Views: 21.2ms | ActiveRecord: 3.2ms (3 queries, 1 cached) | GC: 0.0ms)
  Rendering user_profiles/edit.html.erb within layouts/application
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started GET "/profile" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  Rendered user_profiles/edit.html.erb within layouts/application (Duration: 2.7ms | GC: 0.0ms)
Processing by UserProfilesController#show as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserProfilesControllerTest: test_should_update_user_profile
-----------------------------------------------------------
  Rendered layout layouts/application.html.erb (Duration: 4.4ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/show.html.erb within layouts/application
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 19.8ms | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendered layout layouts/application.html.erb (Duration: 20.6ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 20.0ms | ActiveRecord: 1.6ms (2 queries, 0 cached) | GC: 0.0ms)
  Rendering print_pricings/edit.html.erb within layouts/application
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  Rendered user_profiles/show.html.erb within layouts/application (Duration: 4.3ms | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
Redirected to http://www.example.com/print_pricings/980190962
  Rendered layout layouts/application.html.erb (Duration: 6.1ms | GC: 0.0ms)
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "printer_id" => "980190963", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
Completed 302 Found in 50ms (ActiveRecord: 1.5ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.4ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
Completed 200 OK in 10ms (Views: 6.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
Started PATCH "/profile" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 7.0ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by UserProfilesController#update as HTML
  Parameters: {"user" => {"default_currency" => "EUR", "default_energy_cost_per_kwh" => "0.15"}}
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-09 01:02:00.298778"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  Rendered layout layouts/application.html.erb (Duration: 12.4ms | GC: 0.0ms)
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 33ms (ActiveRecord: 1.8ms (2 queries, 0 cached) | GC: 0.0ms)
Completed 422 Unprocessable Content in 37ms (Views: 15.5ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.9ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.303438"], ["updated_at", "2025-09-09 01:02:00.303438"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.305633"], ["updated_at", "2025-09-09 01:02:00.305633"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.305357"], ["updated_at", "2025-09-09 01:02:00.305357"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 11.3ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Integration Test Print"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.72460602739726027397260273972602675"], ["created_at", "2025-09-09 01:02:00.307749"], ["updated_at", "2025-09-09 01:02:00.307749"], ["printer_id", 980190963]]
Completed 302 Found in 13ms (ActiveRecord: 1.3ms (1 query, 0 cached) | GC: 0.0ms)
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.310574"], ["created_at", "2025-09-09 01:02:00.310630"], ["updated_at", "2025-09-09 01:02:00.310630"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 15.2ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 15.9ms | ActiveRecord: 0.9ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
Started GET "/print_pricings/980190963/edit" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.312186"], ["created_at", "2025-09-09 01:02:00.312220"], ["updated_at", "2025-09-09 01:02:00.312220"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.315910"], ["updated_at", "2025-09-09 01:02:00.315910"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
Redirected to http://www.example.com/print_pricings/980190963
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 302 Found in 29ms (ActiveRecord: 1.8ms (3 queries, 1 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (2.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.313693"], ["created_at", "2025-09-09 01:02:00.313758"], ["updated_at", "2025-09-09 01:02:00.313758"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.326007"], ["updated_at", "2025-09-09 01:02:00.326007"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.321866"], ["updated_at", "2025-09-09 01:02:00.321866"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 4.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 6.0ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.324014"], ["created_at", "2025-09-09 01:02:00.324045"], ["updated_at", "2025-09-09 01:02:00.324045"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
Started PATCH "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190963"}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190963], ["id", 980190963], ["LIMIT", 1]]
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.331483"], ["updated_at", "2025-09-09 01:02:00.331483"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.331174"], ["updated_at", "2025-09-09 01:02:00.331174"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x0000000128357db0>, params: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190963"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCACHE Printer Load (0.0ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.338039"], ["updated_at", "2025-09-09 01:02:00.338039"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.338606"], ["created_at", "2025-09-09 01:02:00.338640"], ["updated_at", "2025-09-09 01:02:00.338640"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.1ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.339210"], ["created_at", "2025-09-09 01:02:00.339237"], ["updated_at", "2025-09-09 01:02:00.339237"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.332778"], ["created_at", "2025-09-09 01:02:00.332835"], ["updated_at", "2025-09-09 01:02:00.332835"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrintPricing Update (0.4ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "updated_at" = $2 WHERE "print_pricings"."id" = $3[0m  [["job_name", "Updated Flow Test Print"], ["updated_at", "2025-09-09 01:02:00.341716"], ["id", 980190963]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.341515"], ["created_at", "2025-09-09 01:02:00.341552"], ["updated_at", "2025-09-09 01:02:00.341552"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.342789"], ["created_at", "2025-09-09 01:02:00.342824"], ["updated_at", "2025-09-09 01:02:00.342824"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 302 Found in 12ms (ActiveRecord: 0.7ms (4 queries, 3 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.84784931506849315068493150684931375"], ["created_at", "2025-09-09 01:02:00.346081"], ["updated_at", "2025-09-09 01:02:00.346081"], ["printer_id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 11.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.9ms | GC: 0.0ms)
Completed 200 OK in 23ms (Views: 13.5ms | ActiveRecord: 0.7ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (2.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.350706"], ["updated_at", "2025-09-09 01:02:00.350706"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
PrinterTest: test_should_belong_to_user
---------------------------------------
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
-------------------------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_true_for_old_printer_past_payoff_goal
-------------------------------------------------------------------------------
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.352622"], ["updated_at", "2025-09-09 01:02:00.352622"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Update (3.4ms)[0m  [1m[33mUPDATE "printers" SET "cost" = $1, "updated_at" = $2 WHERE "printers"."id" = $3[0m  [["cost", "1000.0"], ["updated_at", "2025-09-09 01:02:00.345860"], ["id", 980190964]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.357392"], ["updated_at", "2025-09-09 01:02:00.357392"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_false_for_new_printer
---------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:02:00.358071"], ["updated_at", "2025-09-09 01:02:00.358071"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 7.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.8ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 7.8ms | ActiveRecord: 0.7ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PrinterTest: test_should_be_valid_with_valid_attributes
-------------------------------------------------------
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.9ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190965], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.358189"], ["created_at", "2025-09-09 01:02:00.358224"], ["updated_at", "2025-09-09 01:02:00.358224"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190965], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.364163"], ["created_at", "2025-09-09 01:02:00.364190"], ["updated_at", "2025-09-09 01:02:00.364190"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrinter Create (1.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190965], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.363110"], ["created_at", "2025-09-09 01:02:00.363456"], ["updated_at", "2025-09-09 01:02:00.363456"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (1.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.364550"], ["created_at", "2025-09-09 01:02:00.364591"], ["updated_at", "2025-09-09 01:02:00.364591"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
PrinterTest: test_should_require_name
-------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_0_for_paid_off_printer
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------
PrinterTest: test_should_have_valid_manufacturer_options
--------------------------------------------------------
-----------------------------------------------------------
PrinterTest: test_should_require_positive_payoff_goal_years
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mPrinter Create (0.9ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-09 01:02:00.366631"], ["created_at", "2025-09-09 01:02:00.367616"], ["updated_at", "2025-09-09 01:02:00.367616"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
  [1m[36mPrinter Create (1.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.366432"], ["created_at", "2025-09-09 01:02:00.366473"], ["updated_at", "2025-09-09 01:02:00.366473"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrinterTest: test_should_require_positive_power_consumption
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_correct_months_remaining
-------------------------------------------------------------------------
----------------------------------------------
PrinterTest: test_should_require_positive_cost
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
-----------------------------------------------------
PrinterTest: test_should_set_date_added_automatically
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PrintersControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
------------------------------------------------
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-09 01:02:00.377294"], ["created_at", "2025-09-09 01:02:00.378256"], ["updated_at", "2025-09-09 01:02:00.378256"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
PrintersControllerTest: test_should_show_printer
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintersControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.3ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.380035"], ["created_at", "2025-09-09 01:02:00.380078"], ["updated_at", "2025-09-09 01:02:00.380078"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
Started GET "/printers/new" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PrintersControllerTest: test_should_require_authentication
----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.0ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2024-09-09 01:02:00.377571"], ["created_at", "2025-09-09 01:02:00.379353"], ["updated_at", "2025-09-09 01:02:00.379353"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers/980190962" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
Started GET "/printers/980190962/edit" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Destroy (1.7ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
Started GET "/printers" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintersControllerTest: test_should_create_printer
--------------------------------------------------
Processing by PrintersController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
Processing by PrintersController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
---------------------------------------------------
  [1m[36mPrinter Load (1.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
PrintersControllerTest: test_should_destroy_printer
---------------------------------------------------
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 18ms (ActiveRecord: 1.4ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  [1m[36mPrinter Load (0.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering printers/show.html.erb within layouts/application
  Rendered printers/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | GC: 0.0ms)
  [1m[36mPrinter Load (2.0ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
Completed 200 OK in 7ms (Views: 3.9ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  Rendering printers/new.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by PrintersController#index as HTML
---------------------------------------------
PrintersControllerTest: test_should_get_index
---------------------------------------------
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mPrinter Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Started DELETE "/printers/980190962" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering printers/edit.html.erb within layouts/application
  Rendered printers/new.html.erb within layouts/application (Duration: 2.3ms | GC: 0.0ms)
  Rendered printers/edit.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.8ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 2.6ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
Started POST "/printers" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrinter Load (0.7ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 8.5ms | GC: 0.0ms)
Started GET "/printers" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
Completed 200 OK in 18ms (Views: 10.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190962]]
Processing by PrintersController#create as HTML
  Parameters: {"printer" => {"name" => "Test Printer", "manufacturer" => "Prusa", "power_consumption" => "200", "cost" => "500", "payoff_goal_years" => "3"}}
Processing by PrintersController#index as HTML
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:02:00.411906"], ["created_at", "2025-09-09 01:02:00.411924"], ["updated_at", "2025-09-09 01:02:00.411924"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
  Rendering printers/index.html.erb within layouts/application
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintersControllerTest: test_should_update_printer
--------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "printers" WHERE "printers"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
CurrencyHelperTest: test_currency_sample_values_returns_appropriate_values
--------------------------------------------------------------------------
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/printers/980190966
  [1m[36mPrinter Destroy (0.6ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started PATCH "/printers/980190962" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
Completed 302 Found in 13ms (ActiveRecord: 1.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (1.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 ORDER BY "printers"."name" ASC[0m  [["user_id", 980190962]]
Processing by PrintersController#update as HTML
  Parameters: {"printer" => {"name" => "Updated Printer Name", "power_consumption" => "250"}, "id" => "980190962"}
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 10:02:00 +0900
  Rendered printers/index.html.erb within layouts/application (Duration: 11.7ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CurrencyHelperTest: test_zero_decimal_currencies_returns_JPY
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#index as HTML
  Rendered layout layouts/application.html.erb (Duration: 12.4ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/printers
Completed 200 OK in 20ms (Views: 14.2ms | ActiveRecord: 1.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_options_returns_correct_format
----------------------------------------------------------------
-------------------------------------------------------------------------
CurrencyHelperTest: test_currency_decimals_returns_correct_decimal_places
-------------------------------------------------------------------------
-------------------------------------------------------------------------------
CurrencyHelperTest: test_format_currency_handles_different_currencies_correctly
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
Completed 302 Found in 35ms (ActiveRecord: 2.6ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Update (0.6ms)[0m  [1m[33mUPDATE "printers" SET "name" = $1, "power_consumption" = $2, "updated_at" = $3 WHERE "printers"."id" = $4[0m  [["name", "Updated Printer Name"], ["power_consumption", "250.0"], ["updated_at", "2025-09-09 01:02:00.431782"], ["id", 980190962]]
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
----------------------------------------------------------------
CurrencyHelperTest: test_currency_symbol_returns_correct_symbols
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" ORDER BY "printers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mPrinter Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 14.0ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendered layout layouts/application.html.erb (Duration: 15.3ms | GC: 0.0ms)
Completed 200 OK in 28ms (Views: 14.4ms | ActiveRecord: 1.5ms (4 queries, 0 cached) | GC: 0.0ms)
Redirected to http://www.example.com/printers/980190962
Completed 302 Found in 32ms (ActiveRecord: 1.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (15.8ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (17.1ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (17.6ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (16.1ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (16.5ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (17.7ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (17.0ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (16.0ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTruncate Tables (13.8ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (19.6ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:47:14.703717', '2025-09-09 01:47:14.703717', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:47:14.703717', '2025-09-09 01:47:14.703717', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:47:14.732987', '2025-09-09 01:47:14.732987', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:47:14.732987', '2025-09-09 01:47:14.732987', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$0w5AM2tZsnaoR59yfZKLKutSPByib0G81.Btozx0PsLCsHmIERSji', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.738255', '2025-09-09 01:47:14.738255', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$Y6lE1k5C08wa56/6fe/.zOA6BMkO9A3fmE1fSFOjjQi0E5woALTxy', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.738255', '2025-09-09 01:47:14.738255', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:47:14.707069', '2025-09-09 01:47:14.707069', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:47:14.707069', '2025-09-09 01:47:14.707069', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:47:14.736837', '2025-09-09 01:47:14.736837', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:47:14.736837', '2025-09-09 01:47:14.736837', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$cNOXAHO5vuDTKkqDZXSzW.4W8zLpSgQQFTluA5BgyBJDtL/RNzBqq', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.741798', '2025-09-09 01:47:14.741798', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$uCBqK2beLHtM8LnhcMTj7uU2SgIGlFIl8mC4uWJIuLut9VgeaWEF.', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.741798', '2025-09-09 01:47:14.741798', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (2.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:47:14.708265', '2025-09-09 01:47:14.708265', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:47:14.708265', '2025-09-09 01:47:14.708265', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:47:14.735354', '2025-09-09 01:47:14.735354', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:47:14.735354', '2025-09-09 01:47:14.735354', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$2FMYp4LMkt4zTyl3I.ZQduWA3Uwnq4jT1snyIY5.9q9foVM0jDZzS', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.739198', '2025-09-09 01:47:14.739198', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$Psko3F2W2ydvb3OSDHHfRO4d8gk8fJNCheFMumVKzWMlSjOz4769y', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.739198', '2025-09-09 01:47:14.739198', 'EUR', 0.1)[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:47:14.706416', '2025-09-09 01:47:14.706416', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:47:14.706416', '2025-09-09 01:47:14.706416', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:47:14.737501', '2025-09-09 01:47:14.737501', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:47:14.737501', '2025-09-09 01:47:14.737501', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$Ol4XRc9FfzqUCaleA9ZDMeUvFnvcfbAGl2cL1rka6gZgByi.k0ghW', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.741058', '2025-09-09 01:47:14.741058', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$8GO89HEmGaGbODWE60s6tuOT.dA8GaksO6aTSc5NXC3xpjXdetcKe', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.741058', '2025-09-09 01:47:14.741058', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:47:14.712486', '2025-09-09 01:47:14.712486', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:47:14.712486', '2025-09-09 01:47:14.712486', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:47:14.737916', '2025-09-09 01:47:14.737916', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:47:14.737916', '2025-09-09 01:47:14.737916', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$9PMLu0ZY/CBTvydoWm.ibOeBDkOLVHS/DGMRcqQeHF0w7uYj4A//y', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.741319', '2025-09-09 01:47:14.741319', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$VbWwsguSlgV3je73ARKSg.NYyAFr9VH.xdfynjeNEOBNLoCHYwkMK', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.741319', '2025-09-09 01:47:14.741319', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:47:14.712804', '2025-09-09 01:47:14.712804', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:47:14.712804', '2025-09-09 01:47:14.712804', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:47:14.742148', '2025-09-09 01:47:14.742148', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:47:14.742148', '2025-09-09 01:47:14.742148', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$mxpywuj3ptic2udu9fntYu668fF3WPWSpnwLeQxmJrlyCtoA7fKWe', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.745806', '2025-09-09 01:47:14.745806', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$HVr4k9KAukWJ7sl21ilPhOH67d5f66bpLnJexjiFtZl8xQEZcf.1e', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.745806', '2025-09-09 01:47:14.745806', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.0ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:47:14.714143', '2025-09-09 01:47:14.714143', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:47:14.714143', '2025-09-09 01:47:14.714143', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:47:14.741947', '2025-09-09 01:47:14.741947', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:47:14.741947', '2025-09-09 01:47:14.741947', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$wyt1e5D1Urb5t0omXSgXy.hJ.K69i/CFucmQZiulm3q8T4OUtMwum', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.746323', '2025-09-09 01:47:14.746323', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$jo/fgdWSSIr2HJ7jY2oBKO2yKo9t8g46e/YAswjtiNWAQg0fmd0Zm', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.746323', '2025-09-09 01:47:14.746323', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:47:14.718765', '2025-09-09 01:47:14.718765', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:47:14.718765', '2025-09-09 01:47:14.718765', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:47:14.745117', '2025-09-09 01:47:14.745117', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:47:14.745117', '2025-09-09 01:47:14.745117', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$RgH14oIY4j4b0ij8z178h.GEn6jVrotPbv00juw1ZcU8oVZVIvVZm', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.749020', '2025-09-09 01:47:14.749020', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$BfOd2xEr5rO4FQ76s2DOZeGsGcIki1NWSFmzsoKjBkj1H51QeYq7e', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.749020', '2025-09-09 01:47:14.749020', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:47:14.718718', '2025-09-09 01:47:14.718718', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:47:14.718718', '2025-09-09 01:47:14.718718', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:47:14.746054', '2025-09-09 01:47:14.746054', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:47:14.746054', '2025-09-09 01:47:14.746054', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$Kb5LFeR2EwTiqwgR3mOmAubA/fCw.B1OMDfELUpcBx.Tns39gzdCi', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.749212', '2025-09-09 01:47:14.749212', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$M/Znhys55ER/gLl3SIcKj.IgERsE7vK5NUWOeYc6e.uiBGBvgkiKe', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.749212', '2025-09-09 01:47:14.749212', 'EUR', 0.1)[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:47:14.721280', '2025-09-09 01:47:14.721280', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:47:14.721280', '2025-09-09 01:47:14.721280', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:47:14.744066', '2025-09-09 01:47:14.744066', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:47:14.744066', '2025-09-09 01:47:14.744066', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$cZNhYpIIKYnTpobwyGStcO6Ss8FPcSsWr.y349POi5jXhEwaz5c42', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.747364', '2025-09-09 01:47:14.747364', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$oBlojUt/9humAsRaAUblYu.Xibi6nR/IIt6YDqoutYuL4V0dCGoDW', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:47:14.747364', '2025-09-09 01:47:14.747364', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (4.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (4.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.9ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:47:14.843947"], ["updated_at", "2025-09-09 01:47:14.843947"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrintPricing Load (0.9ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
Processing by PrintPricingsController#edit as HTML
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
  Parameters: {"id" => "980190962"}
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (4.0ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Other Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:47:14.860178"], ["created_at", "2025-09-09 01:47:14.860202"], ["updated_at", "2025-09-09 01:47:14.860202"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
  [1m[36mPrintPricing Load (6.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#destroy as HTML
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Parameters: {"id" => "980190962"}
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mPrintPricing Load (1.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (3.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  [1m[36mPrintPricing Create (2.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Other User's Print"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.77393150684931506849315068493150625"], ["created_at", "2025-09-09 01:47:14.876145"], ["updated_at", "2025-09-09 01:47:14.876145"], ["printer_id", 980190963]]
  [1m[36mPrintPricing Load (3.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x0000000128a521d8>, params: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190962"} }[0m
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 7.1ms | GC: 0.0ms)
  [1m[36mPrintPricing Load (3.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (1.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (2.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 6.9ms | GC: 0.0ms)
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Destroy (2.8ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 20ms (ActiveRecord: 6.1ms (2 queries, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
Processing by PrintPricingsController#new as HTML
  Rendered layout layouts/application.html.erb (Duration: 11.5ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 31ms (Views: 17.1ms | ActiveRecord: 3.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 13.8ms | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x0000000128a3d0d0>, params: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered layout layouts/application.html.erb (Duration: 19.3ms | GC: 0.0ms)
Completed 200 OK in 43ms (Views: 21.2ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Update (0.5ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "final_price" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Job Name"], ["final_price", "1.84784931506849315068493150684931375"], ["updated_at", "2025-09-09 01:47:14.894135"], ["id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 6.6ms | GC: 0.0ms)
  [1m[36mPrintPricing Create (0.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-09 01:47:14.895718"], ["updated_at", "2025-09-09 01:47:14.895718"], ["printer_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Redirected to http://www.example.com/print_pricings/980190962
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 29ms (ActiveRecord: 7.7ms (3 queries, 0 cached) | GC: 0.0ms)
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
Completed 302 Found in 12ms (ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.6ms | GC: 0.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 45ms (Views: 21.7ms | ActiveRecord: 8.3ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendered layout layouts/application.html.erb (Duration: 11.6ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 25ms (Views: 11.6ms | ActiveRecord: 1.8ms (3 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x000000011efb6fe8>, params: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
---------------------------------------------------
PrintersControllerTest: test_should_destroy_printer
PrintersControllerTest: test_should_get_index
---------------------------------------------
---------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PrintersControllerTest: test_should_get_new
--------------------------------------------------
-------------------------------------------
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
PrintersControllerTest: test_should_create_printer
--------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
--------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
PrintersControllerTest: test_should_update_printer
----------------------------------------------------------
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
PrintersControllerTest: test_should_require_authentication
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
--------------------------------------------------
  Rendering print_pricings/new.html.erb within layouts/application
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
----------------------------------------------------------
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
PrintersControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 9.0ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.8ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (1.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/printers/980190962" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
  [1m[36mPrinter Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started DELETE "/printers/980190962" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
  Rendered layout layouts/application.html.erb (Duration: 14.9ms | GC: 0.0ms)
Started GET "/printers/new" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
Completed 200 OK in 29ms (Views: 16.6ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
Started GET "/printers" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
Processing by PrintersController#update as HTML
  Parameters: {"printer" => {"name" => "Updated Printer Name", "power_consumption" => "250"}, "id" => "980190962"}
  [1m[36mPrinter Count (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Started POST "/printers" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (3.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
Processing by PrintersController#new as HTML
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering printers/new.html.erb within layouts/application
Processing by PrintersController#destroy as HTML
  Parameters: {"id" => "980190962"}
Started GET "/printers" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
Processing by PrintersController#create as HTML
  Parameters: {"printer" => {"name" => "Test Printer", "manufacturer" => "Prusa", "power_consumption" => "200", "cost" => "500", "payoff_goal_years" => "3"}}
  Rendered printers/new.html.erb within layouts/application (Duration: 2.0ms | GC: 0.0ms)
Completed 404 Not Found in 14ms (ActiveRecord: 3.2ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Processing by PrintersController#index as HTML
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:130:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
------------------------------------------------
PrintersControllerTest: test_should_show_printer
------------------------------------------------
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.2ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:47:14.927509"], ["created_at", "2025-09-09 01:47:14.927664"], ["updated_at", "2025-09-09 01:47:14.927664"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
Processing by PrintersController#index as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_options_returns_correct_format
----------------------------------------------------------------
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Redirected to http://www.example.com/printers/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started GET "/printers/980190962/edit" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
  [1m[36mPrinter Load (1.0ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_symbol_returns_correct_symbols
----------------------------------------------------------------
Started GET "/printers/980190962" for 127.0.0.1 at 2025-09-09 10:47:14 +0900
  [1m[36mPrinter Update (0.5ms)[0m  [1m[33mUPDATE "printers" SET "name" = $1, "power_consumption" = $2, "updated_at" = $3 WHERE "printers"."id" = $4[0m  [["name", "Updated Printer Name"], ["power_consumption", "250.0"], ["updated_at", "2025-09-09 01:47:14.931544"], ["id", 980190962]]
-------------------------------------------------------------------------
CurrencyHelperTest: test_currency_decimals_returns_correct_decimal_places
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
-------------------------------------------------------------------------
  [1m[36mPrintPricing Load (0.9ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190962]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" ORDER BY "printers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 26.6ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering printers/index.html.erb within layouts/application
Processing by PrintersController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/printers/980190962
Completed 302 Found in 20ms (ActiveRecord: 1.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
CurrencyHelperTest: test_format_currency_handles_different_currencies_correctly
-------------------------------------------------------------------------------
--------------------------------------------------------------------------
CurrencyHelperTest: test_currency_sample_values_returns_appropriate_values
--------------------------------------------------------------------------
  Rendering layout layouts/application.html.erb
Processing by PrintersController#edit as HTML
  Rendering printers/show.html.erb within layouts/application
  Parameters: {"id" => "980190962"}
  Rendered printers/show.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
------------------------------------------------------------
CurrencyHelperTest: test_zero_decimal_currencies_returns_JPY
------------------------------------------------------------
  Rendered layout layouts/application.html.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  Rendered layout layouts/application.html.erb (Duration: 33.1ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 40ms (Views: 35.9ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Destroy (0.4ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCACHE PrintPricing Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/printers
Completed 302 Found in 21ms (ActiveRecord: 2.0ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrinter Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "printers" WHERE "printers"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  Rendering layout layouts/application.html.erb
  Rendering printers/edit.html.erb within layouts/application
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 ORDER BY "printers"."name" ASC[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:47:14.946632"], ["updated_at", "2025-09-09 01:47:14.946632"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  Rendered printers/edit.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered printers/index.html.erb within layouts/application (Duration: 12.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 7.3ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Create (1.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:47:14.951523"], ["created_at", "2025-09-09 01:47:14.951546"], ["updated_at", "2025-09-09 01:47:14.951546"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 30ms (Views: 19.6ms | ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (1.0ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.6798630136986301369863013698630125"], ["created_at", "2025-09-09 01:47:14.961733"], ["updated_at", "2025-09-09 01:47:14.961733"], ["printer_id", 980190963]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190963]]
  [1m[36mPrinter Destroy (0.3ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190963]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (23.5ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (23.3ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (23.8ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (21.6ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (23.9ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (22.8ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (23.9ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (21.9ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (24.0ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (17.3ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:29.987917', '2025-09-09 01:52:29.987917', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:29.987917', '2025-09-09 01:52:29.987917', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:30.010900', '2025-09-09 01:52:30.010900', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:30.010900', '2025-09-09 01:52:30.010900', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$vWkgSDENRxz7gSl1pd1AEu5FNAURp6bT/iqY8GgXDSGs4FGcpAXqi', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.015401', '2025-09-09 01:52:30.015401', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$0XCfJegRzoYCVKeE/EIJ9.PoHdeVo.oEaRzzQZWzphlSUibXPu0TO', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.015401', '2025-09-09 01:52:30.015401', 'EUR', 0.1)[0m
  [1m[36mFixtures Load (1.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:29.989309', '2025-09-09 01:52:29.989309', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:29.989309', '2025-09-09 01:52:29.989309', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:30.011079', '2025-09-09 01:52:30.011079', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:30.011079', '2025-09-09 01:52:30.011079', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$I3B9IavZjX0r6HU4sp0qoOL.WM6ecYfuc5cIs0zFWos1dazw/aG.K', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.016853', '2025-09-09 01:52:30.016853', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$33wtKg4ffBW7iwPknggc6OSqWVCAvMa7R/r7rCBW5TU6ndQbuQ8Cm', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.016853', '2025-09-09 01:52:30.016853', 'EUR', 0.1)[0m
  [1m[36mFixtures Load (2.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:29.988964', '2025-09-09 01:52:29.988964', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:29.988964', '2025-09-09 01:52:29.988964', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:30.010711', '2025-09-09 01:52:30.010711', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:30.010711', '2025-09-09 01:52:30.010711', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$lULWAbjHDALW4vhvUj74Eu4ST7jA8ngiQ4nfRZyg6mHDh06xlxa.2', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.014582', '2025-09-09 01:52:30.014582', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$9U52batCiAwJYK.S3ITBgOy2G82R8bJzCQ6ioUqSwcrppNgCjvvqK', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.014582', '2025-09-09 01:52:30.014582', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:29.993537', '2025-09-09 01:52:29.993537', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:29.993537', '2025-09-09 01:52:29.993537', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:30.015971', '2025-09-09 01:52:30.015971', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:30.015971', '2025-09-09 01:52:30.015971', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$yeEN/Tu7pxI2THITVo1qJ.70wxrFNl1q9Eh0xsIhDtqlBs4zEhTr2', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.019344', '2025-09-09 01:52:30.019344', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$rSS6sObDh33le27vxaQCJOJlBVbkfeDAcxnccG/A6ffCpR30fpzeC', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.019344', '2025-09-09 01:52:30.019344', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (0.8ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:29.997600', '2025-09-09 01:52:29.997600', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:29.997600', '2025-09-09 01:52:29.997600', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:30.021901', '2025-09-09 01:52:30.021901', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:30.021901', '2025-09-09 01:52:30.021901', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$9cbLLjA0DDUULX2fUh6zzuSxWDc0vU8lwgZ5vNaBhN3E7CI.qIf6i', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.025755', '2025-09-09 01:52:30.025755', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$nm8AICklaViLOkAzrwqxke0/q6fcQ0wvIhLF2ezXRyS9W15xD93yC', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.025755', '2025-09-09 01:52:30.025755', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (4.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (4.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (5.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:30.009132', '2025-09-09 01:52:30.009132', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:30.009132', '2025-09-09 01:52:30.009132', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:30.032036', '2025-09-09 01:52:30.032036', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:30.032036', '2025-09-09 01:52:30.032036', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$DTA.Libf8qTUyyMCIl6ySu1SrQ12uD6V5zUCbo6Nr3LaR3QXB0Cji', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.035728', '2025-09-09 01:52:30.035728', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$kpxdmsOEM9ZZWTJ3SiMjcOOrNWhVslUWIHU4tVc4Qcyp2iwesxaGe', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.035728', '2025-09-09 01:52:30.035728', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:30.008526', '2025-09-09 01:52:30.008526', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:30.008526', '2025-09-09 01:52:30.008526', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:30.034435', '2025-09-09 01:52:30.034435', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:30.034435', '2025-09-09 01:52:30.034435', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$SctTHiC4ZCkSv261u/eZG.dyl3WNsjyWk2CzzyNTQ7OtjOQJ1/mF6', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.039029', '2025-09-09 01:52:30.039029', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$ty9606xgqkoVqnZM6bY7CesjYAEJkzuuqFmIn8VmlA0XooikQaNYe', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.039029', '2025-09-09 01:52:30.039029', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_options_returns_correct_format
  [1m[36mFixtures Load (1.4ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:30.008220', '2025-09-09 01:52:30.008220', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:30.008220', '2025-09-09 01:52:30.008220', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:30.031702', '2025-09-09 01:52:30.031702', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:30.031702', '2025-09-09 01:52:30.031702', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$V3In4.3e95KBJFsIdDdIw.fqh04r/0zFFCSi297nblveD0urTFOue', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.038115', '2025-09-09 01:52:30.038115', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$icCcQlLeMFGP82nnlMWK5OtVClxWhw02poF47348Qr16GcFcCP7sG', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.038115', '2025-09-09 01:52:30.038115', 'EUR', 0.1)[0m
----------------------------------------------------------------
----------------------------------------------------------------
CurrencyHelperTest: test_currency_symbol_returns_correct_symbols
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
------------------------------------------------------------
CurrencyHelperTest: test_zero_decimal_currencies_returns_JPY
------------------------------------------------------------
-------------------------------------------------------------------------
CurrencyHelperTest: test_currency_decimals_returns_correct_decimal_places
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
-------------------------------------------------------------------------------
CurrencyHelperTest: test_format_currency_handles_different_currencies_correctly
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.3ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:30.012164', '2025-09-09 01:52:30.012164', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:30.012164', '2025-09-09 01:52:30.012164', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:30.037055', '2025-09-09 01:52:30.037055', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:30.037055', '2025-09-09 01:52:30.037055', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$HwLlclJMObc0dMzx8P78PupdsSkszuYVXn39SfcKhrTyMuvmNPwC2', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.041752', '2025-09-09 01:52:30.041752', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$Z81w/fgR1qzt55vIaAFIjeipAfK8ctT0Qll3NsB/99no2MWWBvISa', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.041752', '2025-09-09 01:52:30.041752', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (2.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (2.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[35m (2.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:30.017289', '2025-09-09 01:52:30.017289', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:30.017289', '2025-09-09 01:52:30.017289', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:30.043607', '2025-09-09 01:52:30.043607', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:30.043607', '2025-09-09 01:52:30.043607', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$7k.0tvl63d6muk10/95TKecilgmawgHNsyF.41M3pho2bnORKHHhe', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.047028', '2025-09-09 01:52:30.047028', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$GiuVE96LZLTKDQDsCq5oEO9tISwkMbSiwrI8eTR4ULYRRj6eu4H4W', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:30.047028', '2025-09-09 01:52:30.047028', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[35m (2.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------
CurrencyHelperTest: test_currency_sample_values_returns_appropriate_values
--------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.068780"], ["updated_at", "2025-09-09 01:52:30.068780"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.070298"], ["updated_at", "2025-09-09 01:52:30.070298"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.070857"], ["updated_at", "2025-09-09 01:52:30.070857"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.072434"], ["updated_at", "2025-09-09 01:52:30.072434"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.3ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.075126"], ["created_at", "2025-09-09 01:52:30.075152"], ["updated_at", "2025-09-09 01:52:30.075152"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.3ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.075675"], ["created_at", "2025-09-09 01:52:30.075699"], ["updated_at", "2025-09-09 01:52:30.075699"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.075789"], ["created_at", "2025-09-09 01:52:30.075811"], ["updated_at", "2025-09-09 01:52:30.075811"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.3ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.077717"], ["created_at", "2025-09-09 01:52:30.077741"], ["updated_at", "2025-09-09 01:52:30.077741"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Update (0.3ms)[0m  [1m[33mUPDATE "printers" SET "cost" = $1, "updated_at" = $2 WHERE "printers"."id" = $3[0m  [["cost", "1000.0"], ["updated_at", "2025-09-09 01:52:30.083593"], ["id", 980190963]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
-------------------------------------------------------
PrinterTest: test_should_be_valid_with_valid_attributes
-------------------------------------------------------
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.098056"], ["updated_at", "2025-09-09 01:52:30.098056"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.099169"], ["updated_at", "2025-09-09 01:52:30.099169"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.099130"], ["updated_at", "2025-09-09 01:52:30.099130"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.100775"], ["updated_at", "2025-09-09 01:52:30.100775"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.100091"], ["updated_at", "2025-09-09 01:52:30.100091"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.102238"], ["updated_at", "2025-09-09 01:52:30.102238"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.103701"], ["updated_at", "2025-09-09 01:52:30.103701"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
--------------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.105259"], ["created_at", "2025-09-09 01:52:30.105282"], ["updated_at", "2025-09-09 01:52:30.105282"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
PrinterTest: test_should_have_valid_manufacturer_options
--------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.105870"], ["created_at", "2025-09-09 01:52:30.105891"], ["updated_at", "2025-09-09 01:52:30.105891"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.104799"], ["created_at", "2025-09-09 01:52:30.104815"], ["updated_at", "2025-09-09 01:52:30.104815"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.109383"], ["created_at", "2025-09-09 01:52:30.109405"], ["updated_at", "2025-09-09 01:52:30.109405"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
-----------------------------------------------------------
PrinterTest: test_should_require_positive_payoff_goal_years
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.109280"], ["updated_at", "2025-09-09 01:52:30.109280"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.110767"], ["created_at", "2025-09-09 01:52:30.110790"], ["updated_at", "2025-09-09 01:52:30.110790"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrinter Create (2.0ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.108116"], ["created_at", "2025-09-09 01:52:30.108134"], ["updated_at", "2025-09-09 01:52:30.108134"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (2.3ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.107469"], ["created_at", "2025-09-09 01:52:30.107488"], ["updated_at", "2025-09-09 01:52:30.107488"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Create (1.0ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.84784931506849315068493150684931375"], ["created_at", "2025-09-09 01:52:30.111202"], ["updated_at", "2025-09-09 01:52:30.111202"], ["printer_id", 980190964]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.112531"], ["updated_at", "2025-09-09 01:52:30.112531"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
---------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
PrinterTest: test_should_belong_to_user
---------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_0_for_paid_off_printer
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
-----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
PrinterTest: test_should_set_date_added_automatically
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
-------------------------------------
-----------------------------------------------------------
PrinterTest: test_should_require_positive_power_consumption
-----------------------------------------------------------
PrinterTest: test_should_require_name
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
-------------------------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_true_for_old_printer_past_payoff_goal
-------------------------------------------------------------------------------
-------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.116959"], ["created_at", "2025-09-09 01:52:30.116982"], ["updated_at", "2025-09-09 01:52:30.116982"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
----------------------------------------------
PrinterTest: test_should_require_positive_cost
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
----------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
PrinterTest: test_months_to_payoff_should_return_correct_months_remaining
---------------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
PrinterTest: test_paid_off?_should_return_false_for_new_printer
---------------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
-------------------------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.123200"], ["created_at", "2025-09-09 01:52:30.123225"], ["updated_at", "2025-09-09 01:52:30.123225"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
UserTest: test_should_require_positive_default_energy_cost_per_kwh
------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-09 01:52:30.118525"], ["created_at", "2025-09-09 01:52:30.123490"], ["updated_at", "2025-09-09 01:52:30.123490"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.124210"], ["created_at", "2025-09-09 01:52:30.124233"], ["updated_at", "2025-09-09 01:52:30.124233"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
---------------------------------------------------------
UserTest: test_should_require_default_energy_cost_per_kwh
---------------------------------------------------------
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2024-09-09 01:52:30.124420"], ["created_at", "2025-09-09 01:52:30.127754"], ["updated_at", "2025-09-09 01:52:30.127754"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-09 01:52:30.123873"], ["created_at", "2025-09-09 01:52:30.126305"], ["updated_at", "2025-09-09 01:52:30.126305"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.9ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.125102"], ["created_at", "2025-09-09 01:52:30.125131"], ["updated_at", "2025-09-09 01:52:30.125131"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
UserTest: test_should_require_default_currency
----------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
-------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
UserTest: test_should_have_default_values_for_new_users
-------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_edit
------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserProfilesControllerTest: test_should_update_user_profile
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_show
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
UserProfilesControllerTest: test_should_require_authentication
--------------------------------------------------------------
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.140087"], ["updated_at", "2025-09-09 01:52:30.140087"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.140399"], ["updated_at", "2025-09-09 01:52:30.140399"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (5.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.168993"], ["created_at", "2025-09-09 01:52:30.169013"], ["updated_at", "2025-09-09 01:52:30.169013"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/profile" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/profile/edit" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.6798630136986301369863013698630125"], ["created_at", "2025-09-09 01:52:30.182733"], ["updated_at", "2025-09-09 01:52:30.182733"], ["printer_id", 980190964]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/profile" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Started GET "/profile" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190964]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by UserProfilesController#edit as HTML
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.204505"], ["updated_at", "2025-09-09 01:52:30.204505"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by UserProfilesController#update as HTML
  Parameters: {"user" => {"default_currency" => "EUR", "default_energy_cost_per_kwh" => "0.15"}}
Processing by UserProfilesController#show as HTML
  [1m[36mPrintPricing Destroy (0.6ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (1.0ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Other Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.212575"], ["created_at", "2025-09-09 01:52:30.212623"], ["updated_at", "2025-09-09 01:52:30.212623"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering user_profiles/edit.html.erb within layouts/application
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendered user_profiles/edit.html.erb within layouts/application (Duration: 3.3ms | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/show.html.erb within layouts/application
Processing by UserProfilesController#show as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-09 01:52:30.220110"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  [1m[36mPrinter Load (4.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190964]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
  Rendered layout layouts/application.html.erb (Duration: 9.9ms | GC: 0.0ms)
Completed 302 Found in 17ms (ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
Completed 200 OK in 25ms (Views: 12.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  Rendered user_profiles/show.html.erb within layouts/application (Duration: 6.7ms | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190964]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Create (0.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Other User's Print"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.77393150684931506849315068493150625"], ["created_at", "2025-09-09 01:52:30.219113"], ["updated_at", "2025-09-09 01:52:30.219113"], ["printer_id", 980190965]]
Completed 401 Unauthorized in 8ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#new as HTML
  [1m[36mPrinter Destroy (0.7ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190964]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 10.8ms | GC: 0.0ms)
Completed 200 OK in 23ms (Views: 13.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by PrintPricingsController#update as HTML
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190964]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#index as HTML
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Processing by PrintPricingsController#create as HTML
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
  [1m[36mPrintPricing Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 7.4ms | GC: 0.0ms)
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x0000000121dd6180>, params: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x00000001206b2580>, params: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  Rendering layout layouts/application.html.erb
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | GC: 0.0ms)
Completed 404 Not Found in 7ms (ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Completed 422 Unprocessable Content in 29ms (Views: 19.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  Rendering print_pricings/new.html.erb within layouts/application
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 19.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.8ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 17.4ms | GC: 0.0ms)
Completed 200 OK in 22ms (Views: 19.0ms | ActiveRecord: 1.2ms (3 queries, 0 cached) | GC: 0.0ms)
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:130:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintersControllerTest: test_should_show_printer
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendering layout layouts/application.html.erb
--------------------------------------------------
PrintersControllerTest: test_should_update_printer
--------------------------------------------------
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mPrinter Load (0.8ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.8ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-09 01:52:30.260616"], ["updated_at", "2025-09-09 01:52:30.260616"], ["printer_id", nil]]
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 36.0ms | GC: 0.0ms)
Processing by PrintPricingsController#update as HTML
Completed 200 OK in 45ms (Views: 36.9ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 8.8ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/printers/980190962" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
PrintersControllerTest: test_should_require_authentication
----------------------------------------------------------
Started PATCH "/printers/980190962" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Processing by PrintersController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrinter Load (0.7ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 14.9ms | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#update as HTML
  Parameters: {"printer" => {"name" => "Updated Printer Name", "power_consumption" => "250"}, "id" => "980190962"}
Completed 200 OK in 25ms (Views: 16.2ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.7ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  [1m[36mPrinter Load (0.7ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Started GET "/printers" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrinter Load (0.8ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
Processing by PrintersController#index as HTML
  Rendering layout layouts/application.html.erb
Redirected to http://www.example.com/print_pricings/980190963
  Rendering printers/show.html.erb within layouts/application
  Rendered printers/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  [1m[36mPrintPricing Load (2.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Completed 302 Found in 47ms (ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 1.9ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Update (0.5ms)[0m  [1m[33mUPDATE "printers" SET "name" = $1, "power_consumption" = $2, "updated_at" = $3 WHERE "printers"."id" = $4[0m  [["name", "Updated Printer Name"], ["power_consumption", "250.0"], ["updated_at", "2025-09-09 01:52:30.295263"], ["id", 980190962]]
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 34.9ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 12.3ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x0000000120813d48>, params: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190962"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 37.5ms | GC: 0.0ms)
Completed 422 Unprocessable Content in 49ms (Views: 38.8ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
PrintersControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 17.3ms | GC: 0.0ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 20.3ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/printers/980190962
  [1m[36mPrintPricing Update (1.6ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "final_price" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Job Name"], ["final_price", "1.84784931506849315068493150684931375"], ["updated_at", "2025-09-09 01:52:30.304546"], ["id", 980190962]]
  [1m[36mPrinter Load (1.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintersControllerTest: test_should_create_printer
--------------------------------------------------
Completed 302 Found in 32ms (ActiveRecord: 1.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Processing by PrintersController#index as HTML
  [1m[36mPrinter Load (0.7ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  Rendering printers/index.html.erb within layouts/application
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintersControllerTest: test_should_destroy_printer
---------------------------------------------------
  [1m[36mPrinter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "printers" WHERE "printers"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrinter Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
PrintersControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mPrinter Load (0.9ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 ORDER BY "printers"."name" ASC[0m  [["user_id", 980190962]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/printers" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/print_pricings/980190962
  [1m[36mPrinter Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintersControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered printers/index.html.erb within layouts/application (Duration: 5.9ms | GC: 0.0ms)
Started DELETE "/printers/980190962" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
Completed 302 Found in 53ms (ActiveRecord: 3.1ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by PrintersController#create as HTML
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  Parameters: {"printer" => {"name" => "Test Printer", "manufacturer" => "Prusa", "power_consumption" => "200", "cost" => "500", "payoff_goal_years" => "3"}}
Completed 200 OK in 14ms (Views: 6.2ms | ActiveRecord: 1.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Started GET "/printers/980190962/edit" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (1.7ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mPrinter Load (2.1ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
Started GET "/printers/new" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
Processing by PrintersController#edit as HTML
  Parameters: {"id" => "980190962"}
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.6ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (1.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.336366"], ["created_at", "2025-09-09 01:52:30.336384"], ["updated_at", "2025-09-09 01:52:30.336384"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
Processing by PrintersController#new as HTML
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.338331"], ["updated_at", "2025-09-09 01:52:30.338331"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (1.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Redirected to http://www.example.com/print_pricings
  Rendering layout layouts/application.html.erb
  Rendering printers/edit.html.erb within layouts/application
  Rendering layout layouts/application.html.erb
  Rendering printers/new.html.erb within layouts/application
  Rendered printers/edit.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 302 Found in 27ms (ActiveRecord: 3.6ms (2 queries, 0 cached) | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 2.0ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  Rendered printers/new.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 5.4ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 12.0ms | GC: 0.0ms)
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[31mROLLBACK[0m
  Rendered layout layouts/application.html.erb (Duration: 12.7ms | GC: 0.0ms)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
Completed 200 OK in 15ms (Views: 13.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
Redirected to http://www.example.com/printers/980190965
Completed 302 Found in 20ms (ActiveRecord: 1.7ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/users" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  Rendered layout layouts/application.html.erb (Duration: 7.4ms | GC: 0.0ms)
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
  [1m[36mPrintPricing Load (3.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190962]]
Completed 200 OK in 13ms (Views: 9.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (2.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-09 01:52:30.354720"], ["default_currency", "JPY"], ["default_energy_cost_per_kwh", "35.0"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mPrintPricing Destroy (1.1ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Processing by PrintPricingsController#index as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:30.362404"], ["updated_at", "2025-09-09 01:52:30.362404"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrinter Destroy (1.2ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-09 01:52:30.358803"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  [1m[36mPrinter Create (2.2ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Other Integration Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.364061"], ["created_at", "2025-09-09 01:52:30.364106"], ["updated_at", "2025-09-09 01:52:30.364106"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (1.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" ORDER BY "printers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Complete Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "250.0"], ["cost", "300000.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.369062"], ["created_at", "2025-09-09 01:52:30.369081"], ["updated_at", "2025-09-09 01:52:30.369081"], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/printers
Completed 302 Found in 44ms (ActiveRecord: 7.8ms (4 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mPrinter Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "printer_id" => "980190966", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by PrintPricingsController#new as HTML
  [1m[36mPrinter Create (1.0ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Flow Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "150.0"], ["cost", "800.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.376857"], ["created_at", "2025-09-09 01:52:30.376895"], ["updated_at", "2025-09-09 01:52:30.376895"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
Redirected to http://www.example.com/
Completed 303 See Other in 28ms (ActiveRecord: 2.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started GET "/" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Started GET "/" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mPrinter Load (0.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-09 01:52:30.386623"], ["updated_at", "2025-09-09 01:52:30.386623"], ["printer_id", 980190966]]
Processing by PrintPricingsController#index as HTML
  [1m[36mPrintPricing Create (3.2ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Other User's Print"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.77393150684931506849315068493150625"], ["created_at", "2025-09-09 01:52:30.378211"], ["updated_at", "2025-09-09 01:52:30.378211"], ["printer_id", 980190964]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
  Rendering layout layouts/application.html.erb
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendering print_pricings/index.html.erb within layouts/application
Redirected to http://www.example.com/print_pricings/980190964
Completed 302 Found in 10ms (ActiveRecord: 1.2ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190965], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
Completed 200 OK in 8ms (Views: 1.7ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (1.1ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 6.5ms | GC: 0.0ms)
Completed 404 Not Found in 2ms (ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:178:in 'block in <class:PrintPricingFlowsTest>'
  Rendered layout layouts/application.html.erb (Duration: 7.6ms | GC: 0.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Started GET "/print_pricings/980190964" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 0.9ms (3 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190964"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190964], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190965], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:30.400411"], ["created_at", "2025-09-09 01:52:30.400430"], ["updated_at", "2025-09-09 01:52:30.400430"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mPrinter Load (0.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190965]]
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 6.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.7ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 7.4ms | ActiveRecord: 0.8ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  [1m[36mCACHE Printer Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "printer_id" => "980190965", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 7.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.1ms | GC: 0.0ms)
Completed 200 OK in 18ms (Views: 8.3ms | ActiveRecord: 4.0ms (2 queries, 0 cached) | GC: 0.0ms)
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 19.4ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (1.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
  Rendered layout layouts/application.html.erb (Duration: 25.7ms | GC: 0.0ms)
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "printer_id" => "980190964", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "vat_percentage" => "21.0"}}
  [1m[36mPrintPricing Create (0.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190965], ["job_name", "Integration Test Print"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.72460602739726027397260273972602675"], ["created_at", "2025-09-09 01:52:30.433444"], ["updated_at", "2025-09-09 01:52:30.433444"], ["printer_id", 980190965]]
Completed 200 OK in 39ms (Views: 27.8ms | ActiveRecord: 0.7ms (3 queries, 1 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCACHE User Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 16ms (ActiveRecord: 2.7ms (3 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mPrinter Load (2.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190965], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.32611104452054794520547945205479537625"], ["created_at", "2025-09-09 01:52:30.446245"], ["updated_at", "2025-09-09 01:52:30.446245"], ["printer_id", 980190964]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 7.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.6ms | GC: 0.0ms)
Completed 200 OK in 12ms (Views: 8.1ms | ActiveRecord: 0.8ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 24ms (ActiveRecord: 3.0ms (3 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 5.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.4ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 6.4ms | ActiveRecord: 1.0ms (3 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190963/edit" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 2.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.6ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 3.8ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.0ms)
Started PATCH "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190963"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x00000001251dd2a8>, params: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190963"} }[0m
  [1m[36mCACHE Printer Load (0.0ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.7ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "updated_at" = $2 WHERE "print_pricings"."id" = $3[0m  [["job_name", "Updated Flow Test Print"], ["updated_at", "2025-09-09 01:52:30.499087"], ["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 16ms (ActiveRecord: 0.9ms (4 queries, 3 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 6.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.0ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 4ms (ActiveRecord: 0.4ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:30 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 2.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTruncate Tables (15.6ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (15.3ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (16.2ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (14.7ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (15.4ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (11.9ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (12.5ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTruncate Tables (13.8ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTruncate Tables (17.9ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTruncate Tables (9.6ms)[0m  [1m[35mTRUNCATE TABLE "print_pricings", "printers", "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixtures Load (1.3ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:43.143029', '2025-09-09 01:52:43.143029', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:43.143029', '2025-09-09 01:52:43.143029', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:43.166730', '2025-09-09 01:52:43.166730', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:43.166730', '2025-09-09 01:52:43.166730', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$3xjM/QLKSn02IQs9YiFN4.rgyRJFz9Usg7qglvyhItK7ta1yM2nzC', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.171295', '2025-09-09 01:52:43.171295', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$uv9Fq9fMOD6sCyNg3NZqPe92oY7UMBLmgk6XxoADWTWwn0U.qzcO2', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.171295', '2025-09-09 01:52:43.171295', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.1ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:43.138707', '2025-09-09 01:52:43.138707', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:43.138707', '2025-09-09 01:52:43.138707', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:43.164088', '2025-09-09 01:52:43.164088', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:43.164088', '2025-09-09 01:52:43.164088', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$g/Suf9egY0Krltkttz9eb.JW/vqJx9QUV/fJjwlroxWwEd/mwZ3vW', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.171005', '2025-09-09 01:52:43.171005', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$.MSEZTTwFB.jXZjDf/CzZeAQdVW20UOx0AwbtU6jhaFW/olQFyuZm', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.171005', '2025-09-09 01:52:43.171005', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:43.153707', '2025-09-09 01:52:43.153707', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:43.153707', '2025-09-09 01:52:43.153707', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:43.172048', '2025-09-09 01:52:43.172048', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:43.172048', '2025-09-09 01:52:43.172048', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$CMD5CADhjcULqSLhPvZgA.2OJ.6BLi03j8bIO26OhyuKIrbrcieHW', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.176412', '2025-09-09 01:52:43.176412', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$yxWxrVTnAqmfOUIlnBv6N.yfypXJ.CB.DxcTlGSEUNfTZ12bK6pri', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.176412', '2025-09-09 01:52:43.176412', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[35m (3.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.2ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:43.149682', '2025-09-09 01:52:43.149682', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:43.149682', '2025-09-09 01:52:43.149682', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:43.171312', '2025-09-09 01:52:43.171312', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:43.171312', '2025-09-09 01:52:43.171312', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$7..BRAW4OcOIkEgc2YPPd.C2KsEHY0LLUzsdYxypMSsDuMXCKkGfa', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.174883', '2025-09-09 01:52:43.174883', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$yMlcpIkfsmlN1enMMixurezKf5V5a3f2h08NB2EngwOAbHW/eRwCq', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.174883', '2025-09-09 01:52:43.174883', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:43.151268', '2025-09-09 01:52:43.151268', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:43.151268', '2025-09-09 01:52:43.151268', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:43.171700', '2025-09-09 01:52:43.171700', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:43.171700', '2025-09-09 01:52:43.171700', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$HKnWWUSv8uBMyvBkeJY4wuw2dwl0hv4.TjIYRHYKn.GGUTKXWnbj.', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.175076', '2025-09-09 01:52:43.175076', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$IWtOPm/iB49QPcojJuqpYOWNF53Jsbbr1BqHUs1asJx34KZDiBwF.', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.175076', '2025-09-09 01:52:43.175076', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:43.154189', '2025-09-09 01:52:43.154189', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:43.154189', '2025-09-09 01:52:43.154189', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:43.173200', '2025-09-09 01:52:43.173200', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:43.173200', '2025-09-09 01:52:43.173200', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$2GlUTOA1dFpUpj94s1AK8exs125vLuyQ5AjxCFDln.YpApOtG21om', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.177335', '2025-09-09 01:52:43.177335', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$LjnYvQ5PkVHlyljpLuYdyOIEm8fO2/PYFgYAw6KcMVM5b49QvQAgy', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.177335', '2025-09-09 01:52:43.177335', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.7ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:43.152691', '2025-09-09 01:52:43.152691', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:43.152691', '2025-09-09 01:52:43.152691', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:43.172587', '2025-09-09 01:52:43.172587', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:43.172587', '2025-09-09 01:52:43.172587', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$d/HRL/U67W9bM0TZkE5SzOFRTdcoVKM9/4uSE147yoYscuqag9tnq', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.177420', '2025-09-09 01:52:43.177420', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$Cm6zmk1LmF0h4Z5Sdo2LG.5PcNYfulOb3neyCAcq0KXczJy80JLUu', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.177420', '2025-09-09 01:52:43.177420', 'EUR', 0.1)[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mFixtures Load (0.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:43.154504', '2025-09-09 01:52:43.154504', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:43.154504', '2025-09-09 01:52:43.154504', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:43.174628', '2025-09-09 01:52:43.174628', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:43.174628', '2025-09-09 01:52:43.174628', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$893KS/qOSxB9KWp9u6O73eOAQY9O3pVnKr1HHSyHGF0i8IZKPXfca', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.179611', '2025-09-09 01:52:43.179611', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$arrR20S1Q22RDozAiu/8DOCuj/E9v.1FdQUbBZzw5gPu1i7l.P4Da', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.179611', '2025-09-09 01:52:43.179611', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mFixtures Load (1.9ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:43.148888', '2025-09-09 01:52:43.148888', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:43.148888', '2025-09-09 01:52:43.148888', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:43.170921', '2025-09-09 01:52:43.170921', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:43.170921', '2025-09-09 01:52:43.170921', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$Kkc/1HPFT0YRX7tChe7VMuDcmYWK6dsjC6dwJKOwcd9CwLT3QpluW', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.180154', '2025-09-09 01:52:43.180154', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$9TdKy1yQL9QgvsAQkkiv6O0KhNgLnhYCTvBMr4/Sbe3kNQf5V7eji', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.180154', '2025-09-09 01:52:43.180154', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (2.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[35m (2.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
----------------------------------------------
UserTest: test_should_require_default_currency
----------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
------------------------------------------------------------------------------
UserTest: test_should_destroy_associated_print_pricings_when_user_is_destroyed
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (3.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
-------------------------------------------------------
UserTest: test_should_have_default_values_for_new_users
-------------------------------------------------------
---------------------------------------------------------
UserTest: test_should_require_default_energy_cost_per_kwh
---------------------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
  [1m[35m (3.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
UserTest: test_should_have_many_print_pricings
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
UserTest: test_should_require_email
-----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "print_pricings" DISABLE TRIGGER ALL;ALTER TABLE "printers" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
UserTest: test_should_be_valid_with_valid_attributes
----------------------------------------------------
  [1m[36mFixtures Load (1.5ms)[0m  [1m[31mDELETE FROM "print_pricings";
DELETE FROM "printers";
DELETE FROM "users";
INSERT INTO "print_pricings" ("id", "user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES (980190962, 980190962, 'Test Print 1', 2, 30, 50.0, 'PLA', 25.0, 1000.0, 20.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 10.0, DEFAULT, '2025-09-09 01:52:43.166626', '2025-09-09 01:52:43.166626', 980190962), (298486374, 298486374, 'Test Print 2', 1, 45, 35.0, 'PETG', 3000.0, 1000.0, 15.0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 8.0, DEFAULT, '2025-09-09 01:52:43.166626', '2025-09-09 01:52:43.166626', 298486374);
INSERT INTO "printers" ("id", "user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES (980190962, 980190962, 'Test Printer 1', 'Prusa', 200.0, 500.0, 3, '2025-09-08 13:19:42', '2025-09-09 01:52:43.185681', '2025-09-09 01:52:43.185681', 8, 5.0), (298486374, 298486374, 'Test Printer 2', 'Bambu Lab', 250.0, 800.0, 2, '2025-09-08 13:19:42', '2025-09-09 01:52:43.185681', '2025-09-09 01:52:43.185681', 6, 3.0);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES (980190962, 'user1@example.com', '$2a$04$R7Q3Ve6PoDrif4Mb3RAiV.IrEI8Prwj7FXvFyjtgnKnG6oRckuLAq', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.190410', '2025-09-09 01:52:43.190410', 'USD', 0.12), (298486374, 'user2@example.com', '$2a$04$wQpX3.PeUna3HYOt6fvXzOGxFlnCV2Z/DEGbmXIxFHR7DIzkyq4xq', DEFAULT, DEFAULT, DEFAULT, '2025-09-09 01:52:43.190410', '2025-09-09 01:52:43.190410', 'EUR', 0.1)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------
UserTest: test_should_require_password
--------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
------------------------------------------------------------------
UserTest: test_should_require_positive_default_energy_cost_per_kwh
------------------------------------------------------------------
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL;ALTER TABLE "print_pricings" ENABLE TRIGGER ALL;ALTER TABLE "printers" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[35m (3.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_catalog.pg_constraint SET convalidated=false WHERE conname = ''%1$I'' AND connamespace::regnamespace = ''%2$I''::regnamespace; ALTER TABLE %2$I.%3$I VALIDATE CONSTRAINT %1$I;',
    constraint_name,
    table_schema,
    table_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.204030"], ["updated_at", "2025-09-09 01:52:43.204030"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
PrintPricingFlowsTest: test_user_cannot_access_other_user's_pricings
--------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingFlowsTest: test_authenticated_user_can_manage_print_pricings
------------------------------------------------------------------------
-----------------------------------------------------------------
PrintPricingFlowsTest: test_complete_pricing_calculation_workflow
-----------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
PrinterTest: test_should_set_date_added_automatically
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.214193"], ["updated_at", "2025-09-09 01:52:43.214193"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
PrinterTest: test_should_be_valid_with_valid_attributes
-------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_unauthenticated_user_is_redirected_to_login
-----------------------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.218357"], ["created_at", "2025-09-09 01:52:43.218391"], ["updated_at", "2025-09-09 01:52:43.218391"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
PrintPricingFlowsTest: test_user_can_sign_up_and_create_a_print_pricing
-----------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------
PrinterTest: test_should_belong_to_user
---------------------------------------
-----------------------------------------------------------
PrinterTest: test_should_require_positive_power_consumption
-----------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (3.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.223081"], ["created_at", "2025-09-09 01:52:43.223120"], ["updated_at", "2025-09-09 01:52:43.223120"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
-----------------------------------------------------------------------
PrinterTest: test_should_require_positive_cost
-------------------------------------------------------------------------
PrinterTest: test_months_to_payoff_should_return_0_for_paid_off_printer
PrinterTest: test_months_to_payoff_should_return_correct_months_remaining
----------------------------------------------
-------------------------------------------------------------------------
-----------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-09 01:52:43.232208"], ["created_at", "2025-09-09 01:52:43.233189"], ["updated_at", "2025-09-09 01:52:43.233189"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_true_for_old_printer_past_payoff_goal
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2024-09-09 01:52:43.233327"], ["created_at", "2025-09-09 01:52:43.234485"], ["updated_at", "2025-09-09 01:52:43.234485"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
  [1m[36mPrintPricing Create (0.6ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "1.6798630136986301369863013698630125"], ["created_at", "2025-09-09 01:52:43.232996"], ["updated_at", "2025-09-09 01:52:43.232996"], ["printer_id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
--------------------------------------------------------
PrinterTest: test_should_have_valid_manufacturer_options
--------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
-----------------------------------------------------------
PrinterTest: test_should_require_positive_payoff_goal_years
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2020-09-09 01:52:43.236947"], ["created_at", "2025-09-09 01:52:43.237497"], ["updated_at", "2025-09-09 01:52:43.237497"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
PrinterTest: test_should_require_name
-------------------------------------
---------------------------------------------------------------
PrinterTest: test_paid_off?_should_return_false_for_new_printer
---------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
-------------------------------------------------------------------------------
CurrencyHelperTest: test_format_currency_handles_different_currencies_correctly
-------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
CurrencyHelperTest: test_currency_symbol_returns_correct_symbols
----------------------------------------------------------------
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.245275"], ["created_at", "2025-09-09 01:52:43.245338"], ["updated_at", "2025-09-09 01:52:43.245338"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------
CurrencyHelperTest: test_currency_decimals_returns_correct_decimal_places
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
CurrencyHelperTest: test_zero_decimal_currencies_returns_JPY
------------------------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
CurrencyHelperTest: test_currency_options_returns_correct_format
----------------------------------------------------------------
--------------------------------------------------------------------------
CurrencyHelperTest: test_currency_sample_values_returns_appropriate_values
--------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Destroy (0.2ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-09 01:52:43.256957"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-09 01:52:43.258001"], ["default_currency", "JPY"], ["default_energy_cost_per_kwh", "35.0"], ["id", 980190962]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190963]]
Started GET "/users/sign_up" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.259166"], ["updated_at", "2025-09-09 01:52:43.259166"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_update_print_pricing
-------------------------------------------------------------
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
PrintPricingsControllerTest: test_should_get_new
------------------------------------------------
  [1m[36mPrinter Destroy (0.4ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.7ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Other Integration Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.265815"], ["created_at", "2025-09-09 01:52:43.265837"], ["updated_at", "2025-09-09 01:52:43.265837"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_access_other_user's_print_pricing
------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Flow Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "150.0"], ["cost", "800.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.269494"], ["created_at", "2025-09-09 01:52:43.269542"], ["updated_at", "2025-09-09 01:52:43.269542"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Complete Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "250.0"], ["cost", "300000.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.271960"], ["created_at", "2025-09-09 01:52:43.272009"], ["updated_at", "2025-09-09 01:52:43.272009"], ["daily_usage_hours", 10], ["repair_cost_percentage", "8.0"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
PrintPricingsControllerTest: test_should_show_print_pricing
-----------------------------------------------------------
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Create (0.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Other User's Print"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.77393150684931506849315068493150625"], ["created_at", "2025-09-09 01:52:43.277033"], ["updated_at", "2025-09-09 01:52:43.277033"], ["printer_id", 980190963]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  Rendering layout layouts/application.html.erb
  Rendering /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_error_messages.html.erb (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/shared/_links.html.erb (Duration: 0.2ms | GC: 0.0ms)
  Rendered /Users/cody/.rbenv/versions/3.4.5/lib/ruby/gems/3.4.0/gems/devise-4.9.4/app/views/devise/registrations/new.html.erb within layouts/application (Duration: 2.7ms | GC: 0.0ms)
---------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_redirect_to_login_when_not_authenticated
---------------------------------------------------------------------------------
Completed 401 Unauthorized in 7ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.6ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 10.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/users" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"user" => {"email" => "[FILTERED]", "password" => "[FILTERED]", "password_confirmation" => "[FILTERED]"}}
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.295610"], ["updated_at", "2025-09-09 01:52:43.295610"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintPricingsController#index as HTML
Redirected to http://www.example.com/
Completed 303 See Other in 8ms (ActiveRecord: 1.0ms (2 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#new as HTML
Started GET "/" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Test"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#create as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Parameters: {"print_pricing" => {"job_name" => "Complete Test", "printer_id" => "980190963", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "60.0", "filament_type" => "ABS", "spool_price" => "4500.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0", "prep_time_minutes" => "45", "prep_cost_per_hour" => "2500.0", "postprocessing_time_minutes" => "30", "postprocessing_cost_per_hour" => "3000.0", "other_costs" => "500.0", "vat_percentage" => "10.0"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#index as HTML
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
PrintPricingsControllerTest: test_should_destroy_print_pricing
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (1.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190963], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 6.2ms | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started DELETE "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Create (0.4ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Complete Test"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "60.0"], ["filament_type", "ABS"], ["spool_price", "4500.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", 45], ["prep_cost_per_hour", "2500.0"], ["postprocessing_time_minutes", 30], ["postprocessing_cost_per_hour", "3000.0"], ["other_costs", "500.0"], ["vat_percentage", "10.0"], ["final_price", "4767.48758561643835616438356164383464"], ["created_at", "2025-09-09 01:52:43.320521"], ["updated_at", "2025-09-09 01:52:43.320521"], ["printer_id", 980190963]]
Completed 404 Not Found in 7ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.8ms | GC: 0.0ms)
Completed 200 OK in 16ms (Views: 10.7ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/integration/print_pricing_flows_test.rb:178:in 'block in <class:PrintPricingFlowsTest>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (1.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
Redirected to http://www.example.com/print_pricings/980190963
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 302 Found in 22ms (ActiveRecord: 2.0ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.325260"], ["updated_at", "2025-09-09 01:52:43.325260"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 18.2ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Destroy (1.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 8ms (ActiveRecord: 2.4ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  Rendered layout layouts/application.html.erb (Duration: 22.7ms | GC: 0.0ms)
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "id" => "980190962"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Completed 200 OK in 36ms (Views: 24.7ms | ActiveRecord: 0.9ms (3 queries, 0 cached) | GC: 0.0ms)
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mPrintPricing Load (0.9ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
-------------------------------------------------------------
PrintPricingsControllerTest: test_should_create_print_pricing
-------------------------------------------------------------
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by PrintPricingsController#new as HTML
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Other Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.335510"], ["created_at", "2025-09-09 01:52:43.335549"], ["updated_at", "2025-09-09 01:52:43.335549"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.337694"], ["created_at", "2025-09-09 01:52:43.337719"], ["updated_at", "2025-09-09 01:52:43.337719"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
Started GET "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x000000011ff20470>, params: {"print_pricing" => {"job_name" => "Updated Job Name", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190962"} }[0m
Started GET "/print_pricings/new" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
Processing by PrintPricingsController#new as HTML
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.8ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
Processing by PrintPricingsController#show as HTML
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Parameters: {"id" => "980190963"}
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}}
Processing by PrintPricingsController#index as HTML
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x000000011f78ee28>, params: {"print_pricing" => {"job_name" => "New Test Job", "currency" => "EUR", "printing_time_hours" => "3", "printing_time_minutes" => "45", "filament_weight" => "75.0", "filament_type" => "ABS", "spool_price" => "30.0", "spool_weight" => "1000.0", "markup_percentage" => "25.0"}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Create (1.0ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Other User's Print"], ["printing_time_hours", 1], ["printing_time_minutes", 0], ["filament_weight", "30.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "0.77393150684931506849315068493150625"], ["created_at", "2025-09-09 01:52:43.345960"], ["updated_at", "2025-09-09 01:52:43.345960"], ["printer_id", 980190964]]
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mPrintPricing Create (1.7ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "New Test Job"], ["printing_time_hours", 3], ["printing_time_minutes", 45], ["filament_weight", "75.0"], ["filament_type", "ABS"], ["spool_price", "30.0"], ["spool_weight", "1000.0"], ["markup_percentage", "25.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", nil], ["final_price", "2.8125"], ["created_at", "2025-09-09 01:52:43.353597"], ["updated_at", "2025-09-09 01:52:43.353597"], ["printer_id", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
PrintPricingsControllerTest: test_should_get_index
--------------------------------------------------
  [1m[36mPrintPricing Update (0.4ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "final_price" = $2, "updated_at" = $3 WHERE "print_pricings"."id" = $4[0m  [["job_name", "Updated Job Name"], ["final_price", "1.84784931506849315068493150684931375"], ["updated_at", "2025-09-09 01:52:43.355767"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#new as HTML
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 14.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 15.4ms | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 16.4ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendering layout layouts/application.html.erb
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendering print_pricings/new.html.erb within layouts/application
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Flow Test Print", "printer_id" => "980190963", "printing_time_hours" => "2", "printing_time_minutes" => "15", "filament_weight" => "40.0", "filament_type" => "PETG", "spool_price" => "35.0", "spool_weight" => "1000.0", "markup_percentage" => "20.0", "vat_percentage" => "21.0"}}
  [1m[36mCACHE Printer Load (0.0ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/new.html.erb within layouts/application
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.7ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190963]]
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
Processing by PrintPricingsController#index as HTML
Redirected to http://www.example.com/print_pricings/980190963
Redirected to http://www.example.com/print_pricings/980190962
Completed 302 Found in 41ms (ActiveRecord: 1.8ms (3 queries, 0 cached) | GC: 0.0ms)
Completed 302 Found in 27ms (ActiveRecord: 2.1ms (1 query, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#show as HTML
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Parameters: {"id" => "980190963"}
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 8.9ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 15.7ms | GC: 0.0ms)
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 19.5ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
  [1m[36mPrintPricing Load (1.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
PrintPricingsControllerTest: test_should_not_create_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendered layout layouts/application.html.erb (Duration: 17.5ms | GC: 0.0ms)
Completed 404 Not Found in 8ms (ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)
Completed 200 OK in 25ms (Views: 18.4ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Create (0.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190962], ["job_name", "Flow Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 15], ["filament_weight", "40.0"], ["filament_type", "PETG"], ["spool_price", "35.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "21.0"], ["final_price", "2.32611104452054794520547945205479537625"], ["created_at", "2025-09-09 01:52:43.384764"], ["updated_at", "2025-09-09 01:52:43.384764"], ["printer_id", 980190963]]
  Rendering print_pricings/index.html.erb within layouts/application
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  
ActiveRecord::RecordNotFound (Couldn't find PrintPricing with 'id'="980190963" [WHERE "print_pricings"."user_id" = $1]):
  
app/controllers/print_pricings_controller.rb:45:in 'PrintPricingsController#set_print_pricing'
test/controllers/print_pricings_controller_test.rb:130:in 'block in <class:PrintPricingsControllerTest>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Rendered layout layouts/application.html.erb (Duration: 24.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 21.4ms | GC: 0.0ms)
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 24.7ms | GC: 0.0ms)
Completed 200 OK in 42ms (Views: 26.4ms | ActiveRecord: 0.5ms (3 queries, 1 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
Completed 200 OK in 34ms (Views: 22.6ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  Rendered layout layouts/application.html.erb (Duration: 25.8ms | GC: 0.0ms)
Completed 200 OK in 46ms (Views: 25.7ms | ActiveRecord: 0.9ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
PrintPricingsControllerTest: test_should_get_edit
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingsControllerTest: test_should_not_update_print_pricing_with_invalid_params
-------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Load (0.8ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
Started POST "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "Integration Test Print", "printer_id" => "980190963", "printing_time_hours" => "1", "printing_time_minutes" => "30", "filament_weight" => "25.0", "filament_type" => "PLA", "spool_price" => "20.0", "spool_weight" => "1000.0", "markup_percentage" => "15.0", "vat_percentage" => "8.0"}}
Processing by PrintPricingsController#create as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}}
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: create, request: #<ActionDispatch::Request:0x000000011f1ed3e8>, params: {"print_pricing" => {"job_name" => "", "currency" => "", "filament_type" => ""}, "controller" => "print_pricings", "action" => "create"} }[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_edit
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
UserProfilesControllerTest: test_should_update_user_profile
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/print_pricings/980190962/edit" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  Rendering layout layouts/application.html.erb
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 34ms (ActiveRecord: 1.4ms (3 queries, 1 cached) | GC: 0.0ms)
  Rendering print_pricings/new.html.erb within layouts/application
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190962"}
Started PATCH "/profile" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
Started GET "/profile/edit" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mPrintPricing Load (0.4ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 14.3ms | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPrintPricing Load (0.5ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by UserProfilesController#edit as HTML
Processing by UserProfilesController#update as HTML
  Parameters: {"user" => {"default_currency" => "EUR", "default_energy_cost_per_kwh" => "0.15"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering user_profiles/edit.html.erb within layouts/application
Started PATCH "/print_pricings/980190962" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mPrinter Load (1.6ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = $1, "default_currency" = $2, "default_energy_cost_per_kwh" = $3 WHERE "users"."id" = $4[0m  [["updated_at", "2025-09-09 01:52:43.404967"], ["default_currency", "EUR"], ["default_energy_cost_per_kwh", "0.15"], ["id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 21.3ms | GC: 0.0ms)
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  Rendered user_profiles/edit.html.erb within layouts/application (Duration: 2.8ms | GC: 0.0ms)
Completed 200 OK in 34ms (Views: 24.5ms | ActiveRecord: 1.2ms (3 queries, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.7ms | GC: 0.0ms)
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "", "filament_weight" => "-1"}, "id" => "980190962"}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 8ms (Views: 5.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  Rendering print_pricings/edit.html.erb within layouts/application
  [1m[36mPrintPricing Load (0.7ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrintPricing Create (0.5ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190963], ["job_name", "Integration Test Print"], ["printing_time_hours", 1], ["printing_time_minutes", 30], ["filament_weight", "25.0"], ["filament_type", "PLA"], ["spool_price", "20.0"], ["spool_weight", "1000.0"], ["markup_percentage", "15.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "8.0"], ["final_price", "0.72460602739726027397260273972602675"], ["created_at", "2025-09-09 01:52:43.407521"], ["updated_at", "2025-09-09 01:52:43.407521"], ["printer_id", 980190963]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserProfilesControllerTest: test_should_get_show
------------------------------------------------
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1[0m  [["user_id", 980190962]]
Redirected to http://www.example.com/profile
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 302 Found in 14ms (ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  Rendering layout layouts/application.html.erb
Started GET "/profile" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 5.8ms | GC: 0.0ms)
  Rendering print_pricings/edit.html.erb within layouts/application
Processing by UserProfilesController#show as HTML
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  Rendering layout layouts/application.html.erb
--------------------------------------------------------------
UserProfilesControllerTest: test_should_require_authentication
  Rendering user_profiles/show.html.erb within layouts/application
--------------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendered user_profiles/show.html.erb within layouts/application (Duration: 2.4ms | GC: 0.0ms)
  Rendered print_pricings/new.html.erb within layouts/application (Duration: 22.5ms | GC: 0.0ms)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering print_pricings/show.html.erb within layouts/application
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | GC: 0.0ms)
Started GET "/profile" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 6.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.2ms | GC: 0.0ms)
Completed 200 OK in 26ms (Views: 16.1ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.3ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_filament_cost_correctly
---------------------------------------------------------------------
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 422 Unprocessable Content in 20ms (Views: 9.7ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 7.6ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
PrintPricingTest: test_should_return_zero_for_machine_upkeep_cost_with_missing_values
-------------------------------------------------------------------------------------
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 10.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 33.2ms | GC: 0.0ms)
Processing by UserProfilesController#show as HTML
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
Completed 200 OK in 27ms (Views: 10.7ms | ActiveRecord: 0.8ms (3 queries, 0 cached) | GC: 0.0ms)
Completed 422 Unprocessable Content in 41ms (Views: 36.2ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_electricity_cost_correctly
Started GET "/print_pricings/980190963/edit" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
------------------------------------------------------------------------
Processing by PrintPricingsController#edit as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/print_pricings/980190963
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/edit.html.erb within layouts/application
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_labor_cost_correctly
------------------------------------------------------------------
Completed 302 Found in 48ms (ActiveRecord: 3.0ms (3 queries, 1 cached) | GC: 0.0ms)
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.433140"], ["updated_at", "2025-09-09 01:52:43.433140"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" ORDER BY "print_pricings"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  Rendered print_pricings/edit.html.erb within layouts/application (Duration: 7.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | GC: 0.0ms)
Completed 200 OK in 10ms (Views: 7.6ms | ActiveRecord: 0.0ms (2 queries, 2 cached) | GC: 0.0ms)
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
Processing by PrintPricingsController#show as HTML
  [1m[36mCACHE PrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  Parameters: {"id" => "980190963"}
Started PATCH "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintPricingsController#update as HTML
  Parameters: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "id" => "980190963"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
--------------------------------------------------------------
PrintPricingTest: test_should_require_positive_filament_weight
--------------------------------------------------------------
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
[31mUnpermitted parameter: :currency. Context: { controller: PrintPricingsController, action: update, request: #<ActionDispatch::Request:0x0000000120881c30>, params: {"print_pricing" => {"job_name" => "Updated Flow Test Print", "currency" => "GBP"}, "controller" => "print_pricings", "action" => "update", "id" => "980190963"} }[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.441575"], ["updated_at", "2025-09-09 01:52:43.441575"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190963], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------
PrintPricingTest: test_should_be_valid_with_valid_attributes
------------------------------------------------------------
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (1.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.449912"], ["created_at", "2025-09-09 01:52:43.450030"], ["updated_at", "2025-09-09 01:52:43.450030"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCACHE Printer Load (0.0ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.438313"], ["updated_at", "2025-09-09 01:52:43.438313"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Update (0.7ms)[0m  [1m[33mUPDATE "print_pricings" SET "job_name" = $1, "updated_at" = $2 WHERE "print_pricings"."id" = $3[0m  [["job_name", "Updated Flow Test Print"], ["updated_at", "2025-09-09 01:52:43.457783"], ["id", 980190963]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/print_pricings/980190963
Completed 302 Found in 16ms (ActiveRecord: 1.0ms (4 queries, 3 cached) | GC: 0.0ms)
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 7.6ms | GC: 0.0ms)
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.452683"], ["updated_at", "2025-09-09 01:52:43.452683"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered layout layouts/application.html.erb (Duration: 9.3ms | GC: 0.0ms)
Started GET "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.459404"], ["updated_at", "2025-09-09 01:52:43.459404"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.463265"], ["created_at", "2025-09-09 01:52:43.463291"], ["updated_at", "2025-09-09 01:52:43.463291"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
Completed 200 OK in 19ms (Views: 9.5ms | ActiveRecord: 0.8ms (3 queries, 0 cached) | GC: 0.0ms)
Processing by PrintPricingsController#show as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.461406"], ["created_at", "2025-09-09 01:52:43.461451"], ["updated_at", "2025-09-09 01:52:43.461451"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
--------------------------------------------
PrintPricingTest: test_should_belong_to_user
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.457383"], ["updated_at", "2025-09-09 01:52:43.457383"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Load (0.3ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
  [1m[36mPrinter Create (2.1ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.468988"], ["created_at", "2025-09-09 01:52:43.469009"], ["updated_at", "2025-09-09 01:52:43.469009"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/show.html.erb within layouts/application
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.470740"], ["created_at", "2025-09-09 01:52:43.470817"], ["updated_at", "2025-09-09 01:52:43.470817"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
PrintPricingTest: test_should_require_job_name
----------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
---------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_machine_upkeep_cost_correctly
---------------------------------------------------------------------------
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (4.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
---------------------------------------------------
PrintPricingTest: test_should_require_filament_type
---------------------------------------------------
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190963], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.474181"], ["created_at", "2025-09-09 01:52:43.474218"], ["updated_at", "2025-09-09 01:52:43.474218"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.479694"], ["updated_at", "2025-09-09 01:52:43.479694"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
PrintPricingTest: test_should_handle_nil_time_values
----------------------------------------------------
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.480423"], ["updated_at", "2025-09-09 01:52:43.480423"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.477835"], ["updated_at", "2025-09-09 01:52:43.477835"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
-----------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_total_printing_time_minutes_correctly
-----------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  Rendered print_pricings/show.html.erb within layouts/application (Duration: 10.5ms | GC: 0.0ms)
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 11.0ms | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 11.8ms | ActiveRecord: 0.8ms (3 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.4ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.486098"], ["created_at", "2025-09-09 01:52:43.486123"], ["updated_at", "2025-09-09 01:52:43.486123"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190965], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.485418"], ["created_at", "2025-09-09 01:52:43.485455"], ["updated_at", "2025-09-09 01:52:43.485455"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.485194"], ["updated_at", "2025-09-09 01:52:43.485194"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
PrintPricingTest: test_should_calculate_final_price_with_VAT_before_save
------------------------------------------------------------------------
Started DELETE "/print_pricings/980190963" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Processing by PrintPricingsController#destroy as HTML
  Parameters: {"id" => "980190963"}
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.488452"], ["updated_at", "2025-09-09 01:52:43.488452"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
----------------------------------------------------------
PrintersControllerTest: test_should_require_authentication
----------------------------------------------------------
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.487232"], ["created_at", "2025-09-09 01:52:43.487264"], ["updated_at", "2025-09-09 01:52:43.487264"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.490611"], ["updated_at", "2025-09-09 01:52:43.490611"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCACHE User Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.491438"], ["created_at", "2025-09-09 01:52:43.491481"], ["updated_at", "2025-09-09 01:52:43.491481"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mPrinter Create (0.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.494263"], ["created_at", "2025-09-09 01:52:43.494293"], ["updated_at", "2025-09-09 01:52:43.494293"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/printers" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "created_at", "updated_at", "default_currency", "default_energy_cost_per_kwh") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["email", "[FILTERED]"], ["encrypted_password", "[FILTERED]"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"], ["remember_created_at", nil], ["created_at", "2025-09-09 01:52:43.493920"], ["updated_at", "2025-09-09 01:52:43.493920"], ["default_currency", "USD"], ["default_energy_cost_per_kwh", "0.12"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Create (0.5ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190965], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.497058"], ["created_at", "2025-09-09 01:52:43.497101"], ["updated_at", "2025-09-09 01:52:43.497101"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Create (0.8ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190964], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.501249"], ["created_at", "2025-09-09 01:52:43.501325"], ["updated_at", "2025-09-09 01:52:43.501325"], ["daily_usage_hours", 8], ["repair_cost_percentage", "5.0"]]
--------------------------------------------------
PrintersControllerTest: test_should_update_printer
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
------------------------------------------------
  [1m[36mPrinter Update (0.6ms)[0m  [1m[33mUPDATE "printers" SET "cost" = $1, "updated_at" = $2 WHERE "printers"."id" = $3[0m  [["cost", "1000.0"], ["updated_at", "2025-09-09 01:52:43.495597"], ["id", 980190965]]
PrintersControllerTest: test_should_show_printer
------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
-------------------------------------------
PrintersControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
--------------------------------------------------
PrintersControllerTest: test_should_create_printer
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintersController#index as HTML
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mCACHE PrintPricing Load (0.0ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 AND "print_pricings"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190963], ["LIMIT", 1]]
Started PATCH "/printers/980190962" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by PrintersController#update as HTML
  Parameters: {"printer" => {"name" => "Updated Printer Name", "power_consumption" => "250"}, "id" => "980190962"}
---------------------------------------------
PrintersControllerTest: test_should_get_index
---------------------------------------------
Started GET "/printers/new" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
Started GET "/printers/980190962" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#new as HTML
  [1m[36mPrintPricing Create (1.9ms)[0m  [1m[32mINSERT INTO "print_pricings" ("user_id", "job_name", "printing_time_hours", "printing_time_minutes", "filament_weight", "filament_type", "spool_price", "spool_weight", "markup_percentage", "prep_time_minutes", "prep_cost_per_hour", "postprocessing_time_minutes", "postprocessing_cost_per_hour", "other_costs", "vat_percentage", "final_price", "created_at", "updated_at", "printer_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING "id"[0m  [["user_id", 980190964], ["job_name", "Test Print"], ["printing_time_hours", 2], ["printing_time_minutes", 30], ["filament_weight", "50.0"], ["filament_type", "PLA"], ["spool_price", "25.0"], ["spool_weight", "1000.0"], ["markup_percentage", "20.0"], ["prep_time_minutes", nil], ["prep_cost_per_hour", nil], ["postprocessing_time_minutes", nil], ["postprocessing_cost_per_hour", nil], ["other_costs", nil], ["vat_percentage", "10.0"], ["final_price", "1.84784931506849315068493150684931375"], ["created_at", "2025-09-09 01:52:43.506088"], ["updated_at", "2025-09-09 01:52:43.506088"], ["printer_id", 980190965]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------
PrintersControllerTest: test_should_destroy_printer
---------------------------------------------------
Started POST "/printers" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
Started GET "/printers" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  Rendering layout layouts/application.html.erb
  Rendering printers/new.html.erb within layouts/application
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Processing by PrintersController#show as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPrinter Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mPrintPricing Destroy (3.8ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190963]]
Processing by PrintersController#create as HTML
  Parameters: {"printer" => {"name" => "Test Printer", "manufacturer" => "Prusa", "power_consumption" => "200", "cost" => "500", "payoff_goal_years" => "3"}}
  Rendering layout layouts/application.html.erb
  Rendered printers/new.html.erb within layouts/application (Duration: 5.2ms | GC: 0.0ms)
  Rendering printers/show.html.erb within layouts/application
  Rendered printers/show.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
Started DELETE "/printers/980190962" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  Rendered layout layouts/application.html.erb (Duration: 0.6ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 1.2ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.7ms | GC: 0.0ms)
Processing by PrintersController#index as HTML
Completed 200 OK in 12ms (Views: 7.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PrintersController#destroy as HTML
  Parameters: {"id" => "980190962"}
Redirected to http://www.example.com/print_pricings
Completed 302 Found in 37ms (ActiveRecord: 3.8ms (3 queries, 2 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering printers/index.html.erb within layouts/application
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Create (3.6ms)[0m  [1m[32mINSERT INTO "printers" ("user_id", "name", "manufacturer", "power_consumption", "cost", "payoff_goal_years", "date_added", "created_at", "updated_at", "daily_usage_hours", "repair_cost_percentage") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id", "date_added"[0m  [["user_id", 980190962], ["name", "Test Printer"], ["manufacturer", "Prusa"], ["power_consumption", "200.0"], ["cost", "500.0"], ["payoff_goal_years", 3], ["date_added", "2025-09-09 01:52:43.525418"], ["created_at", "2025-09-09 01:52:43.525438"], ["updated_at", "2025-09-09 01:52:43.525438"], ["daily_usage_hours", 8], ["repair_cost_percentage", "0.0"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mPrinter Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "printers" WHERE "printers"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
PrintersControllerTest: test_should_get_edit
  [1m[36mPrinter Load (0.5ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 ORDER BY "printers"."name" ASC[0m  [["user_id", 980190962]]
--------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Load (0.2ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/printers/980190962/edit" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
Processing by PrintersController#edit as HTML
  Parameters: {"id" => "980190962"}
  [1m[36mPrintPricing Load (0.6ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."printer_id" = $1[0m  [["printer_id", 980190962]]
Started GET "/print_pricings" for 127.0.0.1 at 2025-09-09 10:52:43 +0900
  Rendered printers/index.html.erb within layouts/application (Duration: 7.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.0ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 9.1ms | ActiveRecord: 0.7ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."user_id" = $1 AND "printers"."id" = $2 LIMIT $3[0m  [["user_id", 980190962], ["id", 980190962], ["LIMIT", 1]]
Processing by PrintPricingsController#index as HTML
  [1m[36mPrintPricing Destroy (0.3ms)[0m  [1m[31mDELETE FROM "print_pricings" WHERE "print_pricings"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mPrinter Update (4.0ms)[0m  [1m[33mUPDATE "printers" SET "name" = $1, "power_consumption" = $2, "updated_at" = $3 WHERE "printers"."id" = $4[0m  [["name", "Updated Printer Name"], ["power_consumption", "250.0"], ["updated_at", "2025-09-09 01:52:43.516074"], ["id", 980190962]]
  [1m[36mPrinter Destroy (1.0ms)[0m  [1m[31mDELETE FROM "printers" WHERE "printers"."id" = $1[0m  [["id", 980190962]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/printers/980190966
  Rendering layout layouts/application.html.erb
  Rendering print_pricings/index.html.erb within layouts/application
Completed 302 Found in 21ms (ActiveRecord: 3.8ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
Redirected to http://www.example.com/printers
Completed 302 Found in 20ms (ActiveRecord: 2.6ms (4 queries, 0 cached) | GC: 0.0ms)
Redirected to http://www.example.com/printers/980190962
  Rendering layout layouts/application.html.erb
  Rendering printers/edit.html.erb within layouts/application
  Rendered printers/edit.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  [1m[36mPrintPricing Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 LIMIT $2[0m  [["user_id", 980190962], ["LIMIT", 1]]
  Rendered layout layouts/application.html.erb (Duration: 0.7ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 0.8ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrintPricing Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "print_pricings" WHERE "print_pricings"."user_id" = $1[0m  [["user_id", 980190962]]
Completed 302 Found in 35ms (ActiveRecord: 5.1ms (2 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrintPricing Load (0.2ms)[0m  [1m[34mSELECT "print_pricings".* FROM "print_pricings" WHERE "print_pricings"."user_id" = $1 ORDER BY "print_pricings"."created_at" DESC[0m  [["user_id", 980190962]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  Rendered print_pricings/index.html.erb within layouts/application (Duration: 8.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.0ms | GC: 0.0ms)
Completed 200 OK in 17ms (Views: 10.0ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)
  [1m[36mPrinter Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "printers"[0m
  [1m[36mPrinter Load (0.4ms)[0m  [1m[34mSELECT "printers".* FROM "printers" ORDER BY "printers"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPrinter Load (0.3ms)[0m  [1m[34mSELECT "printers".* FROM "printers" WHERE "printers"."id" = $1 LIMIT $2[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
