#!/usr/bin/env ruby
# Sync translation wrapper - REQUIRES OpenRouter API key
# This script is designed to FAIL if automated translation is not available

# Check if API key is available
api_key = ENV['OPENROUTER_TRANSLATION_KEY'] || ENV['OPENROUTER_API_KEY']

if api_key
  puts "ü§ñ API key detected - using automated translation"
  puts
  # Call the automated translation script
  exec(File.expand_path('translate-locales', __dir__))
else
  puts "‚ùå ERROR: OPENROUTER_TRANSLATION_KEY environment variable not set"
  puts
  puts "This project requires automated translation to maintain locale files."
  puts "We do NOT use English placeholders - all locales must be properly translated."
  puts
  puts "To fix this:"
  puts "  1. Get your OpenRouter API key from 1Password (CALCUMAKE_OPENROUTER_TRANSLATION_KEY)"
  puts "  2. Set it locally:"
  puts "     export OPENROUTER_TRANSLATION_KEY='your-key-here'"
  puts "  3. Run this script again: bin/sync-translations"
  puts
  puts "For deployment, ensure Kamal secrets are configured correctly."
  puts
  exit 1
end
