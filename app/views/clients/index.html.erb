<!-- Hero Section -->
<div class="text-center mb-5">
    <h3 class="display-5 fw-bold text-primary mb-3"><%= t('clients.index.title') %></h3>
    <p class="lead text-muted mb-4"><%= t('clients.index.subtitle') %></p>
    <%= link_to t('clients.index.add_new'), new_client_path, class: "btn btn-primary btn-lg" %>
</div>

<!-- Search Section -->
<% if @clients.any? || params[:q].present? %>
<div class="card mb-4" data-controller="search" data-search-url-value="<%= clients_path %>">
    <div class="card-body">
        <%= search_form_for @q, url: clients_path,
            html: {
              class: "row g-3",
              data: {
                turbo_frame: :client_results,
                search_target: "form"
              }
            } do |form| %>
            <div class="col-md-12">
                <%= form.search_field :name_or_company_name_or_email_cont,
                    placeholder: t('clients.index.search_placeholder'),
                    class: "form-control",
                    data: {
                      search_target: "input",
                      action: "input->search#search"
                    } %>
            </div>
        <% end %>
    </div>
</div>
<% end %>

<%= turbo_frame_tag :client_results do %>
    <% if @clients.any? %>
        <div class="row g-4">
            <% @clients.each do |client| %>
                <%= render Cards::ClientCardComponent.new(client: client) %>
            <% end %>
        </div>
    <% elsif @q.present? %>
        <%= render Shared::EmptyStateComponent.new(
          title: t('clients.index.no_results.title'),
          description: t('clients.index.no_results.description'),
          action_text: t('clients.index.clear_search'),
          action_url: clients_path,
          action_variant: "secondary"
        ) %>
    <% else %>
        <%= render Shared::EmptyStateComponent.new(
          title: t('clients.index.empty_state.title'),
          description: t('clients.index.empty_state.description'),
          action_text: t('clients.index.empty_state.add_first'),
          action_url: new_client_path
        ) %>
    <% end %>
<% end %>
