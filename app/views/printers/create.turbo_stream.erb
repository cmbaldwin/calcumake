<%# Success response for printer creation from modal %>
<%# Update the printer select dropdown with new printer %>
<%= turbo_stream.update "printer_select_frame" do %>
  <label for="print_pricing_printer_id" class="form-label"><%= t('print_pricing.fields.select_printer') %></label>
  <select name="print_pricing[printer_id]" id="print_pricing_printer_id" class="form-select">
    <option value=""><%= t('print_pricing.fields.select_printer_prompt') %></option>
    <% current_user.printers.order(:name).each do |printer| %>
      <option value="<%= printer.id %>" <%= 'selected' if printer.id == @printer.id %>><%= printer.name %></option>
    <% end %>
  </select>
<% end %>

<%# Clear modal content %>
<%= turbo_stream.update "modal_content", "" %>

<%# Close modal %>
<%= turbo_stream.append "modal" do %>
  <template>
    <script>
      const modalElement = document.getElementById('modal');
      const modalInstance = bootstrap.Modal.getInstance(modalElement);
      if (modalInstance) {
        modalInstance.hide();
      }
    </script>
  </template>
<% end %>

<%# Show success notification %>
<%= turbo_stream.prepend "flash" do %>
  <%= render "layouts/flash_message", type: :notice, message: flash.now[:notice] %>
<% end %>
