<% content_for :title, "#{@invoice.invoice_number} - #{@print_pricing.job_name}" %>

<div data-controller="pdf-generator" data-pdf-generator-filename-value="<%= @invoice.invoice_number %>">
    <!-- Action Buttons -->
    <%= render "invoices/partials/header/show", invoice: @invoice, print_pricing: @print_pricing %>

    <!-- Invoice Content (for PDF generation and printing) -->
    <div class="invoice-content bg-white p-4 shadow-sm">
        <!-- Invoice Header -->
        <%= render "invoices/partials/header/main", invoice: @invoice, user: current_user %>

        <!-- Customer Information -->
        <%= render "invoices/partials/form/customer", customer_name: @print_pricing.job_name, client: @invoice.client %>

        <!-- Line Items Table -->
        <%= render "invoices/partials/line_items/table", invoice: @invoice %>

        <!-- Payment Details and Notes -->
        <%= render "invoices/partials/display/payment_notes", invoice: @invoice %>

        <!-- CalcuMake Branding (Free Plan Only) -->
        <% if current_user.plan == 'free' %>
          <div class="text-center mt-4 pt-3 border-top" style="opacity: 0.7;">
            <div class="d-flex align-items-center justify-content-center gap-2">
              <%= image_tag 'calcumake.png', alt: 'CalcuMake', style: 'height: 24px; width: 24px;' %>
              <small class="text-muted">
                <%= t('invoices.made_with_calcumake') %> â€¢
                <a href="https://calcumake.com" target="_blank" class="text-decoration-none">calcumake.com</a>
              </small>
            </div>
          </div>
        <% end %>
    </div>
</div>
