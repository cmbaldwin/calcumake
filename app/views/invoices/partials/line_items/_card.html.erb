<div class="card">
  <div class="card-header">
    <h5 class="mb-0"><%= t("invoices.line_items.title") %></h5>
  </div>
  <div class="card-body">
    <div id="invoice-line-items" data-invoice-form-target="lineItems">
      <%= form.fields_for :invoice_line_items do |line_item_form| %>
        <%= render "invoice_line_item_fields", f: line_item_form, currency: currency %>
      <% end %>
    </div>
    
    <div class="mt-3 d-flex flex-wrap gap-2 align-items-center">
      <button type="button" class="btn btn-outline-primary" data-action="click->invoice-form#addLineItem">
        <i class="bi bi-plus-circle"></i> <%= t("invoices.line_items.add_line_item") %>
      </button>

      <div class="ms-auto d-flex gap-2">
        <button type="button" class="btn btn-sm btn-outline-secondary" data-action="click->invoice-form#roundAllDown" title="<%= t('invoices.line_items.round_all_down_help') %>">
          <i class="bi bi-arrow-down-circle"></i> <%= t("invoices.line_items.round_all_down") %>
        </button>
        <button type="button" class="btn btn-sm btn-outline-secondary" data-action="click->invoice-form#roundAllUp" title="<%= t('invoices.line_items.round_all_up_help') %>">
          <i class="bi bi-arrow-up-circle"></i> <%= t("invoices.line_items.round_all_up") %>
        </button>
      </div>
    </div>

    <%= render Invoices::LineItemsTotalsComponent.new(
      invoice: invoice,
      currency: currency
    ) %>
  </div>
</div>
