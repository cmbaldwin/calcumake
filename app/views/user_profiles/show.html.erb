<div class="calculator-header">
  <h1>
    <%= t('profile.show.title') %>
  </h1>
  <p>
    <%= t('profile.show.subtitle') %>
  </p>
</div>

<% if notice %>
  <div class="profile-success-alert">
    <%= notice %>
  </div>
<% end %>

<div class="form-section">
  <h3>
    <%= t('profile.show.account_info') %>
  </h3>
  <div class="row">
    <div class="column column-50">
      <strong><%= t('profile.show.email') %>:</strong><br>
      <%= @user.email %>
    </div>
    <div class="column column-50">
      <strong><%= t('profile.show.member_since') %>:</strong><br>
      <%= @user.created_at.strftime(t('time.formats.month_day_year')) %>
    </div>
  </div>
</div>

<%= form_with model: @user, url: user_profile_path, method: :patch, local: true, html: { class: "calculator-form" } do |form| %>
  <div class="form-section highlight">
    <h3>
      <%= t('profile.show.default_preferences') %>
    </h3>
    <% if @user.errors.any? %>
      <div class="validation-errors">
        <strong><%= pluralize(@user.errors.count, "error") %> prohibited this profile from being saved:</strong>
        <ul>
          <% @user.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
    <div class="row">
      <div class="column column-50">
        <label for="user_default_currency" class="form-label">Default Currency</label>
        <%= form.select :default_currency, 
            options_for_select(currency_options, @user.default_currency), 
            { prompt: "Select currency" },
            { class: "form-input" } %>
        <small style="color: #666; font-size: 0.85rem; margin-top: 0.25rem; display: block;">
          Used as default for new pricing calculations
        </small>
      </div>
      <div class="column column-50">
        <label for="user_default_energy_cost_per_kwh" class="form-label">Energy Cost per kWh</label>
        <%= form.number_field :default_energy_cost_per_kwh, step: 0.001, min: 0.001,
            placeholder: "0.120",
            class: "form-input text-right" %>
        <small style="color: #666; font-size: 0.85rem; margin-top: 0.25rem; display: block;">
          Your local electricity cost per kilowatt-hour
        </small>
      </div>
    </div>
    <div style="text-align: center; margin-top: 1.5rem;">
      <%= form.submit "Update Settings", 
          style: "background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); 
                 color: white; border: none; padding: 0.75rem 1.5rem; font-size: 1rem; 
                 border-radius: 8px; cursor: pointer; font-weight: 600;" %>
    </div>
  </div>
<% end %>

<div class="form-actions" style="text-align: center; margin-top: 2rem;">
  <%= link_to "Back to Calculations", root_path, 
      class: "btn button-clear",
      style: "background: transparent; color: #666; border: 2px solid #ddd; 
             padding: 1rem 2rem; font-size: 1.1rem; text-decoration: none; 
             border-radius: 8px; transition: all 0.2s ease;" %>
</div>
