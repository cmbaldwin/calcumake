// rails_admin@3.3.0 downloaded from https://ga.jspm.io/npm:rails_admin@3.3.0/src/rails_admin/base.js

import e from"@rails/ujs";import"@hotwired/turbo-rails";import t from"jquery";import*as i from"bootstrap";import"jquery-ui/ui/version.js";import"jquery-ui/ui/keycode.js";import"jquery-ui/ui/position.js";import"jquery-ui/ui/safe-active-element.js";import"jquery-ui/ui/data.js";import"jquery-ui/ui/ie.js";import"jquery-ui/ui/scroll-parent.js";import"jquery-ui/ui/unique-id.js";import"jquery-ui/ui/widget.js";import"jquery-ui/ui/widgets/menu.js";import"jquery-ui/ui/widgets/mouse.js";import n from"flatpickr";import"jquery-ui/ui/widgets/autocomplete.js";import"jquery-ui/ui/effect.js";import"jquery-ui/ui/widgets/sortable.js";window.$=window.jQuery=t;(function(e){window.NestedFormEvents=function(){this.addFields=e.proxy(this.addFields,this);this.removeFields=e.proxy(this.removeFields,this)};NestedFormEvents.prototype={addFields:function(t){var i=t.currentTarget;var n=e(i).data("association");var a=e("#"+e(i).data("blueprint-id"));var l=a.data("blueprint");var s=(e(i).closest(".fields").closestChild("input, textarea, select").eq(0).attr("name")||"").replace(/\[[a-z_]+\]$/,"");var o=l.match(new RegExp("\\[([a-z_]+)\\]\\[new_"+n+"\\]"));o&&(s=s.replace(new RegExp("\\["+o[1]+"\\]\\[(new_)?\\d+\\]$"),""));if(s){var r=s.match(/[a-z_]+_attributes(?=\]\[(new_)?\d+\])/g)||[];var d=s.match(/[0-9]+/g)||[];for(var c=0;c<r.length;c++)if(d[c]){l=l.replace(new RegExp("(_"+r[c]+")_.+?_","g"),"$1_"+d[c]+"_");l=l.replace(new RegExp("(\\["+r[c]+"\\])\\[.+?\\]","g"),"$1["+d[c]+"]")}}var u=new RegExp("new_"+n,"g");var p=this.newId();l=e.trim(l.replace(u,p));var h=this.insertFields(l,n,i);h.trigger({type:"nested:fieldAdded",field:h}).trigger({type:"nested:fieldAdded:"+n,field:h});return false},newId:function(){return(new Date).getTime()},insertFields:function(t,i,n){var a=e(n).data("target");return a?e(t).appendTo(e(a)):e(t).insertBefore(n)},removeFields:function(t){var i=e(t.currentTarget),n=i.data("association");var a=i.prev("input[type=hidden]");a.val("1");var l=i.closest(".fields");l.hide();l.trigger({type:"nested:fieldRemoved",field:l}).trigger({type:"nested:fieldRemoved:"+n,field:l});return false}};window.nestedFormEvents=new NestedFormEvents;e(document).delegate("form a.add_nested_fields","click",nestedFormEvents.addFields).delegate("form a.remove_nested_fields","click",nestedFormEvents.removeFields)})(t);(function(e){e.fn.closestChild=function(t){if(t&&t!=""){var i=[];i.push(this);while(i.length>0){var n=i.shift();var a=n.children();for(var l=0;l<a.length;++l){var s=e(a[l]);if(s.is(t))return s;i.push(s)}}}return e()}})(t);(function(e){e.widget("ra.abstractSelect",{options:{createQuery:function(t){if(e.isEmptyObject(this.scopeBy))return{query:t};{const n={};for(var i in this.scopeBy){const t=this.scopeBy[i];const a=e(`[name$="[${i}]"]`).val();n[t]||(n[t]=[]);n[t].push(a?{o:"is",v:a}:{o:"_blank"})}return{query:t,f:n}}},scopeBy:{}}})})(t);var a={locale:null,translations:null,init(e,t){this.locale=e;this.translations=t;typeof this.translations==="string"&&(this.translations=JSON.parse(this.translations))},t(e){var t;t=e.charAt(0).toUpperCase()+e.replace(/_/g," ").slice(1);return this.translations[e]||t}};(function(e){e.filters={append:function(t){var i=t.label;var l=t.name;var s=t.type;var o=t.value||"";var r=t.operator;var d=t.operators;var c=t.index;var u="f["+l+"]["+c+"][v]";var p="f["+l+"]["+c+"][o]";var h=null;var f=null;if(d.length>0){h=e('<select class="form-control form-select form-select-sm"></select>').prop("name",p);d.forEach((e=>{var i=this.build_operator(e,t);if(i){i.prop("value")===r&&i.prop("selected",true);h.append(i)}}));h.find("[data-additional-fieldset]").length>0&&h.addClass("switch-additional-fieldsets")}switch(s){case"boolean":h&&h.prop("name",u).find("option").each((function(){e(this).attr("value")===o&&e(this).attr("selected",true)}));break;case"date":case"datetime":case"timestamp":case"time":f=e.map([void 0,"-∞","∞"],(function(t,i){var n=i==0?!r||r=="default":r=="between";return e('<span class="additional-fieldset"></span>').addClass(i==0?"default":"between").css("display",n?"inline-block":"none").html(e('<input class="input-sm form-control form-control-sm" type="text" />').addClass(s=="date"?"date":"datetime").prop("name",u+"[]").prop("value",o[i]||"").prop("size",s=="date"||s=="time"?20:25).prop("placeholder",t))}));break;case"enum":if(h){var m=o instanceof Array;h=h.prop("name",m?u+"[]":u).prop("multiple",m).add(e('<a href="#" class="switch-select"></a>').append(e("<i></i>").addClass("fas fa-"+(m?"minus":"plus"))));h.find("option").each((function(){const t=e(this).attr("value");(m?o.includes(t):t===o)&&e(this).attr("selected",true)}));m&&h.find("option[value^=_],option[disabled]").hide()}break;case"citext":case"string":case"text":case"belongs_to_association":case"has_one_association":f=e('<input class="additional-fieldset form-control form-control-sm" type="text" />').css("display",r=="_present"||r=="_blank"?"none":"inline-block").prop("name",u).prop("value",o);break;case"integer":case"decimal":case"float":f=e('<input class="additional-fieldset default form-control form-control-sm" type="text" />').css("display",r&&r!="default"?"none":"inline-block").prop("type",s).prop("name",u+"[]").prop("value",o[0]||"").add(e('<input placeholder="-∞" class="additional-fieldset between form-control form-control-sm" />').css("display",r=="between"?"inline-block":"none").prop("type",s).prop("name",u+"[]").prop("value",o[1]||"")).add(e('<input placeholder="∞" class="additional-fieldset between form-control form-control-sm" />').css("display",r=="between"?"inline-block":"none").prop("type",s).prop("name",u+"[]").prop("value",o[2]||""));break;default:h=e('<input type="text" class="form-control form-control-sm" />').prop("name",u).prop("value",o);break}var v=l+"-"+c+"-filter-container";e("#"+v).remove();var g=e("<div>").attr("id",v).addClass("filter d-inline-block my-1").append(e('<button type="button" class="btn btn-info btn-sm delete"></button>').append('<i class="fas fa-trash"></i>').append(document.createTextNode(i))).append("&nbsp;").append(h).append("&nbsp;").append(f);e("#filters_box").append(g);g.find(".date, .datetime").each((function(){n(this,e.extend({dateFormat:"Y-m-dTH:i:S",altInput:true,locale:a.locale},t.datetimepicker_options))}));e("hr.filters_box:hidden").show("slow")},build_operator:function(t,i){if(t instanceof Object){var n=e("<option></option>");n.text(t.label);delete t.label;for(const e in t)n.attr(e,t[e]);return n}switch(t){case"_discard":return e('<option value="_discard">...</option>');case"_separator":return e('<option disabled="disabled">---------</option>');case"_present":return e('<option value="_present"></option>').text(a.t("is_present"));case"_blank":return e('<option value="_blank"></option>').text(a.t("is_blank"));case"_not_null":return e('<option value="_not_null"></option>').text(a.t("is_present"));case"_null":return e('<option value="_null"></option>').text(a.t("is_blank"));case"true":return e('<option value="true"></option>').text(a.t("true"));case"false":return e('<option value="false"></option>').text(a.t("false"));case"today":return e('<option value="today"></option>').text(a.t("today"));case"yesterday":return e('<option value="yesterday"></option>').text(a.t("yesterday"));case"this_week":return e('<option value="this_week"></option>').text(a.t("this_week"));case"last_week":return e('<option value="last_week"></option>').text(a.t("last_week"));case"like":return e('<option data-additional-fieldset="additional-fieldset" value="like"></option>').text(a.t("contains"));case"not_like":return e('<option data-additional-fieldset="additional-fieldset" value="not_like"></option>').text(a.t("does_not_contain"));case"is":return e('<option data-additional-fieldset="additional-fieldset" value="is"></option>').text(a.t("is_exactly"));case"starts_with":return e('<option data-additional-fieldset="additional-fieldset" value="starts_with"></option>').text(a.t("starts_with"));case"ends_with":return e('<option data-additional-fieldset="additional-fieldset" value="ends_with"></option>').text(a.t("ends_with"));case"default":var l;switch(i.type){case"date":case"datetime":case"timestamp":l=a.t("date");break;case"time":l=a.t("time");break;case"integer":case"decimal":case"float":l=a.t("number");break}return e('<option data-additional-fieldset="default" value="default"></option>').text(l);case"between":return e('<option data-additional-fieldset="between" value="between"></option>').text(a.t("between_and_"));default:return null}}};e(document).on("click","#filters a",(function(t){t.preventDefault();e.filters.append(e.extend({index:e.now().toString().slice(6,11)},e(this).data("options")))}));e(document).on("click","#filters_box .delete",(function(t){t.preventDefault();e(this).parents("form");e(this).parents(".filter").remove();!e("#filters_box").children().length&&e("hr.filters_box:visible").hide("slow")}));e(document).on("click","#filters_box .switch-select",(function(t){t.preventDefault();var i=e(this).siblings("select");i.attr("multiple",!i.attr("multiple"));i.attr("name",i.attr("multiple")?i.attr("name")+"[]":i.attr("name").replace(/\[\]$/,""));i.find("option[value^=_],option[disabled]").toggle();e(this).find("i").toggleClass("fa-plus fa-minus")}));e(document).on("change","#filters_box .switch-additional-fieldsets",(function(t){var i=e(this).find("option:selected");var n=e(i).data("additional-fieldset");if(n){e(this).siblings(".additional-fieldset:not(."+n+")").hide("slow");e(this).siblings("."+n).show("slow")}else e(this).siblings(".additional-fieldset").hide("slow")}))})(t);(function(e){e.widget("ra.filteringMultiselect",e.ra.abstractSelect,{_cache:{},options:{sortable:false,removable:true,regional:{add:"Add",chooseAll:"Choose all",clearAll:"Clear all",down:"Down",remove:"Remove",search:"Search",up:"Up"},searchDelay:400,remote_source:null,xhr:false},wrapper:null,filter:null,collection:null,addAll:null,add:null,remove:null,up:null,down:null,selection:null,removeAll:null,_create:function(){this._cache={};this._build();this._buildCache();this._bindEvents()},_build:function(){var t;this.wrapper=this.element.siblings('.ra-multiselect[data-input-for="'+this.element.attr("id")+'"]');if(this.wrapper.length>0){this.filter=this.wrapper.find("input.ra-multiselect-search");this.collection=this.wrapper.find("select.ra-multiselect-collection");this.addAll=this.wrapper.find("a.ra-multiselect-item-add-all");this.add=this.wrapper.find("a.ra-multiselect-item-add");this.remove=this.wrapper.find("a.ra-multiselect-item-remove");this.up=this.wrapper.find("a.ra-multiselect-item-up");this.down=this.wrapper.find("a.ra-multiselect-item-down");this.selection=this.wrapper.find("select.ra-multiselect-selection");this.removeAll=this.wrapper.find("a.ra-multiselect-item-remove-all")}else{this.wrapper=e('<div class="ra-multiselect">').attr("data-input-for",this.element.attr("id"));this.wrapper.insertAfter(this.element);var i=e('<div class="ra-multiselect-header">');this.filter=e('<input type="search" placeholder="'+this.options.regional.search+'" class="form-control ra-multiselect-search"/>');i.append(this.filter);this.wrapper.append(i);var n={left:e('<div class="ra-multiselect-column ra-multiselect-left">'),center:e('<div class="ra-multiselect-column ra-multiselect-center">'),right:e('<div class="ra-multiselect-column ra-multiselect-right">')};for(t in n)n.hasOwnProperty(t)&&this.wrapper.append(n[t]);this.collection=e('<select multiple="multiple"></select>');this.collection.addClass("form-control ra-multiselect-collection");this.addAll=e('<a href="#" class="ra-multiselect-item-add-all"><span class="fas fa-chevron-circle-right"></span>'+this.options.regional.chooseAll+"</a>");n.left.html(this.collection).append(this.addAll);this.collection.wrap('<div class="wrapper"/>');this.add=e('<a href="#" class="fas fa-chevron-circle-right ra-multiselect-item-add"></a>').attr("title",this.options.regional.add);n.center.append(this.add);if(this.options.removable){this.remove=e('<a href="#" class="fas fa-chevron-circle-left ra-multiselect-item-remove"></a>').attr("title",this.options.regional.remove);n.center.append(this.remove)}if(this.options.sortable){this.up=e('<a href="#" class="fas fa-chevron-circle-up ra-multiselect-item-up"></a>').attr("title",this.options.regional.up);this.down=e('<a href="#" class="fas fa-chevron-circle-down ra-multiselect-item-down"></a>').attr("title",this.options.regional.down);n.center.append(this.up).append(this.down)}this.selection=e('<select class="form-control ra-multiselect-selection" multiple="multiple"></select>');n.right.append(this.selection);if(this.options.removable){this.removeAll=e('<a href="#" class="ra-multiselect-item-remove-all"><span class="fas fa-chevron-circle-left"></span>'+this.options.regional.clearAll+"</a>");n.right.append(this.removeAll)}this.selection.wrap('<div class="wrapper"/>');this.element.css({display:"none"});this.tooManyObjectsPlaceholder=e('<option disabled="disabled" />').text(a.t("too_many_objects"));this.noObjectsPlaceholder=e('<option disabled="disabled" />').text(a.t("no_objects"));this.options.xhr&&this.collection.append(this.tooManyObjectsPlaceholder)}},_bindEvents:function(){var t=this;this.addAll.click((function(i){t._select(e("option:not(:disabled)",t.collection));i.preventDefault();t.selection.trigger("change")}));this.add.click((function(i){t._select(e(":selected",t.collection));i.preventDefault();t.selection.trigger("change")}));if(this.options.removable){this.removeAll.click((function(i){t._deSelect(e("option",t.selection));i.preventDefault();t.selection.trigger("change")}));this.remove.click((function(i){t._deSelect(e(":selected",t.selection));i.preventDefault();t.selection.trigger("change")}))}var i=null;if(this.options.sortable){this.up.click((function(i){t._move("up",e(":selected",t.selection));i.preventDefault()}));this.down.click((function(i){t._move("down",e(":selected",t.selection));i.preventDefault()}))}this.filter.bind("keyup click",(function(e){i&&clearTimeout(i);i=setTimeout((function(){t._queryFilter(t.filter.val())}),t.options.searchDelay)}))},_queryFilter:function(t){var i=this;i._query(t,(function(t){var n=[];var a;for(a=0;a<t.length;a++)i.selected(t[a].id)||n.push(a);if(n.length>0){i.collection.html("");for(a=0;a<n.length;a++){var l=e("<option></option>").prop("value",t[n[a]].id).prop("title",t[n[a]].label).text(t[n[a]].label);i.collection.append(l)}}else i.collection.html(i.noObjectsPlaceholder)}))},_buildCache:function(t){var i=this;this.element.find("option").each((function(t,n){i._cache["o_"+n.value]={id:n.value,value:e(n).text()};n.selected?e(n).clone().appendTo(i.selection).prop("selected",false).prop("title",e(n).text()):e(n).clone().appendTo(i.collection).prop("selected",false).prop("title",e(n).text())}))},_deSelect:function(t){var i=this;t.each((function(e,t){i.element.find('option[value="'+t.value+'"]').prop("selected",false)}));e(t).appendTo(this.collection).prop("selected",false)},_query:function(t,i){var n,a=[];if(t==="")if(this.options.xhr)this.collection.html(this.tooManyObjectsPlaceholder);else{for(n in this._cache)if(this._cache.hasOwnProperty(n)){var l=this._cache[n];a.push({id:l.id,label:l.value})}i.apply(this,[a])}else if(this.options.xhr)e.ajax({beforeSend:function(e){e.setRequestHeader("Accept","application/json")},url:this.options.remote_source,data:this.options.createQuery(t),success:i});else{t=new RegExp(t+".*","i");for(n in this._cache)if(this._cache.hasOwnProperty(n)&&t.test(this._cache[n].value)){l=this._cache[n];a.push({id:l.id,label:l.value})}i.apply(this,[a])}},_select:function(t){var i=this;t.each((function(t,n){var a=i.element.find('option[value="'+n.value+'"]');a.length?a.prop("selected",true):i.element.append(e("<option></option>").prop("value",n.value).prop("selected",true))}));e(t).appendTo(this.selection).prop("selected",false)},_move:function(t,i){var n=this;if(t=="up")i.each((function(t,i){var a=e(i).prev();if(a.length>0){var l=n.element.find('option[value="'+i.value+'"]');var s=n.element.find('option[value="'+a[0].value+'"]');s.before(l);a.before(e(i))}}));else{e.fn.reverse=[].reverse;i.reverse().each((function(t,i){var a=e(i).next();if(a.length>0){var l=n.element.find('option[value="'+i.value+'"]');var s=n.element.find('option[value="'+a[0].value+'"]');s.after(l);a.after(e(i))}}))}},selected:function(e){if(this.selection[0].querySelectorAll('option[value="'+e+'"]')[0])return true},destroy:function(){this.wrapper.remove();this.element.css({display:"inline"});e.Widget.prototype.destroy.apply(this,arguments)}})})(t);(function(e){e.widget("ra.filteringSelect",e.ra.abstractSelect,{options:{minLength:0,searchDelay:200,remote_source:null,source:null,xhr:false},button:null,input:null,select:null,filtering_select:null,_create:function(){this.filtering_select=this.element.siblings('[data-input-for="'+this.element.attr("id")+'"]');if(this.filtering_select.length>0){this.input=this.filtering_select.children("input");this.button=this.filtering_select.children(".input-group-btn")}else{this.element.hide();this.filtering_select=this._inputGroup(this.element.attr("id"));this.input=this._inputField();this.button=this._buttonField()}this.clearOption=e('<span style="color: #888"></span>').append('<i class="fas fa-times"></i> '+e("<span></span>").text(a.t("clear")).html());this.noObjectsPlaceholder=e('<option disabled="disabled" />').text(a.t("no_objects"));this._setOptionsSource();this._initAutocomplete();this._initKeyEvent();this._overloadRenderItem();this._autocompleteDropdownEvent(this.button);return this.filtering_select.append(this.input).append(this.button).insertAfter(this.element)},_getResultSet:function(t,i,n){var a=new RegExp(e.ui.autocomplete.escapeRegex(t.term),"i");var spannedContent=function(t){return e("<span>").text(t).html()};var highlighter=function(t,i){return i.length?e.map(t.split(i),(function(e){return spannedContent(e)})).join(e("<strong>").text(i)[0].outerHTML):spannedContent(t)};var l=e.map(i,(function(e){var i=e.id||e.value;var l=e.label||e.id;if(i&&(n||a.test(e.label)))return{html:highlighter(l,t.term),value:l,id:i}}));return t.term.length!==0||this.input.attr("required")?l.length===0?[{html:this.noObjectsPlaceholder,value:null,id:null}]:l:[{html:this.clearOption,value:null,id:null}].concat(l)},_getSourceFunction:function(t){var i=this;var n=0;return e.isArray(t)?function(e,n){n(i._getResultSet(e,t,false))}:typeof t==="string"?function(a,l){this.xhr&&this.xhr.abort();this.xhr=e.ajax({url:t,data:i.options.createQuery(a.term),dataType:"json",autocompleteRequest:++n,success:function(e,t){this.autocompleteRequest===n&&l(i._getResultSet(a,e,true))},error:function(){this.autocompleteRequest===n&&l([])}})}:t},_setOptionsSource:function(){this.options.xhr?this.options.source=this.options.remote_source:this.options.source=this.element.children("option").map((function(){return{label:e(this).text(),value:this.value}})).toArray()},_buttonField:function(){return e('<span class="input-group-btn"><label class="btn btn-info dropdown-toggle" title="Show All Items" role="button"></label></span>')},_autocompleteDropdownEvent:function(e){var t=this;return e.click((function(){if(t.input.autocomplete("widget").is(":visible"))t.input.autocomplete("close");else{t.input.autocomplete("search","");t.input.focus()}}))},_inputField:function(){var t;var i=this.element.children(":selected");var n=i.val()?i.text():"";t=e('<input type="text">').val(n).addClass("form-control ra-filtering-select-input").attr("style",this.element.attr("style")).show();this.element.attr("placeholder")&&t.attr("placeholder",this.element.attr("placeholder"));if(this.element.attr("required")){t.attr("required",this.element.attr("required"));this.element.attr("required",false)}return t},_inputGroup:function(t){return e("<div>").addClass("input-group filtering-select").attr("data-input-for",t)},_initAutocomplete:function(){var t=this;return this.input.autocomplete({delay:this.options.searchDelay,minLength:this.options.minLength,source:this._getSourceFunction(this.options.source),select:function(i,n){var a=t.element.find(`option[value="${CSS.escape(n.item.id)}"]`);t.element.find("option[selected]").attr("selected",false);if(a.length>0)a.attr("selected","selected");else{a=e("<option>").attr("value",n.item.id).attr("selected",true).text(n.item.value);t.element.append(a)}t.element.trigger("change",n.item.id);t._trigger("selected",i,{item:a});e(t.element.parents(".controls")[0]).find(".update").removeClass("disabled")},change:function(i,n){if(!n.item){var a=new RegExp("^"+e.ui.autocomplete.escapeRegex(e(this).val())+"$","i");var l=false;t.element.children("option").each((function(){if(e(this).text().match(a)){l=true;return false}}));if(!l&&e(this).val()===""){e(this).val(null);t.element.html(e('<option value="" selected="selected"></option>'));t.input.data("ui-autocomplete").term="";e(t.element.parents(".controls")[0]).find(".update").addClass("disabled");return false}}}})},_initKeyEvent:function(){var t=this;return this.input.keyup((function(){if(!e(this).val().length)return t.element.html(e('<option value="" selected="selected"></option>')).trigger("change")}))},_overloadRenderItem:function(){this.input.data("ui-autocomplete")._renderItem=function(t,i){return e("<li></li>").data("ui-autocomplete-item",i).append(e("<a></a>").html(i.html||i.id)).appendTo(t)}},destroy:function(){this.input.remove();this.button.remove();this.element.html(e('<option value="" selected="selected"></option>'));this.element.show();this.filtering_select.remove();e.Widget.prototype.destroy.call(this)}})})(t);(function(e){e(document).ready((function(){return window.nestedFormEvents.insertFields=function(t,i,n){var a;a=e(n).closest(".controls").siblings(".tab-content");a.append(t);return a.children().last()}}));e(document).on("nested:fieldAdded","form",(function(t){var n,a,l,s,o,r,d;a=t.field.addClass("tab-pane").attr("id","unique-id-"+(new Date).getTime());s=e("<li></li>").append(e("<a></a>").addClass("nav-link").attr("data-bs-toggle","tab").attr("href","#"+a.attr("id")).text(a.children(".object-infos").data("object-label"))).addClass("nav-item");r=a.closest(".control-group");n=r.children(".controls");o=n.data("nestedone")!==void 0;l=n.children(".nav");t=r.children(".tab-content");d=n.find(".toggler");l.append(s);const c=new CustomEvent("rails_admin.dom_ready",{detail:a});document.dispatchEvent(c);s.children("a").each((function(e,t){i.Tab.getOrCreateInstance(t).show()}));o||new i.Collapse(l[0],{toggle:false}).show();new i.Collapse(t[0],{toggle:false}).show();d.addClass("active").removeClass("disabled").children("i").addClass("fa-chevron-down").removeClass("fa-chevron-right");o&&n.find(".add_nested_fields").removeClass("add_nested_fields").text(a.children(".object-infos").data("object-label"))}));e(document).on("nested:fieldRemoved","form",(function(t){var n,a,l,s,o,r,d,c;s=t.field;o=s.closest(".control-group").children(".controls").children(".nav");l=o.children("li").has('a[href="#'+s.attr("id")+'"]');d=s.closest(".control-group");a=d.children(".controls");r=a.data("nestedone")!==void 0;c=a.find(".toggler");(l.next().length?l.next():l.prev()).children("a:first").each((function(e,t){i.Tab.getOrCreateInstance(t).show()}));l.remove();if(o.children().length===0){new i.Collapse(a.siblings(".tab-content")[0],{toggle:false}).hide();c.removeClass("active").addClass("disabled").children("i").removeClass("fa-chevron-down").addClass("fa-chevron-right")}if(r){n=c.next();n.addClass("add_nested_fields").html(n.data("add-label"))}s.find("[required]").each((function(){e(this).prop("required",false)}))}))})(t);(function(t){t.widget("ra.remoteForm",{_create:function(){var e=this;var i=e.element;var n=i.find("select").first().data("options")&&i.find("select").first().data("options")["edit-url"];typeof n!="undefined"&&n.length&&i.on("dblclick",".ra-multiselect option:not(:disabled)",(function(t){e._bindModalOpening(t,n.replace("__ID__",this.value))}));i.find(".create").unbind().bind("click",(function(i){e._bindModalOpening(i,t(this).data("link"))}));i.find(".update").unbind().bind("click",(function(n){var a=i.find("select").val();a?e._bindModalOpening(n,t(this).data("link").replace("__ID__",a)):n.preventDefault()}))},_bindModalOpening:function(e,i){e.preventDefault();var n=this;if(t("#modal").length)return false;var a=this._getModal();setTimeout((function(){t.ajax({url:i,beforeSend:function(e){e.setRequestHeader("Accept","text/javascript")},success:function(e,t,i){a.find(".modal-body").html(e);n._bindFormEvents()},error:function(e,t,i){a.find(".modal-body").html(e.responseText)},dataType:"text"})}),200)},_bindFormEvents:function(){var n=this,a=this._getModal(),l=a.find("form"),s=a.find(":submit[name=_save]").html(),o=a.find(":submit[name=_continue]").html();a.find(".form-actions").remove();l.attr("data-remote",true).attr("data-type","json");a.find(".modal-header-title").text(l.data("title"));a.find(".cancel-action").unbind().click((function(){a.each((function(e,t){i.Modal.getInstance(t).hide()}));return false})).html(o);a.find(".save-action").unbind().click((function(){e.fire(l[0],"submit");return false})).html(s);const r=new CustomEvent("rails_admin.dom_ready",{detail:l});document.dispatchEvent(r);l.bind("ajax:complete",(function(e){var l=e.detail[0];if(l.status==200){var s=t.parseJSON(l.responseText);var o='<option value="'+s.id+'" selected>'+s.label+"</option>";var r=n.element.find("select").filter(":hidden");if(n.element.find(".filtering-select").length){var d=n.element.find(".filtering-select").children(".ra-filtering-select-input");d.val(s.label);if(!r.find("option[value="+s.id+"]").length){r.html(o).val(s.id);n.element.find(".update").removeClass("disabled")}}else{var c=n.element.find(".ra-multiselect");if(c.find("option[value="+s.id+"]").length){r.find("option[value="+s.id+"]").text(s.label);c.find("option[value= "+s.id+"]").text(s.label)}else{r.append(o);c.find("select.ra-multiselect-selection").append(o)}}n._trigger("success");a.each((function(e,t){i.Modal.getInstance(t).hide()}))}else{a.find(".modal-body").html(l.responseText);n._bindFormEvents()}}))},_getModal:function(){var e=this;if(!e.dialog){e.dialog=t('<div id="modal" class="modal fade">            <div class="modal-dialog modal-lg">            <div class="modal-content">            <div class="modal-header">              <h3 class="modal-header-title">...</h3>              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>            </div>            <div class="modal-body">              ...            </div>            <div class="modal-footer">              <a href="#" class="btn cancel-action">...</a>              <a href="#" class="btn btn-primary save-action">...</a>            </div>            </div>            </div>          </div>').on("hidden.bs.modal",(function(){e.dialog.remove();e.dialog=null}));new i.Modal(e.dialog[0],{keyboard:true,backdrop:true,focus:false,show:true}).show()}return this.dialog}})})(t);document.addEventListener("rails_admin.dom_ready",(()=>{const e=document.getElementById("sidescroll");e&&e.querySelectorAll("tr").forEach(((e,t)=>{let i;e.querySelectorAll("th.sticky, td.sticky").forEach(((e,t)=>{t===0&&(i=e.offsetLeft);e.style.left=e.offsetLeft-i+"px"}))}))}));(function(e){e(document).on("click","#list input.toggle",(function(){e("#list [name='bulk_ids[]']").prop("checked",e(this).is(":checked"))}));e(document).on("turbo:click",(function(){e("#loading").show()})).on("turbo:before-render",(function(t){document.querySelectorAll('.sidebar .btn-toggle[aria-expanded="false"]').forEach((e=>{const i=t.detail.newBody.querySelector(`.sidebar [data-bs-target="${e.dataset.bsTarget}"]`);const n=t.detail.newBody.querySelector(e.dataset.bsTarget);i&&i.parentNode.replaceChild(e.cloneNode(true),i);n&&n.classList.remove("show")}));e("#loading").hide()}));e(document).on("click","[data-bs-target]",(function(){if(!e(this).hasClass("disabled"))if(e(this).has("i.fa-chevron-down").length){e(this).removeClass("active").children("i").toggleClass("fa-chevron-down fa-chevron-right");e(e(this).data("target")).filter(":visible").hide("slow")}else if(e(this).has("i.fa-chevron-right").length){e(this).addClass("active").children("i").toggleClass("fa-chevron-down fa-chevron-right");e(e(this).data("target")).filter(":hidden").show("slow")}}));e(document).on("click","form legend",(function(){if(e(this).has("i.fa-chevron-down").length){e(this).siblings(".control-group:visible").hide("slow");e(this).children("i").toggleClass("fa-chevron-down fa-chevron-right")}else if(e(this).has("i.fa-chevron-right").length){e(this).siblings(".control-group:hidden").show("slow");e(this).children("i").toggleClass("fa-chevron-down fa-chevron-right")}}));e(document).on("click","form .tab-content .tab-pane a.remove_nested_one_fields",(function(){e(this).children('input[type="hidden"]').val(e(this).hasClass("active")).siblings("i").toggleClass("fa-check fa-trash")}));function triggerDomReady(){a.init(e("html").attr("lang"),e("#admin-js").data("i18nOptions"));const t=new CustomEvent("rails_admin.dom_ready");document.dispatchEvent(t)}e(document).ready(triggerDomReady);document.addEventListener("turbo:render",triggerDomReady);document.addEventListener("rails_admin.dom_ready",(function(t){e(".nav.nav-pills li.active").removeClass("active");e('.nav.nav-pills li[data-model="'+e(".page-header").data("model")+'"]').addClass("active");e(".animate-width-to").each((function(){var t,i;t=e(this).data("animate-length");i=e(this).data("animate-width-to");e(this).animate({width:i},t,"easeOutQuad")}));e("form.main legend").has("i.fa-chevron-right").each((function(){e(this).siblings(".control-group").hide()}));e('button[name][type="submit"]').on("click",(function(){var t=e(this).closest("form");t.append(e("<input />").attr("type","hidden").attr("name",e(this).attr("name")).attr("value",e(this).attr("value")));e(this).is("[formnovalidate]")&&t.attr("novalidate",true)}));e.each(e("#filters_box").data("options"),(function(){e.filters.append(this)}));e("a[data-method]").on("click",(function(e){window.Turbo.session.drive=false}));e(document).trigger("rails_admin.dom_ready",t.detail?[t.detail]:null)}));e(document).on("click",".bulk-link",(function(t){t.preventDefault();e("#bulk_action").val(e(this).data("action"));e("#bulk_form").submit()}));e(document).on("click","#remove_filter",(function(t){t.preventDefault();e("#filters_box").html("");e("hr.filters_box").hide();e(this).siblings("input[type='search']").val("");e(this).parents("form").submit()}));e(document).on("click","th.header",(function(t){t.preventDefault();window.Turbo.visit(e(this).data("href"))}));e(document).on("click","#fields_to_export label input#check_all",(function(){var t;t=e("#fields_to_export label input");e("#fields_to_export label input#check_all").is(":checked")?e(t).prop("checked",true):e(t).prop("checked",false)}));e(document).on("click","#fields_to_export .reverse-selection",(function(){e(this).closest(".control-group").find(".controls").find("input").click()}))})(t);(function(e){document.addEventListener("rails_admin.dom_ready",(function(t){var l,s,o,r,d,c,u,p,h;var f=t.detail||e("form");if(f.length){f.find("[data-datetimepicker]").each((function(){n(this,e.extend({dateFormat:"Y-m-dTH:i:S",altInput:true,locale:a.locale},e(this).data("options")))}));f.find("[data-enumeration]").each((function(){e(this).is("[multiple]")?e(this).filteringMultiselect(e(this).data("options")):e(this).filteringSelect(e(this).data("options"))}));f.find("[data-fileupload]").each((function(){var t;t=e(this).closest(".controls");t.find(".btn-remove-image").on("click",(function(){e(this).siblings("[type=checkbox]").click();t.find(".toggle").toggle("slow");e(this).toggleClass("btn-danger btn-info");return false}))}));f.find("[data-fileupload]").change((function(){var t,i,n,a;n=this;i=e("#"+n.id).parent().children(".preview");if(!i.length){i=e("#"+n.id).parent().prepend(e("<img />").addClass("preview").addClass("img-thumbnail")).find("img.preview");i.parent().find("img:not(.preview)").hide()}t=e("#"+n.id).val().split(".").pop().toLowerCase();if(n.files&&n.files[0]&&e.inArray(t,["gif","png","jpg","jpeg","bmp"])!==-1){a=new FileReader;a.onload=function(e){i.attr("src",e.target.result)};a.readAsDataURL(n.files[0]);i.show()}else i.hide()}));f.find("[data-multiple-fileupload]").each((function(){e(this).closest(".controls").find(".btn-remove-image").on("click",(function(){e(this).siblings("[type=checkbox]").click();e(this).parent(".toggle").toggle("slow");e(this).toggleClass("btn-danger btn-info");return false})).end().sortable({items:".sortables"})}));f.find("[data-multiple-fileupload]").change((function(){var t,i,n,a,l,s,o,r;l=this;e("#"+l.id).parent().children(".preview").remove();o=l.files;r=[];for(n=0,s=o.length;n<s;n++){i=o[n];t=i.name.split(".").pop().toLowerCase();if(e.inArray(t,["gif","png","jpg","jpeg","bmp"])!==-1){a=e("<img />").addClass("preview").addClass("img-thumbnail");r.push(function(t){var n;n=new FileReader;n.onload=function(e){t.attr("src",e.target.result)};n.readAsDataURL(i);return e("#"+l.id).parent().append(e("<div></div>").addClass("preview").append(t))}(a))}}return r}));f.find("[data-filteringmultiselect]").each((function(){e(this).filteringMultiselect(e(this).data("options"));e(this).parents("#modal").length?e(this).parent().siblings(".modal-actions").remove():e(this).parents(".control-group").first().remoteForm()}));f.find("[data-filteringselect]").each((function(){e(this).filteringSelect(e(this).data("options"));e(this).parents("#modal").length?e(this).parent().siblings(".modal-actions").remove():e(this).parents(".control-group").first().remoteForm()}));f.find("[data-nestedmany]").each((function(){var t,n,a,l;t=e(this).parents(".control-group").first();n=t.find("> .controls > .nav");a=t.find("> .tab-content");l=t.find("> .controls > .btn-group > .toggler");a.children(".fields:not(.tab-pane)").addClass("tab-pane").each((function(){e(this).attr("id","unique-id-"+(new Date).getTime()+Math.floor(Math.random()*1e5));n.append(e("<li></li>").append(e("<a></a>").addClass("nav-link").attr("data-bs-toggle","tab").attr("href","#"+this.id).text(e(this).children(".object-infos").data("object-label"))).addClass("nav-item"))}));n.find("> li.active").length===0&&n.find("> li > a[data-bs-toggle='tab']:first").each((function(e,t){i.Tab.getOrCreateInstance(t).show()}));if(n.children().length===0)l.addClass("disabled").removeClass("active").children("i").addClass("fa-chevron-right");else if(l.hasClass("active")){e(l.data("bs-target")).addClass("show");l.children("i").addClass("fa-chevron-down")}else l.children("i").addClass("fa-chevron-right")}));f.find("[data-nestedone]").each((function(){var t,n,a,l,s;t=e(this).parents(".control-group").first();a=t.find("> .controls > .nav");l=t.find("> .tab-content");s=t.find("> .controls > .btn-group > .toggler");l.children(".fields:not(.tab-pane)").addClass("tab-pane active").each((function(){t.find("> .controls .add_nested_fields").removeClass("add_nested_fields").text(e(this).children(".object-infos").data("object-label"));a.append(e("<li></li>").append(e("<a></a>").attr("data-bs-toggle","tab").attr("href","#"+e(this).id).text(e(this).children(".object-infos").data("object-label"))))}));n=a.find("> li > a[data-bs-toggle='tab']:first");n.each((function(e,t){i.Tab.getOrCreateInstance(t).show()}));t.find("> .controls > [data-target]:first").html('<i class="fas"></i> '+n.html());a.hide();if(a.children().length===0)s.addClass("disabled").removeClass("active").children("i").addClass("fa-chevron-right");else if(s.hasClass("active")){e(s.data("bs-target")).addClass("show");s.children("i").addClass("fa-chevron-down")}else s.children("i").addClass("fa-chevron-right")}));f.find("[data-polymorphic]").each((function(){var t,i,n;n=e(this);t=n.parents(".control-group").first();i=t.find("select").last();n.data("urls");n.on("change",(function(t){var a,l;l=n.val().toLowerCase().replace(/::/g,"-");a=e("#"+l+"-js-options").data("options");i.data("options",a);i.filteringSelect("destroy");i.filteringSelect(a)}))}));p=function(){return f.find("[data-richtext=simplemde]").not(".simplemded").each((function(t,i){var n,a;a=e(this).data("options");n=a.instance_config;new window.SimpleMDE(e.extend(true,{element:document.getElementById(this.id),autosave:{uniqueId:this.id}},n));e(this).addClass("simplemded")}))};l=f.find("[data-richtext=simplemde]").not(".simplemded");if(l.length)if(window.SimpleMDE)p();else{h=l.first().data("options");e("head").append('<link href="'+h.css_location+'" rel="stylesheet" media="all" type="text/css">');e.getScript(h.js_location,(function(e,t,i){return p()}))}d=function(){return f.find("[data-richtext=ckeditor]").not(".ckeditored").each((function(t,i){var n;try{(n=window.CKEDITOR.instances[this.id])&&n.destroy(true)}catch(e){}window.CKEDITOR.replace(this,e(this).data("options").options);e(this).addClass("ckeditored")}))};l=f.find("[data-richtext=ckeditor]").not(".ckeditored");if(l.length)if(window.CKEDITOR)d();else{h=l.first().data("options");window.CKEDITOR_BASEPATH=h.base_location;e.getScript(h.jspath,function(e){return function(e,t,i){return d()}}())}c=function(t){return function(t){return t.each((function(t,i){var n;h=e(this).data("options");n=this;e.getScript(h.locations.mode,(function(t,a,l){h=e(i).data("options");e("head").append('<link href="'+h.locations.theme+'" rel="stylesheet" media="all" type="text/css">');CodeMirror.fromTextArea(n,h.options);return e(n).addClass("codemirrored")}))}))}}();s=f.find("[data-richtext=codemirror]").not(".codemirrored");if(s.length){this.array=s;if(window.CodeMirror)c(this.array);else{h=e(s[0]).data("options");e("head").append('<link href="'+h.csspath+'" rel="stylesheet" media="all" type="text/css">');e.getScript(h.jspath,function(e){return function(t,i,n){return c(e.array)}}(this))}}r=function(t){return function(t,i){return t.each((function(){e(this).addClass("bootstrap-wysihtml5ed");e(this).closest(".controls").addClass("well");e(this).wysihtml5(i)}))}}();s=f.find("[data-richtext=bootstrap-wysihtml5]").not(".bootstrap-wysihtml5ed");if(s.length){this.array=s;h=e(s[0]).data("options");o=e.parseJSON(h.config_options);if(window.wysihtml5)r(this.array,o);else{e("head").append('<link href="'+h.csspath+'" rel="stylesheet" media="all" type="text/css">');e.getScript(h.jspath,function(e){return function(t,i,n){return r(e.array,o)}}(this))}}u=function(t){return function(t){return t.each((function(){var t;h=e(this).data("options");o=e.parseJSON(h.config_options);o?o.inlineMode||(o.inlineMode=false):o={inlineMode:false};t=o.imageUploadURL?o.imageUploadParams={authenticity_token:e("meta[name=csrf-token]").attr("content")}:void 0;e(this).addClass("froala-wysiwyged");e(this).froalaEditor(o);t&&e(this).on("froalaEditor.image.error",(function(e,t,i){alert("error uploading image: "+i.message)})).on("froalaEditor.image.removed",(function(t,i,n){i.options.imageDeleteParams={src:n.attr("src"),authenticity_token:e("meta[name=csrf-token]").attr("content")};i.deleteImage(n)})).on("editable.imageDeleteSuccess",(function(e,t,i){})).on("editable.imageDeleteError",(function(e,t,i){alert("error deleting image: "+i.message)}))}))}}();s=f.find("[data-richtext=froala-wysiwyg]").not(".froala-wysiwyged");if(s.length){h=e(s[0]).data("options");if(e.isFunction(e.fn.editable))u(s);else{e("head").append('<link href="'+h.csspath+'" rel="stylesheet" media="all" type="text/css">');e.getScript(h.jspath,function(e){return function(e,t,i){return u(s)}}())}}return f.find("trix-editor").each((function(){if(!window.Trix){h=e(this).data("options");h.warn_dynamic_load&&console.warn("ActionText assets should be loaded statically. Follow instructions in https://github.com/railsadminteam/rails_admin/wiki/ActionText");e("head").append('<link href="'+h.csspath+'" rel="stylesheet" media="all" type="text/css">');return e.getScript(h.jspath)}}))}}))})(t);window._rails_loaded||e.start();

